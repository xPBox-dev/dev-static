(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1110],{29452:function(Q,O,e){"use strict";e.r(O);var A=e(3515),C=e(85461),j=e(13254),u=e(14277),c=e(96132),K=e(22385),y=e(69713),U=e(37730),p=e(33565),T=e(21349),o=e(23723),i=e(67294),r=e(84787),h=e(33053),x=e.n(h),P=e(21010),l=e(73727),M=e(16894),s=e(7110),a=e(56905),W=e(64358),b=e(13718),n=e(85893),t="gVqq";function R(f){for(var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,_=f.indexOf("/"),E=0;E<D&&_!==-1;E++)_=f.indexOf("/",_+1);return _!==-1?f.substr(0,_):f}var B=function(D){var _,E,Z,S,V,$,F,k,N,L=D.showAll,G=D.userId,H=i.useState("current"),Y=(0,p.Z)(H,2),m=Y[0],J=Y[1];i.useEffect(function(){v.run(),m==="current"?d.reset():d.run()},[G]);var v=(0,P.QT)(function(){return L?(0,a.K1)({current:!0,base:!0,userId:G}):(0,a.P)({current:!0,base:!0})},{manual:!0}),d=(0,P.QT)(function(){return L?(0,a.K1)({month:!0,userId:G}):(0,a.P)({month:!0})},{manual:!0}),X=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(I,g){return(0,n.jsx)(y.Z,{placement:"top",title:g.appId,_nk:"".concat(t,"11"),children:(0,n.jsx)(l.rU,{to:R(P.m8.location.pathname)+"/"+g.id,_nk:"".concat(t,"21"),children:I})})}}].concat((0,U.Z)(L?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(I,g){return(0,n.jsxs)(n.Fragment,{children:[g.nick," (",g.email,")"]})}}]:[]),[{title:"\u5E94\u7528\u5546\u5E97\u5B89\u88C5",dataIndex:"install_store",key:"install_store",hideInSearch:!0},{title:"\u5E94\u7528ID\u5B89\u88C5",dataIndex:"install_app_id",key:"install_app_id",hideInSearch:!0},{title:"\u6587\u4EF6\u5B89\u88C5",dataIndex:"install_file",key:"install_file",hideInSearch:!0},{title:"\u5E94\u7528\u5B89\u88C5",dataIndex:"install_app",key:"install_app",hideInSearch:!0},{title:"\u542F\u52A8\u5668\u5B89\u88C5",dataIndex:"install_loader",key:"install_loader",hideInSearch:!0}]),w={appendPadding:10,height:400,data:m==="current"?((_=v.data)===null||_===void 0?void 0:_.current.rank)||[]:((E=d.data)===null||E===void 0?void 0:E.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:m==="current"?v.loading:d.loading,label:{type:"outer",content:"{name} {percentage}"},onReady:function(I){I.on("element:click",function(g){P.m8.push(R(P.m8.location.pathname)+"/"+g.data.data.id)})},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},q={appendPadding:10,height:400,data:m==="current"?((Z=v.data)===null||Z===void 0?void 0:Z.current.from)||[]:((S=d.data)===null||S===void 0?void 0:S.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:m==="current"?v.loading:d.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},ee=(0,n.jsxs)(r.ZP,{split:"horizontal",_nk:"".concat(t,"31"),children:[(0,n.jsx)(r.ZP,{bodyStyle:{padding:0},style:{marginTop:10},_nk:"".concat(t,"32"),children:(0,n.jsx)(M.ZP,{headerTitle:"\u5B89\u88C5\u91CF\u8BE6\u60C5",params:(0,c.Z)({},m==="current"?{type:1}:{type:2}),rowKey:"id",search:!1,request:L?a.Yd:a.Dz,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:X,_nk:"".concat(t,"41")})}),(0,n.jsx)(r.ZP,{collapsible:!0,title:"TOP10\u5B89\u88C5\u91CF\u5E94\u7528",style:{position:"relative"},bodyStyle:{height:"auto"},_nk:"".concat(t,"33"),children:(m==="current"?(((V=v.data)===null||V===void 0?void 0:V.current.rank)||[]).length===0:((($=d.data)===null||$===void 0?void 0:$.month.rank)||[]).length===0)?(0,n.jsx)(u.Z,{image:u.Z.PRESENTED_IMAGE_SIMPLE,_nk:"".concat(t,"51")}):(0,n.jsx)(s.Z,(0,c.Z)((0,c.Z)({},w),{},{_nk:"".concat(t,"61")}))}),(0,n.jsx)(r.ZP,{collapsible:!0,title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{position:"relative"},bodyStyle:{height:"auto"},_nk:"".concat(t,"34"),children:(m==="current"?(((F=v.data)===null||F===void 0?void 0:F.current.from)||[]).length===0:(((k=d.data)===null||k===void 0?void 0:k.month.from)||[]).length===0)?(0,n.jsx)(u.Z,{image:u.Z.PRESENTED_IMAGE_SIMPLE,_nk:"".concat(t,"52")}):(0,n.jsx)(s.Z,(0,c.Z)((0,c.Z)({},q),{},{_nk:"".concat(t,"62")}))})]});return(0,n.jsx)(T.Z,{_nk:"".concat(t,"71"),children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(o.Z,{_nk:"".concat(t,"91")}),_nk:"".concat(t,"81"),children:(0,n.jsx)(W.Z,{loading:v.loading,active:(N=v.data)===null||N===void 0?void 0:N.base,_nk:"".concat(t,"a1")})}),(0,n.jsxs)(i.Suspense,{fallback:(0,n.jsx)(o.Z,{_nk:"".concat(t,"92")}),_nk:"".concat(t,"82"),children:[(0,n.jsx)(C.Z,{offsetTop:b.M,style:{overflow:"hidden"},_nk:"".concat(t,"b1"),children:(0,n.jsxs)(r.ZP,{className:x().tabs,tabs:{tabPosition:"top",size:"large",activeKey:m,onChange:function(I){J(I),I==="month"&&!d.data&&!d.loading&&d.run()}},style:{boxShadow:"0 0 5px #00000044"},_nk:"".concat(t,"35"),children:[(0,n.jsx)(r.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0,display:"none"}},_nk:"".concat(t,"83")},"current"),(0,n.jsx)(r.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0,display:"none"}},_nk:"".concat(t,"84")},"month")]})}),(0,n.jsx)(r.ZP,{bodyStyle:{padding:0},_nk:"".concat(t,"36"),children:ee})]})]})})};O.default=B},86178:function(Q,O,e){"use strict";e.r(O);var A=e(33565),C=e(57361),j=e(9754),u=e.n(j),c=e(19797),K=e(29452),y=e(67294),U=e(36845),p=e(65476),T=e(6637),o=e(21010),i=e(85893),r="BQI+";function h(l){return x.apply(this,arguments)}function x(){return x=(0,C.Z)(u().mark(function l(M){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,T.y)({search:M}));case 1:case"end":return a.stop()}},l)})),x.apply(this,arguments)}function P(l){for(var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,s=l.indexOf("/"),a=0;a<M&&s!==-1;a++)s=l.indexOf("/",s+1);return s!==-1?l.substr(0,s):l}O.default=function(l){var M=l.route.name==="all-install",s=(0,o.tT)("admin"),a=s.selectedUser,W=s.setData,b=(0,y.useState)(a.value),n=(0,A.Z)(b,2),t=n[0],R=n[1],B=y.useRef(""),f=function(_){B.current=_};return(0,i.jsx)(c.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],tabActiveKey:l.location.pathname.substr(-7)==="install"?"overview":"detail",content:M&&(0,i.jsxs)(i.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,i.jsx)(p.Z,{showAll:!0,showSearch:!0,setMyOption:[a],placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:h,defaultValue:t,style:{width:"250px"},onChange:function(_,E){R(_),W({label:E.label,value:E.value})},_nk:"".concat(r,"21")})]}),onTabChange:function(_){_==="overview"?o.m8.push(P(o.m8.location.pathname)):o.m8.push(P(o.m8.location.pathname)+"/"+B.current)},_nk:"".concat(r,"11"),children:y.cloneElement(l.children,{showAll:M,userId:t,setAppId:f})})}},6637:function(Q,O,e){"use strict";e.d(O,{y:function(){return U}});var A=e(96132),C=e(57361),j=e(9754),u=e.n(j),c=e(18811),K=e(21010),y="TBw+";function U(T,o){return p.apply(this,arguments)}function p(){return p=(0,C.Z)(u().mark(function T(o,i){return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,K.WY)(c.s3+"user/search",{method:"POST",params:(0,A.Z)({},o),credentials:"include"}));case 1:case"end":return h.stop()}},T)})),p.apply(this,arguments)}}}]);
