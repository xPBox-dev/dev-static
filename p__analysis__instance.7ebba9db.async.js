(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[500],{46360:function(W){W.exports={header:"header___1YsBZ"}},53266:function(W){W.exports={tabs:"tabs___YEat-"}},19151:function(W,x,t){"use strict";t.r(x),t.d(x,{default:function(){return xe}});var u=t(33565),_=t(57361),I=t(9754),r=t.n(I),m=t(38315),o=t(96132),Z=t(22385),g=t(69713),E=t(37730),P=t(21349),S=t(23723),l=t(67294),d=t(84787),B=t(53266),D=t.n(B),f=t(21010),v=t(84744),c=t(17744),i=t(7110),s=t(56905),a=t(52778),$=t(4084),e=t(85893),N=a.Z.Statistic,J=a.Z.Divider,le=function(p){var O=p.loading,n=p.active,M=(0,l.useState)(!1),h=(0,u.Z)(M,2),A=h[0],F=h[1];return(0,e.jsx)($.Z,{onResize:function(V){F(V.width<696)},children:(0,e.jsxs)(a.Z.Group,{loading:O,direction:A?"column":"row",style:{marginBottom:24},children:[(0,e.jsx)(a.Z,{statistic:{title:"\u5F53\u524D\u5B9E\u4F8B\u6570",value:(n==null?void 0:n.current)||0,description:(0,e.jsx)(N,{title:"\u6628\u65E5\u5CF0\u503C",value:(n==null?void 0:n.max)||0})}}),(0,e.jsx)(J,{type:A?"horizontal":"vertical"}),(0,e.jsx)(a.Z,{statistic:{title:"24\u5C0F\u65F6\u6D3B\u8DC3\u5EA6",value:n==null?void 0:n.h24,description:(0,e.jsx)(N,{title:"\u6628\u65E5\u540C\u6BD4",value:(n==null?void 0:n.hc)==="-"?"-":(n==null?void 0:n.hc)+"%",trend:(n==null?void 0:n.hc)<0?"down":"up"})},chartPlacement:"left"}),(0,e.jsx)(a.Z,{statistic:{title:"\u672C\u6708\u6D3B\u8DC3\u5EA6",value:n==null?void 0:n.month,description:(0,e.jsx)(N,{title:"\u4E0A\u6708\u540C\u6BD4",value:(n==null?void 0:n.mc)==="-"?"-":(n==null?void 0:n.mc)+"%",trend:(n==null?void 0:n.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},te=le,ne=function(p){var O,n,M,h,A,F=p.showAll,K=p.userId,V=l.useState("hour"),Q=(0,u.Z)(V,2),T=Q[0],z=Q[1];l.useEffect(function(){C.run(),T==="hour"?y.reset():y.run()},[K]);var C=(0,f.QT)(function(){return F?(0,s.Pf)({hour:!0,base:!0,userId:K}):(0,s.s8)({hour:!0,base:!0})},{manual:!0}),y=(0,f.QT)(function(){return F?(0,s.Pf)({month:!0,userId:K}):(0,s.s8)({month:!0})},{manual:!0}),ee=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(R,G){return(0,e.jsx)(g.Z,{placement:"top",title:G.appId,children:(0,e.jsx)("a",{onClick:function(){return f.m8.push("/app/detail/"+G.id)},children:R})})}}].concat((0,E.Z)(F?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(R,G){return(0,e.jsxs)(e.Fragment,{children:[G.nick," (",G.email,")"]})}}]:[]),[{title:"\u6D3B\u8DC3\u5EA6",dataIndex:"active",key:"active",hideInSearch:!0},{title:"\u5E73\u5747\u6D3B\u8DC3\u8BBE\u5907",dataIndex:"device",key:"device",hideInSearch:!0},{title:"\u542F\u52A8\u6B21\u6570",dataIndex:"count",key:"count",hideInSearch:!0}]),w={appendPadding:10,height:400,data:T==="hour"?((O=C.data)===null||O===void 0?void 0:O.hour.rank)||[]:((n=y.data)===null||n===void 0?void 0:n.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:T==="hour"?C.loading:y.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},b=(0,e.jsxs)(d.ZP,{split:"horizontal",children:[(0,e.jsx)(d.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,e.jsx)(c.ZP,{headerTitle:"\u6D3B\u8DC3\u5E94\u7528\u5217\u8868",dataSource:T==="hour"?((M=C.data)===null||M===void 0?void 0:M.hour.list)||[]:((h=y.data)===null||h===void 0?void 0:h.month.list)||[],loading:T==="hour"?C.loading:y.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:ee})}),(0,e.jsx)(d.ZP,{title:"TOP10\u6D3B\u8DC3\u5E94\u7528",style:{height:500,position:"relative"},children:(0,e.jsx)(i.Z,(0,o.Z)({},w))})]});return(0,e.jsx)(P.Z,{children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Suspense,{fallback:(0,e.jsx)(S.Z,{}),children:(0,e.jsx)(te,{loading:C.loading,active:(A=C.data)===null||A===void 0?void 0:A.base})}),(0,e.jsx)(l.Suspense,{fallback:(0,e.jsx)(S.Z,{}),children:(0,e.jsxs)(d.ZP,{className:D().tabs,tabs:{tabPosition:"top",size:"large",activeKey:T,onChange:function(R){z(R),R==="month"&&!y.data&&!y.loading&&y.run()}},children:[(0,e.jsx)(d.ZP.TabPane,{tab:"24\u5C0F\u65F6\u62A5",cardProps:{bodyStyle:{padding:0}},children:b},"hour"),(0,e.jsx)(d.ZP.TabPane,{tab:"\u6708\u62A5",cardProps:{bodyStyle:{padding:0}},children:b},"month")]})})]})})},ie=ne,ae=t(14965),oe=t(14072),de=t(58024),ce=t(39144),X=t(64896),k=t(37744),_e=t(57663),re=t(71577),pe=t(20228),ve=t(11382),se=t(65476),q=t(46360),Y=t.n(q),he=t(57845);function fe(j){for(var p=j.indexOf("/"),O=0;O<2&&p!==-1;O++)p=j.indexOf("/",p+1);return p!==-1?j.substr(0,p):j}var Ee=function(p){var O,n=p.showAll,M=p.userId,h=p.appId,A=p.setAppId,F=l.useState("current"),K=(0,u.Z)(F,2),V=K[0],Q=K[1],T=l.useState(h===""?[]:[{value:h,label:(0,e.jsx)(ve.Z,{size:"small"})}]),z=(0,u.Z)(T,2),C=z[0],y=z[1];function ee(L){return w.apply(this,arguments)}function w(){return w=(0,_.Z)(r().mark(function L(U){return r().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.abrupt("return",(0,v.yC)((0,o.Z)((0,o.Z)({search:U},n?{all:n}:{}),M!==0?{userId:M}:{})));case 1:case"end":return ue.stop()}},L)})),w.apply(this,arguments)}var b=(0,f.QT)(function(){return(0,s.hK)({current:!0,base:!0,appId:h})},{manual:h===""}),H=(0,f.QT)(function(){return(0,s.hK)({month:!0,appId:h})},{manual:!0});(0,he.e)(function(){b.run()},[h]),(0,l.useEffect)(function(){var L,U;y([{value:(L=b.data)===null||L===void 0?void 0:L.id,label:(U=b.data)===null||U===void 0?void 0:U.title}])},[b.data]);var R=(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.Z,(0,o.Z)((0,o.Z)({showSearch:!0},h===""?{}:{value:h}),{},{placeholder:"\u9009\u62E9\u5E94\u7528",fetchOptions:ee,setMyOption:C,style:{minWidth:"200px",maxWidth:"350px"},onChange:function(U){A(U),window.history.pushState({},0,"#"+fe(f.m8.location.pathname)+"/"+U)}}))}),G=(0,e.jsx)(d.ZP,{split:"horizontal"});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{className:Y().header,title:R,subTitle:"\u7684\u7EDF\u8BA1\u4FE1\u606F",extra:h&&(0,e.jsx)(re.Z,{onClick:function(){f.m8.push("/app/detail/"+h)},children:"\u5E94\u7528\u8BE6\u60C5"}),style:{padding:0,marginBottom:20}}),h?(0,e.jsx)(P.Z,{children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Suspense,{fallback:(0,e.jsx)(S.Z,{}),children:(0,e.jsx)(te,{loading:b.loading,active:(O=b.data)===null||O===void 0?void 0:O.base})}),(0,e.jsxs)(l.Suspense,{fallback:(0,e.jsx)(S.Z,{}),children:[(0,e.jsxs)(d.ZP,{className:D().tabs,tabs:{tabPosition:"top",size:"middle",activeKey:V,onChange:function(U){Q(U)}},children:[(0,e.jsx)(d.ZP.TabPane,{tab:"\u4ECA\u65E5"},"current"),(0,e.jsx)(d.ZP.TabPane,{tab:"\u672C\u6708"},"month"),(0,e.jsx)(d.ZP.TabPane,{tab:(0,e.jsxs)(e.Fragment,{children:["\u81EA\u5B9A\u4E49:",(0,e.jsx)(oe.Z.RangePicker,{bordered:!1})]})},"custom")]}),(0,e.jsx)(d.ZP,{bodyStyle:{padding:0},children:G})]})]})}):(0,e.jsx)(ce.Z,{bodyStyle:{textAlign:"center"},children:"\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5E94\u7528"})]})},ge=Ee,Pe=t(6637);function Oe(j){return me.apply(this,arguments)}function me(){return me=(0,_.Z)(r().mark(function j(p){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,Pe.y)({search:p}));case 1:case"end":return n.stop()}},j)})),me.apply(this,arguments)}var xe=function(j){var p=j.route.name==="all-instance",O=l.useState(j.match.params.appId?j.match.params.appId:""),n=(0,u.Z)(O,2),M=n[0],h=n[1],A=l.useRef(M?"detail":"overview"),F=(0,l.useState)(0),K=(0,u.Z)(F,2),V=K[0],Q=K[1],T=(0,e.jsx)(ie,{showAll:p,userId:V}),z=(0,e.jsx)(ge,{showAll:p,userId:V,appId:M,setAppId:h}),C=l.useState(M?z:T),y=(0,u.Z)(C,2),ee=y[0],w=y[1];(0,l.useEffect)(function(){b()},[V,M]);var b=function(){A.current==="overview"?w(T):w(z)};return(0,e.jsx)(m.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],tabActiveKey:A.current,content:p&&(0,e.jsxs)(e.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,e.jsx)(se.Z,{showAll:!0,showSearch:!0,placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:Oe,defaultValue:0,style:{width:"250px"},onChange:function(R){Q(R)}})]}),onTabChange:function(R){A.current=R,b()},children:ee})}},57845:function(W,x,t){"use strict";t.d(x,{e:function(){return _}});var u=t(67294),_=function(r,m){var o=u.useRef(!1);u.useEffect(function(){if(o.current){var Z=r();return function(){return Z&&Z()}}else o.current=!0},m),u.useEffect(function(){return function(){return o.current=!1}},[])}},65476:function(W,x,t){"use strict";var u=t(96132),_=t(43358),I=t(90290),r=t(20228),m=t(11382),o=t(37730),Z=t(33565),g=t(81211),E=t(67294),P=t(23279),S=t.n(P),l=t(85893),d=function(D){var f=D.fetchOptions,v=D.debounceTimeout,c=v===void 0?500:v,i=D.showAll,s=D.setMyFetching,a=D.setMyOption,$=(0,g.Z)(D,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),e=E.useState(!1),N=(0,Z.Z)(e,2),J=N[0],le=N[1],te=E.useState(!1),ne=(0,Z.Z)(te,2),ie=ne[0],ae=ne[1],oe=E.useState(i?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),de=(0,Z.Z)(oe,2),ce=de[0],X=de[1];E.useEffect(function(){J||X(a)},[a]),E.useEffect(function(){J||X(a)},[s]);var k=E.useRef(0),_e=E.useMemo(function(){var re=function(ve){k.current+=1;var se=k.current;X([]),ae(!0),f(ve).then(function(q){se===k.current&&(q.data.forEach(function(Y){Y.label=Y.text,delete Y.text,Y.value=Y.id,delete Y.id}),X(i?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,o.Z)(q.data)):q.data),ae(!1))})};return S()(re,c)},[f,c]);return(0,l.jsx)(I.Z,(0,u.Z)((0,u.Z)({filterOption:!1,onSearch:_e},$),{},{options:ie?[{value:0,label:(0,l.jsx)(m.Z,{size:"small"})}]:ce,onDropdownVisibleChange:function(pe){pe&&!J&&(le(!0),ae(!0),_e())}}))};x.Z=d},23723:function(W,x,t){"use strict";var u=t(20228),_=t(11382),I=t(85893);x.Z=function(){return(0,I.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,I.jsx)(_.Z,{size:"large"})})}},84744:function(W,x,t){"use strict";t.d(x,{pb:function(){return Z},aF:function(){return E},Nm:function(){return S},rZ:function(){return d},yC:function(){return D}});var u=t(96132),_=t(57361),I=t(9754),r=t.n(I),m=t(18811),o=t(21010);function Z(v,c){return g.apply(this,arguments)}function g(){return g=(0,_.Z)(r().mark(function v(c,i){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(m.s3+"app/getList",{method:"POST",params:(0,u.Z)({},c),credentials:"include"}));case 1:case"end":return a.stop()}},v)})),g.apply(this,arguments)}function E(v,c){return P.apply(this,arguments)}function P(){return P=(0,_.Z)(r().mark(function v(c,i){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(m.s3+"app/getAll",{method:"POST",params:(0,u.Z)({},c),credentials:"include"}));case 1:case"end":return a.stop()}},v)})),P.apply(this,arguments)}function S(v,c){return l.apply(this,arguments)}function l(){return l=(0,_.Z)(r().mark(function v(c,i){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(m.s3+"app/getDetail",{method:"POST",params:(0,u.Z)({},c),credentials:"include"}));case 1:case"end":return a.stop()}},v)})),l.apply(this,arguments)}function d(v,c){return B.apply(this,arguments)}function B(){return B=(0,_.Z)(r().mark(function v(c,i){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(m.s3+"app/getStatistic",{method:"POST",params:(0,u.Z)({},c),credentials:"include"}));case 1:case"end":return a.stop()}},v)})),B.apply(this,arguments)}function D(v,c){return f.apply(this,arguments)}function f(){return f=(0,_.Z)(r().mark(function v(c,i){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(m.s3+"app/search",{method:"POST",params:(0,u.Z)({},c),credentials:"include"}));case 1:case"end":return a.stop()}},v)})),f.apply(this,arguments)}},56905:function(W,x,t){"use strict";t.d(x,{s8:function(){return Z},Pf:function(){return E},hK:function(){return S},P:function(){return d},K1:function(){return D},sg:function(){return v}});var u=t(96132),_=t(57361),I=t(9754),r=t.n(I),m=t(18811),o=t(21010);function Z(i,s){return g.apply(this,arguments)}function g(){return g=(0,_.Z)(r().mark(function i(s,a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.WY)(m.s3+"analysis/getInstance",{method:"POST",params:(0,u.Z)({},s),credentials:"include"}));case 1:case"end":return e.stop()}},i)})),g.apply(this,arguments)}function E(i,s){return P.apply(this,arguments)}function P(){return P=(0,_.Z)(r().mark(function i(s,a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.WY)(m.s3+"analysis/getAllInstance",{method:"POST",params:(0,u.Z)({},s),credentials:"include"}));case 1:case"end":return e.stop()}},i)})),P.apply(this,arguments)}function S(i,s){return l.apply(this,arguments)}function l(){return l=(0,_.Z)(r().mark(function i(s,a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.WY)(m.s3+"analysis/getAppInstance",{method:"POST",params:(0,u.Z)({},s),credentials:"include"}));case 1:case"end":return e.stop()}},i)})),l.apply(this,arguments)}function d(i,s){return B.apply(this,arguments)}function B(){return B=(0,_.Z)(r().mark(function i(s,a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.WY)(m.s3+"analysis/getInstall",{method:"POST",params:(0,u.Z)({},s),credentials:"include"}));case 1:case"end":return e.stop()}},i)})),B.apply(this,arguments)}function D(i,s){return f.apply(this,arguments)}function f(){return f=(0,_.Z)(r().mark(function i(s,a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.WY)(m.s3+"analysis/getAllInstall",{method:"POST",params:(0,u.Z)({},s),credentials:"include"}));case 1:case"end":return e.stop()}},i)})),f.apply(this,arguments)}function v(i,s){return c.apply(this,arguments)}function c(){return c=(0,_.Z)(r().mark(function i(s,a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.WY)(m.s3+"analysis/getAppInstall",{method:"POST",params:(0,u.Z)({},s),credentials:"include"}));case 1:case"end":return e.stop()}},i)})),c.apply(this,arguments)}},6637:function(W,x,t){"use strict";t.d(x,{y:function(){return Z}});var u=t(96132),_=t(57361),I=t(9754),r=t.n(I),m=t(18811),o=t(21010);function Z(E,P){return g.apply(this,arguments)}function g(){return g=(0,_.Z)(r().mark(function E(P,S){return r().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,o.WY)(m.s3+"user/search",{method:"POST",params:(0,u.Z)({},P),credentials:"include"}));case 1:case"end":return d.stop()}},E)})),g.apply(this,arguments)}}}]);
