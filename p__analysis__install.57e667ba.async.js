(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[110],{46360:function(L){L.exports={header:"header___1YsBZ"}},33053:function(L){L.exports={tabs:"tabs___2_QYX"}},55457:function(L,j,e){"use strict";e.r(j),e.d(j,{default:function(){return Ae}});var u=e(33565),p=e(57361),D=e(9754),s=e.n(D),m=e(38315),i=e(96132),S=e(13254),g=e(14277),P=e(22385),O=e(69713),G=e(37730),Z=e(21349),I=e(23723),c=e(67294),d=e(84787),R=e(33053),v=e.n(R),l=e(21010),W=e(17744),b=e(7110),n=e(56905),o=e(52778),U=e(4084),t=e(85893),r=o.Z.Statistic,ce=o.Z.Divider,pe=function(E){var y=E.loading,a=E.active,M=(0,c.useState)(!1),$=(0,u.Z)(M,2),C=$[0],h=$[1];return(0,t.jsx)(U.Z,{onResize:function(w){h(w.width<696)},children:(0,t.jsxs)(o.Z.Group,{loading:y,direction:C?"column":"row",style:{marginBottom:24},children:[(0,t.jsx)(o.Z,{statistic:{title:"\u4ECA\u65E5\u5B89\u88C5\u91CF",value:(a==null?void 0:a.current)||0,description:(0,t.jsx)(r,{title:"\u672C\u6708\u5CF0\u503C",value:(a==null?void 0:a.max)||0})}}),(0,t.jsx)(ce,{type:C?"horizontal":"vertical"}),(0,t.jsx)(o.Z,{statistic:{title:"\u6628\u65E5\u5B89\u88C5\u91CF",value:a==null?void 0:a.yesterday,description:(0,t.jsx)(r,{title:"\u524D\u65E5\u540C\u6BD4",value:(a==null?void 0:a.yc)==="-"?"-":(a==null?void 0:a.yc)+"%",trend:(a==null?void 0:a.yc)<0?"down":"up"})},chartPlacement:"left"}),(0,t.jsx)(o.Z,{statistic:{title:"\u672C\u6708\u5B89\u88C5\u91CF",value:a==null?void 0:a.month,description:(0,t.jsx)(r,{title:"\u4E0A\u6708\u540C\u6BD4",value:(a==null?void 0:a.mc)==="-"?"-":(a==null?void 0:a.mc)+"%",trend:(a==null?void 0:a.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},le=pe,_e=function(E){var y,a,M,$,C,h,Y,w,Q,K,F,X=E.showAll,z=E.userId,te=c.useState("current"),ne=(0,u.Z)(te,2),x=ne[0],H=ne[1];c.useEffect(function(){_.run(),x==="current"?f.reset():f.run()},[z]);var _=(0,l.QT)(function(){return X?(0,n.K1)({current:!0,base:!0,userId:z}):(0,n.P)({current:!0,base:!0})},{manual:!0}),f=(0,l.QT)(function(){return X?(0,n.K1)({month:!0,userId:z}):(0,n.P)({month:!0})},{manual:!0}),ae=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(se,V){return(0,t.jsx)(O.Z,{placement:"top",title:V.appId,children:(0,t.jsx)("a",{onClick:function(){return l.m8.push("/app/detail/"+V.id)},children:se})})}}].concat((0,G.Z)(X?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(se,V){return(0,t.jsxs)(t.Fragment,{children:[V.nick," (",V.email,")"]})}}]:[]),[{title:"\u5E94\u7528\u5546\u5E97\u5B89\u88C5",dataIndex:"install_store",key:"install_store",hideInSearch:!0},{title:"\u5E94\u7528ID\u5B89\u88C5",dataIndex:"install_app_id",key:"install_app_id",hideInSearch:!0},{title:"\u6587\u4EF6\u5B89\u88C5",dataIndex:"install_file",key:"install_file",hideInSearch:!0},{title:"\u5E94\u7528\u5B89\u88C5",dataIndex:"install_app",key:"install_app",hideInSearch:!0},{title:"\u542F\u52A8\u5668\u5B89\u88C5",dataIndex:"install_loader",key:"install_loader",hideInSearch:!0}]),J={appendPadding:10,height:400,data:x==="current"?((y=_.data)===null||y===void 0?void 0:y.current.rank)||[]:((a=f.data)===null||a===void 0?void 0:a.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:x==="current"?_.loading:f.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},re={appendPadding:10,height:400,data:x==="current"?((M=_.data)===null||M===void 0?void 0:M.current.from)||[]:(($=f.data)===null||$===void 0?void 0:$.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:x==="current"?_.loading:f.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},B=(0,t.jsxs)(d.ZP,{split:"horizontal",children:[(0,t.jsx)(d.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,t.jsx)(W.ZP,{headerTitle:"\u5B89\u88C5\u91CF\u8BE6\u60C5",dataSource:x==="current"?((C=_.data)===null||C===void 0?void 0:C.current.list)||[]:((h=f.data)===null||h===void 0?void 0:h.month.list)||[],loading:x==="current"?_.loading:f.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:ae})}),(0,t.jsx)(d.ZP,{collapsible:!0,title:"TOP10\u5B89\u88C5\u91CF\u5E94\u7528",style:{position:"relative"},bodyStyle:{height:"auto"},children:(x==="current"?(((Y=_.data)===null||Y===void 0?void 0:Y.current.rank)||[]).length===0:(((w=f.data)===null||w===void 0?void 0:w.month.rank)||[]).length===0)?(0,t.jsx)(g.Z,{image:g.Z.PRESENTED_IMAGE_SIMPLE}):(0,t.jsx)(b.Z,(0,i.Z)({},J))}),(0,t.jsx)(d.ZP,{collapsible:!0,title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{position:"relative"},bodyStyle:{height:"auto"},children:(x==="current"?(((Q=_.data)===null||Q===void 0?void 0:Q.current.from)||[]).length===0:(((K=f.data)===null||K===void 0?void 0:K.month.from)||[]).length===0)?(0,t.jsx)(g.Z,{image:g.Z.PRESENTED_IMAGE_SIMPLE}):(0,t.jsx)(b.Z,(0,i.Z)({},re))})]});return(0,t.jsx)(Z.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(I.Z,{}),children:(0,t.jsx)(le,{loading:_.loading,active:(F=_.data)===null||F===void 0?void 0:F.base})}),(0,t.jsxs)(c.Suspense,{fallback:(0,t.jsx)(I.Z,{}),children:[(0,t.jsxs)(d.ZP,{className:v().tabs,tabs:{tabPosition:"top",size:"large",activeKey:x,onChange:function(se){H(se),se==="month"&&!f.data&&!f.loading&&f.run()}},children:[(0,t.jsx)(d.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0,display:"none"}}},"current"),(0,t.jsx)(d.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0,display:"none"}}},"month")]}),(0,t.jsx)(d.ZP,{bodyStyle:{padding:0},children:B})]})]})})},ue=_e,fe=e(14965),ie=e(14072),ge=e(58024),k=e(39144),oe=e(64896),de=e(37744),ve=e(57663),q=e(71577),Ee=e(20228),me=e(11382),ee=e(65476),N=e(84744),Pe=e(57845),Ie=e(46360),xe=e.n(Ie);function ye(A){for(var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,y=A.indexOf("/"),a=0;a<E&&y!==-1;a++)y=A.indexOf("/",y+1);return y!==-1?A.substr(0,y):A}var je=function(E){var y,a,M,$=E.showAll,C=E.userId,h=E.appId,Y=E.setAppId,w=c.useState("current"),Q=(0,u.Z)(w,2),K=Q[0],F=Q[1],X=c.useState(h===""?[]:[{value:h,label:(0,t.jsx)(me.Z,{size:"small"}),disabled:!0}]),z=(0,u.Z)(X,2),te=z[0],ne=z[1];function x(B){return H.apply(this,arguments)}function H(){return H=(0,p.Z)(s().mark(function B(T){return s().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.abrupt("return",(0,N.yC)((0,i.Z)((0,i.Z)({search:T},$?{all:$}:{}),C!==0?{userId:C}:{})));case 1:case"end":return V.stop()}},B)})),H.apply(this,arguments)}var _=(0,l.QT)(function(){return(0,n.sg)({current:!0,base:!0,appId:h})},{manual:h===""}),f=(0,l.QT)(function(){return(0,n.sg)({month:!0,appId:h})},{manual:!0});(0,Pe.e)(function(){_.run()},[h]),(0,c.useEffect)(function(){var B,T;ne([{value:(B=_.data)===null||B===void 0?void 0:B.id,label:(T=_.data)===null||T===void 0?void 0:T.title}])},[_.data]);var ae=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ee.Z,(0,i.Z)((0,i.Z)({showSearch:!0},h===""?{}:{value:h}),{},{placeholder:"\u9009\u62E9\u5E94\u7528",fetchOptions:x,setMyOption:te,style:{minWidth:"200px",maxWidth:"350px"},onChange:function(T){Y(T),window.history.pushState({},0,"#"+ye(l.m8.location.pathname)+"/"+T)}}))}),J={appendPadding:10,height:400,data:K==="current"?((y=_.data)===null||y===void 0?void 0:y.current.from)||[]:((a=f.data)===null||a===void 0?void 0:a.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:K==="current"?_.loading:f.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},re=(0,t.jsx)(d.ZP,{split:"horizontal",children:(0,t.jsx)(d.ZP,{collapsible:!0,title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{position:"relative"},bodyStyle:{height:400},children:(0,t.jsx)(b.Z,(0,i.Z)({},J))})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(de.Z,{className:xe().header,title:ae,subTitle:"\u7684\u7EDF\u8BA1\u4FE1\u606F",extra:h&&(0,t.jsxs)(q.Z.Group,{children:[(0,t.jsx)(q.Z,{onClick:function(){l.m8.push(ye(l.m8.location.pathname,1)+"/instance/"+h)},children:"\u6D3B\u8DC3\u7EDF\u8BA1"}),(0,t.jsx)(q.Z,{onClick:function(){l.m8.push("/app/detail/"+h)},children:"\u5E94\u7528\u8BE6\u60C5"})]}),style:{padding:0,marginBottom:20}}),h?(0,t.jsx)(Z.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(I.Z,{}),children:(0,t.jsx)(le,{loading:_.loading,active:(M=_.data)===null||M===void 0?void 0:M.base})}),(0,t.jsxs)(c.Suspense,{fallback:(0,t.jsx)(I.Z,{}),children:[(0,t.jsxs)(d.ZP,{className:v().tabs,tabs:{tabPosition:"top",size:"middle",activeKey:K,onChange:function(T){F(T)}},children:[(0,t.jsx)(d.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0}}},"current"),(0,t.jsx)(d.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0}}},"month"),(0,t.jsx)(d.ZP.TabPane,{tab:(0,t.jsxs)(t.Fragment,{children:["\u81EA\u5B9A\u4E49:",(0,t.jsx)(ie.Z.RangePicker,{bordered:!1})]}),cardProps:{bodyStyle:{padding:0}}},"month1")]}),(0,t.jsx)(d.ZP,{bodyStyle:{padding:0},children:re})]})]})}):(0,t.jsx)(k.Z,{bodyStyle:{textAlign:"center"},children:"\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5E94\u7528"})]})},Oe=je,Ze=e(6637);function be(A){return he.apply(this,arguments)}function he(){return he=(0,p.Z)(s().mark(function A(E){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Ze.y)({search:E}));case 1:case"end":return a.stop()}},A)})),he.apply(this,arguments)}var Ae=function(A){var E=A.route.name==="all-install",y=c.useState(A.match.params.appId?A.match.params.appId:""),a=(0,u.Z)(y,2),M=a[0],$=a[1],C=c.useRef(M?"detail":"overview"),h=(0,l.tT)("admin"),Y=h.selectedUser,w=h.setData,Q=(0,c.useState)(Y.value),K=(0,u.Z)(Q,2),F=K[0],X=K[1],z=(0,t.jsx)(ue,{showAll:E,userId:F}),te=(0,t.jsx)(Oe,{showAll:E,userId:F,appId:M,setAppId:$}),ne=c.useState(M?te:z),x=(0,u.Z)(ne,2),H=x[0],_=x[1];(0,c.useEffect)(function(){f()},[F,M]);var f=function(){C.current==="overview"?_(z):_(te)};return(0,t.jsx)(m.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],tabActiveKey:C.current,content:E&&(0,t.jsxs)(t.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,t.jsx)(ee.Z,{showAll:!0,showSearch:!0,setMyOption:[Y],placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:be,defaultValue:F,style:{width:"250px"},onChange:function(J,re){X(J),w({label:re.label,value:re.value})}})]}),onTabChange:function(J){C.current=J,f()},children:H})}},57845:function(L,j,e){"use strict";e.d(j,{e:function(){return p}});var u=e(67294),p=function(s,m){var i=u.useRef(!1);u.useEffect(function(){if(i.current){var S=s();return function(){return S&&S()}}else i.current=!0},m),u.useEffect(function(){return function(){return i.current=!1}},[])}},65476:function(L,j,e){"use strict";var u=e(96132),p=e(43358),D=e(90290),s=e(20228),m=e(11382),i=e(37730),S=e(33565),g=e(81211),P=e(67294),O=e(23279),G=e.n(O),Z=e(85893),I=function(d){var R=d.fetchOptions,v=d.debounceTimeout,l=v===void 0?500:v,W=d.showAll,b=d.setMyFetching,n=d.setMyOption,o=(0,g.Z)(d,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),U=P.useState(!1),t=(0,S.Z)(U,2),r=t[0],ce=t[1],pe=P.useState(!1),le=(0,S.Z)(pe,2),_e=le[0],ue=le[1],fe=P.useState(W?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),ie=(0,S.Z)(fe,2),ge=ie[0],k=ie[1];P.useEffect(function(){r||k(n)},[n]),P.useEffect(function(){r||k(n)},[b]);var oe=P.useRef(0),de=P.useMemo(function(){var ve=function(Ee){oe.current+=1;var me=oe.current;k([]),ue(!0),R(Ee).then(function(ee){me===oe.current&&(ee.data.forEach(function(N){N.label=N.text,delete N.text,N.value=N.id,delete N.id}),k(W?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,i.Z)(ee.data)):ee.data),ue(!1))})};return G()(ve,l)},[R,l]);return(0,Z.jsx)(D.Z,(0,u.Z)((0,u.Z)({filterOption:!1,onSearch:de},o),{},{options:_e?[{value:"",label:(0,Z.jsx)(m.Z,{size:"small"}),disabled:!0}]:ge,onDropdownVisibleChange:function(q){q&&!r&&(ce(!0),ue(!0),de())}}))};j.Z=I},23723:function(L,j,e){"use strict";var u=e(20228),p=e(11382),D=e(85893);j.Z=function(){return(0,D.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,D.jsx)(p.Z,{size:"large"})})}},84744:function(L,j,e){"use strict";e.d(j,{pb:function(){return S},aF:function(){return P},Nm:function(){return G},rZ:function(){return I},yC:function(){return d}});var u=e(96132),p=e(57361),D=e(9754),s=e.n(D),m=e(18811),i=e(21010);function S(v,l){return g.apply(this,arguments)}function g(){return g=(0,p.Z)(s().mark(function v(l,W){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)(m.s3+"app/getList",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return n.stop()}},v)})),g.apply(this,arguments)}function P(v,l){return O.apply(this,arguments)}function O(){return O=(0,p.Z)(s().mark(function v(l,W){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)(m.s3+"app/getAll",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return n.stop()}},v)})),O.apply(this,arguments)}function G(v,l){return Z.apply(this,arguments)}function Z(){return Z=(0,p.Z)(s().mark(function v(l,W){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)(m.s3+"app/getDetail",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return n.stop()}},v)})),Z.apply(this,arguments)}function I(v,l){return c.apply(this,arguments)}function c(){return c=(0,p.Z)(s().mark(function v(l,W){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)(m.s3+"app/getStatistic",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return n.stop()}},v)})),c.apply(this,arguments)}function d(v,l){return R.apply(this,arguments)}function R(){return R=(0,p.Z)(s().mark(function v(l,W){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)(m.s3+"app/search",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return n.stop()}},v)})),R.apply(this,arguments)}},56905:function(L,j,e){"use strict";e.d(j,{s8:function(){return S},Pf:function(){return P},CF:function(){return G},Xf:function(){return I},P:function(){return d},K1:function(){return v},sg:function(){return W}});var u=e(96132),p=e(57361),D=e(9754),s=e.n(D),m=e(18811),i=e(21010);function S(n,o){return g.apply(this,arguments)}function g(){return g=(0,p.Z)(s().mark(function n(o,U){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(m.s3+"analysis/getInstance",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return r.stop()}},n)})),g.apply(this,arguments)}function P(n,o){return O.apply(this,arguments)}function O(){return O=(0,p.Z)(s().mark(function n(o,U){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(m.s3+"analysis/getAllInstance",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return r.stop()}},n)})),O.apply(this,arguments)}function G(n,o){return Z.apply(this,arguments)}function Z(){return Z=(0,p.Z)(s().mark(function n(o,U){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(m.s3+"analysis/getAppActive",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return r.stop()}},n)})),Z.apply(this,arguments)}function I(n,o){return c.apply(this,arguments)}function c(){return c=(0,p.Z)(s().mark(function n(o,U){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(m.s3+"analysis/getAppActiveStat",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return r.stop()}},n)})),c.apply(this,arguments)}function d(n,o){return R.apply(this,arguments)}function R(){return R=(0,p.Z)(s().mark(function n(o,U){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(m.s3+"analysis/getInstall",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return r.stop()}},n)})),R.apply(this,arguments)}function v(n,o){return l.apply(this,arguments)}function l(){return l=(0,p.Z)(s().mark(function n(o,U){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(m.s3+"analysis/getAllInstall",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return r.stop()}},n)})),l.apply(this,arguments)}function W(n,o){return b.apply(this,arguments)}function b(){return b=(0,p.Z)(s().mark(function n(o,U){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(m.s3+"analysis/getAppInstall",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return r.stop()}},n)})),b.apply(this,arguments)}},6637:function(L,j,e){"use strict";e.d(j,{y:function(){return S}});var u=e(96132),p=e(57361),D=e(9754),s=e.n(D),m=e(18811),i=e(21010);function S(P,O){return g.apply(this,arguments)}function g(){return g=(0,p.Z)(s().mark(function P(O,G){return s().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,i.WY)(m.s3+"user/search",{method:"POST",params:(0,u.Z)({},O),credentials:"include"}));case 1:case"end":return I.stop()}},P)})),g.apply(this,arguments)}}}]);
