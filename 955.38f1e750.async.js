(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[955],{72285:function(x){x.exports={channelCard:"channelCard___1COW8",cardSelect:"cardSelect___1Xbdu"}},73586:function(x,M,e){"use strict";var o=e(58024),m=e(39144),i=e(22385),a=e(69713),d=e(43358),l=e(90290),f=e(59250),g=e(13013),c=e(30887),h=e(99210),A=e(63185),L=e(9676),O=e(71153),C=e(60331),v=e(34792),I=e(48086),T=e(20228),_=e(11382),E=e(74379),u=e(38648),t=e(33565),j=e(72285),W=e.n(j),s=e(67294),B=e(21010),F=e(56837),Y=e(57845),G=e(62298),z=e(44545),n=e(85893),Q=function(Z){var R,b,y,K,S,$=Z.appId,V=Z.channel,N=Z.title,P=Z.defaultData,te=Z.loading,ne=s.useState(void 0),k=(0,t.Z)(ne,2),r=k[0],H=k[1],se=s.useState(void 0),q=(0,t.Z)(se,2),ue=q[0],ee=q[1];(0,Y.e)(function(){H(P),ee(P==null?void 0:P.config)},[P]),(0,Y.e)(function(){U.run()},[$]);var re=(0,B.QT)(function(){return(0,F.VF)({appId:$,channel:V})},{manual:!0,onSuccess:function(D){H(D),u.default.success({message:"\u63A8\u9001\u7248\u672C\u6210\u529F",description:"\u63A8\u9001\u7248\u672C\u6210\u529F\u3002",key:"push"})},onError:function(D){u.default.error({message:"\u63A8\u9001\u7248\u672C\u5931\u8D25",description:"\u63A8\u9001\u7248\u672C\u5931\u8D25\u4E86\u3002",key:"push"})}}),ae=function(){u.default.open({message:"\u6B63\u5728\u5C1D\u8BD5\u63A8\u9001",description:"\u63A8\u9001\u9700\u8981\u4E00\u5B9A\u65F6\u95F4\uFF0C\u8BF7\u7A0D\u7B49\u3002",icon:(0,n.jsx)(_.Z,{}),key:"push"}),re.run()},X=(0,B.QT)(function(p){return(0,F.Tf)({appId:$,channel:V,options:p})},{manual:!0,onSuccess:function(D){H(D),I.default.info("\u4FEE\u6539\u63A8\u9001\u8BBE\u7F6E\u6210\u529F"),D.config!==-1&&ae()}}),U=(0,B.QT)(function(p){return(0,F.E4)({search:p,appId:$,channel:V})},{debounceInterval:500}),_e=function(D){ee(D),X.run({config:D})},le=(r==null?void 0:r.status)>=0&&(r==null?void 0:r.status)<=3?[(0,n.jsx)(C.Z,{color:"orange",children:"\u672A\u63A8\u9001"},0),(0,n.jsx)(C.Z,{color:"green",children:"\u63A8\u9001\u6B63\u5E38"},1),(0,n.jsx)(C.Z,{color:"blue",children:"\u7B49\u5F85\u63A8\u9001"},2),(0,n.jsx)(C.Z,{color:"red",children:"\u63A8\u9001\u5931\u8D25"},3),(0,n.jsx)(C.Z,{color:"red",children:"\u5F3A\u5236\u64A4\u56DE"},4)][r.status]:(0,n.jsx)(C.Z,{color:"red",children:"\u672A\u77E5\u9519\u8BEF"},0),oe=(0,n.jsxs)(h.Z,{multiple:!0,children:[(0,n.jsxs)(h.Z.ItemGroup,{title:"\u9009\u9879",children:[(0,n.jsx)(h.Z.Item,{disabled:!0,children:(0,n.jsx)(L.Z,{disabled:!0,style:{width:"100%"},children:"\u542F\u7528\u5F3A\u5236\u64A4\u56DE\u6A21\u5F0F"})},"1"),(0,n.jsx)(h.Z.Item,{disabled:!0,children:(0,n.jsx)(L.Z,{disabled:!0,style:{width:"100%"},children:"\u542F\u7528\u5F3A\u5236\u6A21\u5F0F"})},"2")]}),(0,n.jsx)(h.Z.Divider,{}),(0,n.jsx)(h.Z.Item,{disabled:!0,icon:(0,n.jsx)(G.Z,{}),children:"\u63A8\u9001"},"3")]});return(0,n.jsx)(_.Z,{spinning:te||X.loading,bodyStyle:{padding:0},bordered:!1,children:(0,n.jsxs)(m.Z,{title:(0,n.jsx)(n.Fragment,{children:N}),extra:r&&le,bordered:!1,className:W().channelCard,actions:[(0,n.jsx)(g.Z,{arrow:!0,placement:"topCenter",overlay:oe,children:(0,n.jsx)(z.Z,{})},"ellipsis")],children:[(0,n.jsx)("p",{children:"\u63A8\u9001\u9009\u9879"}),(0,n.jsx)(a.Z,{title:r!=null&&r.push?r.pushName+" ("+r.push+")":"\u6682\u65E0\u63A8\u9001\u7248\u672C",children:(0,n.jsx)(l.Z,{value:ue,loading:X.loading,bordered:!1,size:"large",optionLabelProp:"title",className:W().cardSelect,dropdownMatchSelectWidth:!1,onChange:_e,showSearch:!0,filterOption:function(D,ie){var J;return((J=ie.title)===null||J===void 0?void 0:J.toLowerCase().indexOf(D.toLowerCase()))>=0},onSearch:function(D){D&&U.run(D)},children:U.loading?(0,n.jsx)(l.Z.Option,{value:-2,disabled:!0,children:(0,n.jsx)(_.Z,{size:"small"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z.OptGroup,{label:"\u81EA\u52A8\u63A8\u9001",children:(0,n.jsxs)(l.Z.Option,{value:0,title:"\u6700\u65B0\u7248\u672C",children:["\u6700\u65B0\u7248\u672C",(0,n.jsx)("br",{}),(0,n.jsx)("span",{style:{color:"#AAAAAA"},children:(R=U.data)!==null&&R!==void 0&&R.last?((b=U.data)===null||b===void 0?void 0:b.last.versionName)+" ("+((y=U.data)===null||y===void 0?void 0:y.last.build)+")":"\u6682\u65E0\u7248\u672C"})]})}),(0,n.jsxs)(l.Z.OptGroup,{label:"\u624B\u52A8\u9009\u62E9",children:[(0,n.jsx)(l.Z.Option,{value:-1,title:"\u4E0D\u63A8\u9001",children:"\u4E0D\u63A8\u9001"}),(r==null?void 0:r.config)>0&&(0,n.jsx)(l.Z.Option,{value:r.config,title:r.configName+" ("+r.config+")",children:r.configName+" ("+r.config+")"},r.config),(K=U.data)===null||K===void 0||(S=K.list)===null||S===void 0?void 0:S.map(function(p){if(p.build!==(r==null?void 0:r.config))return(0,n.jsx)(l.Z.Option,{value:p.build,title:p.versionName+" ("+p.build+")",children:p.versionName+" ("+p.build+")"},p.build)})]})]})})}),(0,n.jsx)("p",{style:{marginTop:20},children:"\u5F53\u524D\u63A8\u9001\u7684\u7248\u672C"}),(0,n.jsx)("p",{children:r!=null&&r.push?r.pushName+" ("+r.push+")":"\u65E0"})]})})};M.Z=Q},57845:function(x,M,e){"use strict";e.d(M,{e:function(){return m}});var o=e(67294),m=function(a,d){var l=o.useRef(!1);o.useEffect(function(){if(l.current){var f=a();return function(){return f&&f()}}else l.current=!0},d),o.useEffect(function(){return function(){return l.current=!1}},[])}},65476:function(x,M,e){"use strict";var o=e(96132),m=e(43358),i=e(90290),a=e(20228),d=e(11382),l=e(37730),f=e(33565),g=e(81211),c=e(67294),h=e(23279),A=e.n(h),L=e(85893),O=function(v){var I=v.fetchOptions,T=v.debounceTimeout,_=T===void 0?500:T,E=v.showAll,u=v.setMyFetching,t=v.setMyOption,j=(0,g.Z)(v,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),W=c.useState(!1),s=(0,f.Z)(W,2),B=s[0],F=s[1],Y=c.useState(!1),G=(0,f.Z)(Y,2),z=G[0],n=G[1],Q=c.useState(E?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),w=(0,f.Z)(Q,2),Z=w[0],R=w[1];c.useEffect(function(){B||R(t)},[t]),c.useEffect(function(){B||R(t)},[u]);var b=c.useRef(0),y=c.useMemo(function(){var K=function($){b.current+=1;var V=b.current;R([]),n(!0),I($).then(function(N){V===b.current&&(N.data.forEach(function(P){P.label=P.text,delete P.text,P.value=P.id,delete P.id}),R(E?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,l.Z)(N.data)):N.data),n(!1))})};return A()(K,_)},[I,_]);return(0,L.jsx)(i.Z,(0,o.Z)((0,o.Z)({filterOption:!1,onSearch:y},j),{},{options:z?[{value:"",label:(0,L.jsx)(d.Z,{size:"small"}),disabled:!0}]:Z,onDropdownVisibleChange:function(S){S&&!B&&(F(!0),n(!0),y())}}))};M.Z=O},84744:function(x,M,e){"use strict";e.d(M,{w$:function(){return f},pb:function(){return g},aF:function(){return h},Nm:function(){return L},rZ:function(){return C},yC:function(){return I},h$:function(){return _}});var o=e(96132),m=e(57361),i=e(9754),a=e.n(i),d=e(18811),l=e(21010),f={UNKNOWN:0,NORMAL:1,PENDING:2,FAILED:3,DISABLED:4,DELETED:5,BANNED:6,CHANGED:7,getText:function(t){return["\u672A\u77E5","\u6B63\u5E38","\u5BA1\u6838\u4E2D","\u5BA1\u6838\u672A\u901A\u8FC7","\u5DF2\u4E0B\u67B6","\u7B49\u5F85\u5220\u9664","\u8FDD\u89C4\u5C01\u7981","\u6B63\u5E38-\u5F85\u5BA1\u6838"][t]},getColor:function(t){return["#a8071a","#237804","#0050b3","#a8071a","#faad14","#a8071a","#a8071a","#0050b3"][t]}};function g(u,t){return c.apply(this,arguments)}function c(){return c=(0,m.Z)(a().mark(function u(t,j){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(d.s3+"app/getList",{method:"POST",params:(0,o.Z)({},t),credentials:"include"}));case 1:case"end":return s.stop()}},u)})),c.apply(this,arguments)}function h(u,t){return A.apply(this,arguments)}function A(){return A=(0,m.Z)(a().mark(function u(t,j){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(d.s3+"app/getAll",{method:"POST",params:(0,o.Z)({},t),credentials:"include"}));case 1:case"end":return s.stop()}},u)})),A.apply(this,arguments)}function L(u,t){return O.apply(this,arguments)}function O(){return O=(0,m.Z)(a().mark(function u(t,j){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(d.s3+"app/getDetail",{method:"POST",params:(0,o.Z)({},t),credentials:"include"}));case 1:case"end":return s.stop()}},u)})),O.apply(this,arguments)}function C(u,t){return v.apply(this,arguments)}function v(){return v=(0,m.Z)(a().mark(function u(t,j){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(d.s3+"app/getStatistic",{method:"POST",params:(0,o.Z)({},t),credentials:"include"}));case 1:case"end":return s.stop()}},u)})),v.apply(this,arguments)}function I(u,t){return T.apply(this,arguments)}function T(){return T=(0,m.Z)(a().mark(function u(t,j){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(d.s3+"app/search",{method:"POST",params:(0,o.Z)({},t),credentials:"include"}));case 1:case"end":return s.stop()}},u)})),T.apply(this,arguments)}function _(u,t){return E.apply(this,arguments)}function E(){return E=(0,m.Z)(a().mark(function u(t,j){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(d.s3+"app/disable",{method:"POST",params:(0,o.Z)({},t),credentials:"include"}));case 1:case"end":return s.stop()}},u)})),E.apply(this,arguments)}},56837:function(x,M,e){"use strict";e.d(M,{E4:function(){return l},lR:function(){return g},Tf:function(){return h},FW:function(){return L},Ov:function(){return C},VF:function(){return I}});var o=e(57361),m=e(9754),i=e.n(m),a=e(18811),d=e(21010);function l(_){return f.apply(this,arguments)}function f(){return f=(0,o.Z)(i().mark(function _(E){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(a.s3+"update/getVersionList",{method:"GET",params:E,credentials:"include"}));case 1:case"end":return t.stop()}},_)})),f.apply(this,arguments)}function g(_){return c.apply(this,arguments)}function c(){return c=(0,o.Z)(i().mark(function _(E){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(a.s3+"update/getStatus",{method:"GET",params:E,credentials:"include"}));case 1:case"end":return t.stop()}},_)})),c.apply(this,arguments)}function h(_){return A.apply(this,arguments)}function A(){return A=(0,o.Z)(i().mark(function _(E){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(a.s3+"update/set",{method:"POST",data:E,credentials:"include"}));case 1:case"end":return t.stop()}},_)})),A.apply(this,arguments)}function L(_){return O.apply(this,arguments)}function O(){return O=(0,o.Z)(i().mark(function _(E){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(a.s3+"update/getOptions",{method:"GET",params:E,credentials:"include"}));case 1:case"end":return t.stop()}},_)})),O.apply(this,arguments)}function C(_){return v.apply(this,arguments)}function v(){return v=(0,o.Z)(i().mark(function _(E){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(a.s3+"update/setOptions",{method:"POST",data:E,credentials:"include"}));case 1:case"end":return t.stop()}},_)})),v.apply(this,arguments)}function I(_){return T.apply(this,arguments)}function T(){return T=(0,o.Z)(i().mark(function _(E){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(a.s3+"update/push",{method:"POST",data:E,credentials:"include"}));case 1:case"end":return t.stop()}},_)})),T.apply(this,arguments)}},28030:function(x,M,e){"use strict";e.d(M,{g:function(){return f}});var o=e(96132),m=e(57361),i=e(9754),a=e.n(i),d=e(18811),l=e(21010);function f(c,h){return g.apply(this,arguments)}function g(){return g=(0,m.Z)(a().mark(function c(h,A){return a().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,l.WY)(d.s3+"version/getList",{method:"GET",params:(0,o.Z)({},h),credentials:"include"}));case 1:case"end":return O.stop()}},c)})),g.apply(this,arguments)}}}]);
