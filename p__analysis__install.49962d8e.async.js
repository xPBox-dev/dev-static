(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[110],{33053:function(Y){Y.exports={tabs:"tabs___2_QYX"}},72058:function(Y,M,e){"use strict";e.r(M),e.d(M,{default:function(){return Ie}});var i=e(33565),_=e(57361),C=e(9754),l=e.n(C),h=e(38315),c=e(96132),W=e(22385),x=e(69713),g=e(37730),I=e(21349),A=e(23723),u=e(67294),o=e(84787),B=e(33053),Z=e.n(B),v=e(21010),r=e(84744),s=e(17744),P=e(7110),m=e(56905),n=e(52778),oe=e(4084),t=e(85893),X=n.Z.Statistic,J=n.Z.Divider,de=function(d){var f=d.loading,a=d.active,E=(0,u.useState)(!1),T=(0,i.Z)(E,2),b=T[0],p=T[1];return(0,t.jsx)(oe.Z,{onResize:function(R){p(R.width<696)},children:(0,t.jsxs)(n.Z.Group,{loading:f,direction:b?"column":"row",style:{marginBottom:24},children:[(0,t.jsx)(n.Z,{statistic:{title:"\u4ECA\u65E5\u5B89\u88C5\u91CF",value:(a==null?void 0:a.current)||0,description:(0,t.jsx)(X,{title:"\u672C\u6708\u5CF0\u503C",value:(a==null?void 0:a.max)||0})}}),(0,t.jsx)(J,{type:b?"horizontal":"vertical"}),(0,t.jsx)(n.Z,{statistic:{title:"\u6628\u65E5\u5B89\u88C5\u91CF",value:a==null?void 0:a.yesterday,description:(0,t.jsx)(X,{title:"\u524D\u65E5\u540C\u6BD4",value:(a==null?void 0:a.yc)==0?"-":(a==null?void 0:a.yc)+"%",trend:(a==null?void 0:a.yc)<0?"down":"up"})},chartPlacement:"left"}),(0,t.jsx)(n.Z,{statistic:{title:"\u672C\u6708\u5B89\u88C5\u91CF",value:a==null?void 0:a.month,description:(0,t.jsx)(X,{title:"\u4E0A\u6708\u540C\u6BD4",value:(a==null?void 0:a.mc)==0?"-":(a==null?void 0:a.mc)+"%",trend:(a==null?void 0:a.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},ne=de,ae=function(d){var f,a,E,T,b,p,L,R=d.showAll,V=d.userId,w=u.useState("current"),G=(0,i.Z)(w,2),S=G[0],N=G[1];u.useEffect(function(){D.run(),S==="current"?y.reset():y.run()},[V]);var D=(0,v.QT)(function(){return R?(0,m.K1)({current:!0,base:!0,userId:V}):(0,m.P)({current:!0,base:!0})},{manual:!0}),y=(0,v.QT)(function(){return R?(0,m.K1)({month:!0,userId:V}):(0,m.P)({month:!0})},{manual:!0}),H=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(Q,U){return(0,t.jsx)(x.Z,{placement:"top",title:U.appId,children:(0,t.jsx)("a",{onClick:function(){return v.m8.push("/app/detail/"+U.id)},children:Q})})}}].concat((0,g.Z)(R?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(Q,U){return(0,t.jsxs)(t.Fragment,{children:[U.nick," (",U.email,")"]})}}]:[]),[{title:"\u5E94\u7528\u5546\u5E97\u5B89\u88C5",dataIndex:"install_store",key:"install_store",hideInSearch:!0},{title:"\u5E94\u7528ID\u5B89\u88C5",dataIndex:"install_app_id",key:"install_app_id",hideInSearch:!0},{title:"\u6587\u4EF6\u5B89\u88C5",dataIndex:"install_file",key:"install_file",hideInSearch:!0},{title:"\u5E94\u7528\u5B89\u88C5",dataIndex:"install_app",key:"install_app",hideInSearch:!0},{title:"\u542F\u52A8\u5668\u5B89\u88C5",dataIndex:"install_loader",key:"install_loader",hideInSearch:!0}]),z={appendPadding:10,height:400,data:S==="current"?((f=D.data)===null||f===void 0?void 0:f.current.rank)||[]:((a=y.data)===null||a===void 0?void 0:a.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:S==="current"?D.loading:y.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},O={appendPadding:10,height:400,data:S==="current"?((E=D.data)===null||E===void 0?void 0:E.current.from)||[]:((T=y.data)===null||T===void 0?void 0:T.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:S==="current"?D.loading:y.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},te=(0,t.jsxs)(o.ZP,{split:"horizontal",children:[(0,t.jsx)(o.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,t.jsx)(s.ZP,{headerTitle:"\u5B89\u88C5\u91CF\u8BE6\u60C5",dataSource:S==="current"?((b=D.data)===null||b===void 0?void 0:b.current.list)||[]:((p=y.data)===null||p===void 0?void 0:p.month.list)||[],loading:S==="current"?D.loading:y.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:H})}),(0,t.jsx)(o.ZP,{title:"TOP10\u5B89\u88C5\u91CF\u5E94\u7528",style:{height:500,position:"relative"},children:(0,t.jsx)(P.Z,(0,c.Z)({},z))}),(0,t.jsx)(o.ZP,{title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{height:500,position:"relative"},children:(0,t.jsx)(P.Z,(0,c.Z)({},O))})]});return(0,t.jsx)(I.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(A.Z,{}),children:(0,t.jsx)(ne,{loading:D.loading,active:(L=D.data)===null||L===void 0?void 0:L.base})}),(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(A.Z,{}),children:(0,t.jsxs)(o.ZP,{className:Z().tabs,tabs:{tabPosition:"top",size:"large",activeKey:S,onChange:function(Q){N(Q),Q==="month"&&!y.data&&!y.loading&&y.run()}},children:[(0,t.jsx)(o.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0}},children:te},"current"),(0,t.jsx)(o.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0}},children:te},"month")]})})]})})},ce=ae,re=e(14965),_e=e(14072),pe=e(58024),ve=e(39144),k=e(64896),q=e(99971),me=e(57663),se=e(71577),he=e(20228),fe=e(11382),le=e(65476),ee=function(d,f){var a=u.useRef(!1);u.useEffect(function(){if(a.current){var E=d();return function(){return E&&E()}}else a.current=!0},f),u.useEffect(function(){return function(){return a.current=!1}},[])};function F(j){for(var d=j.indexOf("/"),f=0;f<2&&d!==-1;f++)d=j.indexOf("/",d+1);return d!==-1?j.substr(0,d):j}var ge=function(d){var f,a,E,T=d.showAll,b=d.userId,p=d.appId,L=d.setAppId,R=u.useState("current"),V=(0,i.Z)(R,2),w=V[0],G=V[1],S=u.useState(p===""?[]:[{value:p,label:(0,t.jsx)(fe.Z,{size:"small"})}]),N=(0,i.Z)(S,2),D=N[0],y=N[1];function H($){return z.apply(this,arguments)}function z(){return z=(0,_.Z)(l().mark(function $(K){return l().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.abrupt("return",(0,r.yC)((0,c.Z)((0,c.Z)({search:K},T?{all:T}:{}),b!==0?{userId:b}:{})));case 1:case"end":return ie.stop()}},$)})),z.apply(this,arguments)}var O=(0,v.QT)(function(){return(0,m.sg)({current:!0,base:!0,appId:p})},{manual:p===""}),te=(0,v.QT)(function(){return(0,m.sg)({month:!0,appId:p})},{manual:!0});ee(function(){O.run()},[p]),(0,u.useEffect)(function(){var $,K;y([{value:($=O.data)===null||$===void 0?void 0:$.id,label:(K=O.data)===null||K===void 0?void 0:K.title}])},[O.data]);var ue=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(le.Z,(0,c.Z)((0,c.Z)({showSearch:!0},p===""?{}:{value:p}),{},{placeholder:"\u9009\u62E9\u5E94\u7528",fetchOptions:H,setMyOption:D,style:{minWidth:"200px",maxWidth:"350px"},onChange:function(K){L(K),window.history.pushState({},0,"#"+F(v.m8.location.pathname)+"/"+K)}}))}),Q={appendPadding:10,height:400,data:w==="current"?((f=O.data)===null||f===void 0?void 0:f.current.from)||[]:((a=te.data)===null||a===void 0?void 0:a.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:w==="current"?O.loading:te.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},U=(0,t.jsx)(o.ZP,{split:"horizontal",children:(0,t.jsx)(o.ZP,{title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{height:500,position:"relative"},children:(0,t.jsx)(P.Z,(0,c.Z)({},Q))})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.Z,{title:ue,subTitle:"\u7684\u7EDF\u8BA1\u4FE1\u606F",extra:p&&(0,t.jsx)(se.Z,{onClick:function(){v.m8.push("/app/detail/"+p)},children:"\u5E94\u7528\u8BE6\u60C5"}),style:{padding:0,marginBottom:20}}),p?(0,t.jsx)(I.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(A.Z,{}),children:(0,t.jsx)(ne,{loading:O.loading,active:(E=O.data)===null||E===void 0?void 0:E.base})}),(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(A.Z,{}),children:(0,t.jsxs)(o.ZP,{className:Z().tabs,tabs:{tabPosition:"top",size:"middle",activeKey:w,onChange:function(K){G(K)}},children:[(0,t.jsx)(o.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0}},children:U},"current"),(0,t.jsx)(o.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0}},children:U},"month"),(0,t.jsx)(o.ZP.TabPane,{tab:(0,t.jsxs)(t.Fragment,{children:["\u81EA\u5B9A\u4E49:",(0,t.jsx)(_e.Z.RangePicker,{bordered:!1})]}),cardProps:{bodyStyle:{padding:0}},children:U},"month1")]})})]})}):(0,t.jsx)(ve.Z,{bodyStyle:{textAlign:"center"},children:"\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5E94\u7528"})]})},Pe=ge,ye=e(6637);function xe(j){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,_.Z)(l().mark(function j(d){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,ye.y)({search:d}));case 1:case"end":return a.stop()}},j)})),Ee.apply(this,arguments)}var Ie=function(j){var d=j.route.name==="all-install",f=u.useState(j.match.params.appId?j.match.params.appId:""),a=(0,i.Z)(f,2),E=a[0],T=a[1],b=u.useRef(E?"detail":"overview"),p=(0,u.useState)(0),L=(0,i.Z)(p,2),R=L[0],V=L[1],w=(0,t.jsx)(ce,{showAll:d,userId:R}),G=(0,t.jsx)(Pe,{showAll:d,userId:R,appId:E,setAppId:T}),S=u.useState(E?G:w),N=(0,i.Z)(S,2),D=N[0],y=N[1];(0,u.useEffect)(function(){H()},[R,E]);var H=function(){b.current==="overview"?y(w):y(G)};return(0,t.jsx)(h.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],tabActiveKey:b.current,content:d&&(0,t.jsxs)(t.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,t.jsx)(le.Z,{showAll:!0,showSearch:!0,placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:xe,defaultValue:0,style:{width:"250px"},onChange:function(O){V(O)}})]}),onTabChange:function(O){b.current=O,H()},children:D})}},65476:function(Y,M,e){"use strict";var i=e(96132),_=e(43358),C=e(90290),l=e(20228),h=e(11382),c=e(37730),W=e(33565),x=e(81211),g=e(67294),I=e(23279),A=e.n(I),u=e(85893),o=function(Z){var v=Z.fetchOptions,r=Z.debounceTimeout,s=r===void 0?500:r,P=Z.showAll,m=Z.setMyFetching,n=Z.setMyOption,oe=(0,x.Z)(Z,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),t=g.useState(!1),X=(0,W.Z)(t,2),J=X[0],de=X[1],ne=g.useState(!1),ae=(0,W.Z)(ne,2),ce=ae[0],re=ae[1],_e=g.useState(P?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),pe=(0,W.Z)(_e,2),ve=pe[0],k=pe[1];g.useEffect(function(){J||k(n)},[n]),g.useEffect(function(){J||k(n)},[m]);var q=g.useRef(0),me=g.useMemo(function(){var se=function(fe){q.current+=1;var le=q.current;k([]),re(!0),v(fe).then(function(ee){le===q.current&&(ee.data.forEach(function(F){F.label=F.text,delete F.text,F.value=F.id,delete F.id}),k(P?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,c.Z)(ee.data)):ee.data),re(!1))})};return A()(se,s)},[v,s]);return(0,u.jsx)(C.Z,(0,i.Z)((0,i.Z)({filterOption:!1,onSearch:me},oe),{},{options:ce?[{value:0,label:(0,u.jsx)(h.Z,{size:"small"})}]:ve,onDropdownVisibleChange:function(he){he&&!J&&(de(!0),re(!0),me())}}))};M.Z=o},23723:function(Y,M,e){"use strict";var i=e(20228),_=e(11382),C=e(85893);M.Z=function(){return(0,C.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,C.jsx)(_.Z,{size:"large"})})}},84744:function(Y,M,e){"use strict";e.d(M,{pb:function(){return W},aF:function(){return g},Nm:function(){return A},rZ:function(){return o},yC:function(){return Z}});var i=e(96132),_=e(57361),C=e(9754),l=e.n(C),h=e(18811),c=e(21010);function W(r,s){return x.apply(this,arguments)}function x(){return x=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"app/getList",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),x.apply(this,arguments)}function g(r,s){return I.apply(this,arguments)}function I(){return I=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"app/getAll",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),I.apply(this,arguments)}function A(r,s){return u.apply(this,arguments)}function u(){return u=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"app/getDetail",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),u.apply(this,arguments)}function o(r,s){return B.apply(this,arguments)}function B(){return B=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"app/getStatistic",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),B.apply(this,arguments)}function Z(r,s){return v.apply(this,arguments)}function v(){return v=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"app/search",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),v.apply(this,arguments)}},56905:function(Y,M,e){"use strict";e.d(M,{s8:function(){return W},Pf:function(){return g},P:function(){return A},K1:function(){return o},sg:function(){return Z}});var i=e(96132),_=e(57361),C=e(9754),l=e.n(C),h=e(18811),c=e(21010);function W(r,s){return x.apply(this,arguments)}function x(){return x=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"analysis/getInstance",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),x.apply(this,arguments)}function g(r,s){return I.apply(this,arguments)}function I(){return I=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"analysis/getAllInstance",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),I.apply(this,arguments)}function A(r,s){return u.apply(this,arguments)}function u(){return u=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"analysis/getInstall",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),u.apply(this,arguments)}function o(r,s){return B.apply(this,arguments)}function B(){return B=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"analysis/getAllInstall",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),B.apply(this,arguments)}function Z(r,s){return v.apply(this,arguments)}function v(){return v=(0,_.Z)(l().mark(function r(s,P){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.WY)(h.s3+"analysis/getAppInstall",{method:"POST",params:(0,i.Z)({},s),credentials:"include"}));case 1:case"end":return n.stop()}},r)})),v.apply(this,arguments)}},6637:function(Y,M,e){"use strict";e.d(M,{y:function(){return W}});var i=e(96132),_=e(57361),C=e(9754),l=e.n(C),h=e(18811),c=e(21010);function W(g,I){return x.apply(this,arguments)}function x(){return x=(0,_.Z)(l().mark(function g(I,A){return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,c.WY)(h.s3+"user/search",{method:"POST",params:(0,i.Z)({},I),credentials:"include"}));case 1:case"end":return o.stop()}},g)})),x.apply(this,arguments)}}}]);
