(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[500],{53266:function(R){R.exports={tabs:"tabs___YEat-"}},19151:function(R,g,e){"use strict";e.r(g),e.d(g,{default:function(){return X}});var o=e(43358),i=e(90290),_=e(33565),l=e(57361),c=e(9754),d=e.n(c),j=e(49675),v=e(96132),f=e(22385),m=e(69713),b=e(37730),E=e(21349),P=e(23723),u=e(67294),a=e(84787),s=e(53266),O=e.n(s),h=e(21010),t=e(84744),q=e(17744),z=e(7110),W=e(56905),C=e(52778),ee=e(4084),n=e(85893),U=C.Z.Statistic,G=C.Z.Divider,te=function(x){var I=x.loading,r=x.active,Z=(0,u.useState)(!1),y=(0,_.Z)(Z,2),S=y[0],A=y[1];return(0,n.jsx)(ee.Z,{onResize:function(L){A(L.width<696)},children:(0,n.jsxs)(C.Z.Group,{loading:I,direction:S?"column":"row",style:{marginBottom:24},children:[(0,n.jsx)(C.Z,{statistic:{title:"\u5F53\u524D\u5B9E\u4F8B\u6570",value:(r==null?void 0:r.current)||0,description:(0,n.jsx)(U,{title:"\u6628\u65E5\u5CF0\u503C",value:(r==null?void 0:r.max)||0})}}),(0,n.jsx)(G,{type:S?"horizontal":"vertical"}),(0,n.jsx)(C.Z,{statistic:{title:"24\u5C0F\u65F6\u6D3B\u8DC3\u5EA6",value:r==null?void 0:r.h24,description:(0,n.jsx)(U,{title:"\u6628\u65E5\u540C\u6BD4",value:(r==null?void 0:r.hc)==0?"-":(r==null?void 0:r.hc)+"%",trend:(r==null?void 0:r.hc)<0?"down":"up"})},chartPlacement:"left"}),(0,n.jsx)(C.Z,{statistic:{title:"\u672C\u6708\u6D3B\u8DC3\u5EA6",value:r==null?void 0:r.month,description:(0,n.jsx)(U,{title:"\u4E0A\u6708\u540C\u6BD4",value:(r==null?void 0:r.mc)==0?"-":(r==null?void 0:r.mc)+"%",trend:(r==null?void 0:r.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},N=te,ne=function(x){var I,r,Z,y,S,A=x.showAll,B=x.userId,L=u.useState("hour"),k=(0,_.Z)(L,2),T=k[0],ae=k[1];u.useEffect(function(){M.run(),T==="hour"?D.reset():D.run()},[B]);var M=(0,h.QT)(function(){return A?(0,W.Pf)({hour:!0,base:!0,userId:B}):(0,W.s8)({hour:!0,base:!0})},{manual:!0}),D=(0,h.QT)(function(){return A?(0,W.Pf)({month:!0,userId:B}):(0,W.s8)({month:!0})},{manual:!0}),V=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(F,Y){return(0,n.jsx)(m.Z,{placement:"top",title:Y.appId,children:(0,n.jsx)("a",{onClick:function(){return h.m8.push("/app/detail/"+Y.id)},children:F})})}}].concat((0,b.Z)(A?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(F,Y){return(0,n.jsxs)(n.Fragment,{children:[Y.nick," (",Y.email,")"]})}}]:[]),[{title:"\u6D3B\u8DC3\u5EA6",dataIndex:"active",key:"active",hideInSearch:!0},{title:"\u5E73\u5747\u6D3B\u8DC3\u8BBE\u5907",dataIndex:"device",key:"device",hideInSearch:!0},{title:"\u542F\u52A8\u6B21\u6570",dataIndex:"count",key:"count",hideInSearch:!0}]),ue={appendPadding:10,height:400,data:T==="hour"?((I=M.data)===null||I===void 0?void 0:I.hour.rank)||[]:((r=D.data)===null||r===void 0?void 0:r.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:T==="hour"?M.loading:D.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},se=(0,n.jsxs)(a.ZP,{split:"horizontal",children:[(0,n.jsx)(a.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,n.jsx)(q.ZP,{headerTitle:"\u6D3B\u8DC3\u5E94\u7528\u5217\u8868",dataSource:T==="hour"?((Z=M.data)===null||Z===void 0?void 0:Z.hour.list)||[]:((y=D.data)===null||y===void 0?void 0:y.month.list)||[],loading:T==="hour"?M.loading:D.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:V})}),(0,n.jsx)(a.ZP,{title:"TOP10\u6D3B\u8DC3\u5E94\u7528",style:{height:500,position:"relative"},children:(0,n.jsx)(z.Z,(0,v.Z)({},ue))})]});return(0,n.jsx)(E.Z,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Suspense,{fallback:(0,n.jsx)(P.Z,{}),children:(0,n.jsx)(N,{loading:M.loading,active:(S=M.data)===null||S===void 0?void 0:S.base})}),(0,n.jsx)(u.Suspense,{fallback:(0,n.jsx)(P.Z,{}),children:(0,n.jsxs)(a.ZP,{className:O().tabs,tabs:{tabPosition:"top",size:"large",activeKey:T,onChange:function(F){ae(F),F==="month"&&!D.data&&!D.loading&&D.run()}},children:[(0,n.jsx)(a.ZP.TabPane,{tab:"24\u5C0F\u65F6\u62A5",cardProps:{bodyStyle:{padding:0}},children:se},"hour"),(0,n.jsx)(a.ZP.TabPane,{tab:"\u6708\u62A5",cardProps:{bodyStyle:{padding:0}},children:se},"month")]})})]})})},w=ne,K=function(){return(0,n.jsx)(n.Fragment,{})},Q=K,H=e(65476),J=e(6637);function re(p){return $.apply(this,arguments)}function $(){return $=(0,l.Z)(d().mark(function p(x){return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,J.y)({search:x}));case 1:case"end":return r.stop()}},p)})),$.apply(this,arguments)}var X=function(p){var x=p.route.name==="all-instance",I="overview",r=(0,u.useState)(0),Z=(0,_.Z)(r,2),y=Z[0],S=Z[1],A=(0,n.jsx)(w,{showAll:x,userId:y}),B=u.useState(A),L=(0,_.Z)(B,2),k=L[0],T=L[1],ae=(0,n.jsx)(Q,{});(0,u.useEffect)(function(){M()},[y]);var M=function(){T(I==="overview"?A:ae)};return(0,n.jsx)(j.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],content:x&&(0,n.jsxs)(n.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,n.jsx)(H.Z,{showSearch:!0,placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:re,defaultValue:0,style:{width:"250px"},onChange:function(V){S(V)}})]}),tabBarExtraContent:(0,n.jsx)(i.Z,{}),onTabChange:function(V){I=V,M()},children:k})}},65476:function(R,g,e){"use strict";var o=e(96132),i=e(43358),_=e(90290),l=e(20228),c=e(11382),d=e(37730),j=e(33565),v=e(81211),f=e(67294),m=e(23279),b=e.n(m),E=e(85893),P=function(a){var s=a.fetchOptions,O=a.debounceTimeout,h=O===void 0?500:O,t=(0,v.Z)(a,["fetchOptions","debounceTimeout"]),q=f.useState(!1),z=(0,j.Z)(q,2),W=z[0],C=z[1],ee=f.useState(!1),n=(0,j.Z)(ee,2),U=n[0],G=n[1],te=f.useState([{value:0,label:"\u663E\u793A\u603B\u8BA1"}]),N=(0,j.Z)(te,2),ne=N[0],w=N[1],K=f.useRef(0),Q=f.useMemo(function(){var H=function(re){K.current+=1;var $=K.current;w([]),G(!0),s(re).then(function(X){$===K.current&&(X.data.forEach(function(p){p.label=p.text,delete p.text,p.value=p.id,delete p.id}),w([{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,d.Z)(X.data))),G(!1))})};return b()(H,h)},[s,h]);return(0,E.jsx)(_.Z,(0,o.Z)((0,o.Z)({filterOption:!1,onSearch:Q},t),{},{options:U?[{value:0,label:(0,E.jsx)(c.Z,{size:"small"})}]:ne,onDropdownVisibleChange:function(J){J&&!W&&(console.log(W),C(!0),Q())}}))};g.Z=P},23723:function(R,g,e){"use strict";var o=e(20228),i=e(11382),_=e(85893);g.Z=function(){return(0,_.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,_.jsx)(i.Z,{size:"large"})})}},84744:function(R,g,e){"use strict";e.d(g,{pb:function(){return j},aF:function(){return f},Nm:function(){return b},rZ:function(){return P}});var o=e(96132),i=e(57361),_=e(9754),l=e.n(_),c=e(18811),d=e(21010);function j(a,s){return v.apply(this,arguments)}function v(){return v=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"app/getList",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),v.apply(this,arguments)}function f(a,s){return m.apply(this,arguments)}function m(){return m=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"app/getAll",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function b(a,s){return E.apply(this,arguments)}function E(){return E=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"app/getDetail",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function P(a,s){return u.apply(this,arguments)}function u(){return u=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"app/getStatistic",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),u.apply(this,arguments)}},56905:function(R,g,e){"use strict";e.d(g,{s8:function(){return j},Pf:function(){return f},P:function(){return b},K1:function(){return P}});var o=e(96132),i=e(57361),_=e(9754),l=e.n(_),c=e(18811),d=e(21010);function j(a,s){return v.apply(this,arguments)}function v(){return v=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"analysis/getInstance",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),v.apply(this,arguments)}function f(a,s){return m.apply(this,arguments)}function m(){return m=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"analysis/getAllInstance",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function b(a,s){return E.apply(this,arguments)}function E(){return E=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"analysis/getInstall",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function P(a,s){return u.apply(this,arguments)}function u(){return u=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"analysis/getAllInstall",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),u.apply(this,arguments)}},6637:function(R,g,e){"use strict";e.d(g,{y:function(){return j}});var o=e(96132),i=e(57361),_=e(9754),l=e.n(_),c=e(18811),d=e(21010);function j(f,m){return v.apply(this,arguments)}function v(){return v=(0,i.Z)(l().mark(function f(m,b){return l().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,d.WY)(c.s3+"user/search",{method:"POST",params:(0,o.Z)({},m),credentials:"include"}));case 1:case"end":return P.stop()}},f)})),v.apply(this,arguments)}}}]);
