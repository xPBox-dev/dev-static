(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[955],{72285:function(b){b.exports={channelCard:"channelCard___1COW8",cardSelect:"cardSelect___1Xbdu"}},73586:function(b,T,e){"use strict";var i=e(58024),p=e(39144),c=e(22385),a=e(69713),d=e(43358),l=e(90290),h=e(59250),C=e(13013),E=e(30887),O=e(99210),W=e(63185),R=e(9676),v=e(71153),L=e(60331),D=e(34792),Z=e(48086),j=e(20228),o=e(11382),m=e(74379),P=e(38648),r=e(33565),G=e(72285),y=e.n(G),U=e(67294),I=e(21010),K=e(56837),x=e(57845),s=e(62298),u=e(44545),t=e(85893),M=function(S){var B,$,V,N,Y,w=S.appId,z=S.channel,Q=S.title,A=S.defaultData,te=S.loading,ne=U.useState(void 0),k=(0,r.Z)(ne,2),_=k[0],H=k[1],re=U.useState(void 0),q=(0,r.Z)(re,2),ue=q[0],ee=q[1];(0,x.e)(function(){H(A),ee(A==null?void 0:A.config)},[A]),(0,x.e)(function(){F.run()},[w]);var se=(0,I.QT)(function(){return(0,K.VF)({appId:w,channel:z})},{manual:!0,onSuccess:function(g){H(g),P.default.success({message:"\u63A8\u9001\u7248\u672C\u6210\u529F",description:"\u63A8\u9001\u7248\u672C\u6210\u529F\u3002",key:"push"})},onError:function(g){P.default.error({message:"\u63A8\u9001\u7248\u672C\u5931\u8D25",description:"\u63A8\u9001\u7248\u672C\u5931\u8D25\u4E86\u3002",key:"push"})}}),ae=function(){P.default.open({message:"\u6B63\u5728\u5C1D\u8BD5\u63A8\u9001",description:"\u63A8\u9001\u9700\u8981\u4E00\u5B9A\u65F6\u95F4\uFF0C\u8BF7\u7A0D\u7B49\u3002",icon:(0,t.jsx)(o.Z,{}),key:"push"}),se.run()},X=(0,I.QT)(function(f){return(0,K.Tf)({appId:w,channel:z,options:f})},{manual:!0,onSuccess:function(g){H(g),Z.default.info("\u4FEE\u6539\u63A8\u9001\u8BBE\u7F6E\u6210\u529F"),g.config!==-1&&ae()}}),F=(0,I.QT)(function(f){return(0,K.E4)({search:f,appId:w,channel:z})},{debounceInterval:500}),_e=function(g){ee(g),X.run({config:g})},le=(_==null?void 0:_.status)>=0&&(_==null?void 0:_.status)<=3?[(0,t.jsx)(L.Z,{color:"orange",children:"\u672A\u63A8\u9001"},0),(0,t.jsx)(L.Z,{color:"green",children:"\u63A8\u9001\u6B63\u5E38"},1),(0,t.jsx)(L.Z,{color:"blue",children:"\u7B49\u5F85\u63A8\u9001"},2),(0,t.jsx)(L.Z,{color:"red",children:"\u63A8\u9001\u5931\u8D25"},3),(0,t.jsx)(L.Z,{color:"red",children:"\u5F3A\u5236\u64A4\u56DE"},4)][_.status]:(0,t.jsx)(L.Z,{color:"red",children:"\u672A\u77E5\u9519\u8BEF"},0),ie=(0,t.jsxs)(O.Z,{multiple:!0,children:[(0,t.jsxs)(O.Z.ItemGroup,{title:"\u9009\u9879",children:[(0,t.jsx)(O.Z.Item,{disabled:!0,children:(0,t.jsx)(R.Z,{disabled:!0,style:{width:"100%"},children:"\u542F\u7528\u5F3A\u5236\u64A4\u56DE\u6A21\u5F0F"})},"1"),(0,t.jsx)(O.Z.Item,{disabled:!0,children:(0,t.jsx)(R.Z,{disabled:!0,style:{width:"100%"},children:"\u542F\u7528\u5F3A\u5236\u6A21\u5F0F"})},"2")]}),(0,t.jsx)(O.Z.Divider,{}),(0,t.jsx)(O.Z.Item,{disabled:!0,icon:(0,t.jsx)(s.Z,{}),children:"\u63A8\u9001"},"3")]});return(0,t.jsx)(o.Z,{spinning:te||X.loading,bodyStyle:{padding:0},bordered:!1,children:(0,t.jsxs)(p.Z,{title:(0,t.jsx)(t.Fragment,{children:Q}),extra:_&&le,bordered:!1,className:y().channelCard,actions:[(0,t.jsx)(C.Z,{arrow:!0,placement:"topCenter",overlay:ie,children:(0,t.jsx)(u.Z,{})},"ellipsis")],children:[(0,t.jsx)("p",{children:"\u63A8\u9001\u9009\u9879"}),(0,t.jsx)(a.Z,{title:_!=null&&_.push?_.pushName+" ("+_.push+")":"\u6682\u65E0\u63A8\u9001\u7248\u672C",children:(0,t.jsx)(l.Z,{value:ue,loading:X.loading,bordered:!1,size:"large",optionLabelProp:"title",className:y().cardSelect,dropdownMatchSelectWidth:!1,onChange:_e,showSearch:!0,filterOption:function(g,oe){var J;return((J=oe.title)===null||J===void 0?void 0:J.toLowerCase().indexOf(g.toLowerCase()))>=0},onSearch:function(g){g&&F.run(g)},children:F.loading?(0,t.jsx)(l.Z.Option,{value:-2,disabled:!0,children:(0,t.jsx)(o.Z,{size:"small"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z.OptGroup,{label:"\u81EA\u52A8\u63A8\u9001",children:(0,t.jsxs)(l.Z.Option,{value:0,title:"\u6700\u65B0\u7248\u672C",children:["\u6700\u65B0\u7248\u672C",(0,t.jsx)("br",{}),(0,t.jsx)("span",{style:{color:"#AAAAAA"},children:(B=F.data)!==null&&B!==void 0&&B.last?(($=F.data)===null||$===void 0?void 0:$.last.versionName)+" ("+((V=F.data)===null||V===void 0?void 0:V.last.build)+")":"\u6682\u65E0\u7248\u672C"})]})}),(0,t.jsxs)(l.Z.OptGroup,{label:"\u624B\u52A8\u9009\u62E9",children:[(0,t.jsx)(l.Z.Option,{value:-1,title:"\u4E0D\u63A8\u9001",children:"\u4E0D\u63A8\u9001"}),(_==null?void 0:_.config)>0&&(0,t.jsx)(l.Z.Option,{value:_.config,title:_.configName+" ("+_.config+")",children:_.configName+" ("+_.config+")"},_.config),(N=F.data)===null||N===void 0||(Y=N.list)===null||Y===void 0?void 0:Y.map(function(f){if(f.build!==(_==null?void 0:_.config))return(0,t.jsx)(l.Z.Option,{value:f.build,title:f.versionName+" ("+f.build+")",children:f.versionName+" ("+f.build+")"},f.build)})]})]})})}),(0,t.jsx)("p",{style:{marginTop:20},children:"\u5F53\u524D\u63A8\u9001\u7684\u7248\u672C"}),(0,t.jsx)("p",{children:_!=null&&_.push?_.pushName+" ("+_.push+")":"\u65E0"})]})})};T.Z=M},57845:function(b,T,e){"use strict";e.d(T,{e:function(){return p}});var i=e(67294),p=function(a,d){var l=i.useRef(!1);i.useEffect(function(){if(l.current){var h=a();return function(){return h&&h()}}else l.current=!0},d),i.useEffect(function(){return function(){return l.current=!1}},[])}},65476:function(b,T,e){"use strict";var i=e(96132),p=e(43358),c=e(90290),a=e(20228),d=e(11382),l=e(37730),h=e(33565),C=e(81211),E=e(67294),O=e(23279),W=e.n(O),R=e(85893),v=function(D){var Z=D.fetchOptions,j=D.debounceTimeout,o=j===void 0?500:j,m=D.showAll,P=D.setMyFetching,r=D.setMyOption,G=(0,C.Z)(D,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),y=E.useState(!1),U=(0,h.Z)(y,2),I=U[0],K=U[1],x=E.useState(!1),s=(0,h.Z)(x,2),u=s[0],t=s[1],M=E.useState(m?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),n=(0,h.Z)(M,2),S=n[0],B=n[1];E.useEffect(function(){I||B(r)},[r]),E.useEffect(function(){I||B(r)},[P]);var $=E.useRef(0),V=E.useMemo(function(){var N=function(w){$.current+=1;var z=$.current;B([]),t(!0),Z(w).then(function(Q){z===$.current&&(Q.data.forEach(function(A){A.label=A.text,delete A.text,A.value=A.id,delete A.id}),B(m?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,l.Z)(Q.data)):Q.data),t(!1))})};return W()(N,o)},[Z,o]);return(0,R.jsx)(c.Z,(0,i.Z)((0,i.Z)({filterOption:!1,onSearch:V},G),{},{options:u?[{value:"",label:(0,R.jsx)(d.Z,{size:"small"}),disabled:!0}]:S,onDropdownVisibleChange:function(Y){Y&&!I&&(K(!0),t(!0),V())}}))};T.Z=v},84744:function(b,T,e){"use strict";e.d(T,{w$:function(){return h},pb:function(){return C},aF:function(){return O},Nm:function(){return R},rZ:function(){return L},yC:function(){return Z},h$:function(){return o},wW:function(){return P},eP:function(){return G},IH:function(){return U},IV:function(){return K}});var i=e(96132),p=e(57361),c=e(9754),a=e.n(c),d=e(18811),l=e(21010),h={UNKNOWN:0,NORMAL:1,PENDING:2,FAILED:3,DISABLED:4,DELETED:5,BANNED:6,CHANGED:7,getText:function(u){return["\u672A\u77E5","\u6B63\u5E38","\u5BA1\u6838\u4E2D","\u5BA1\u6838\u672A\u901A\u8FC7","\u5DF2\u4E0B\u67B6","\u7B49\u5F85\u5220\u9664","\u8FDD\u89C4\u5C01\u7981","\u6B63\u5E38-\u5F85\u5BA1\u6838"][u]},getColor:function(u){return["#a8071a","#237804","#0050b3","#a8071a","#faad14","#a8071a","#a8071a","#0050b3"][u]}};function C(s,u){return E.apply(this,arguments)}function E(){return E=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/getList",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),E.apply(this,arguments)}function O(s,u){return W.apply(this,arguments)}function W(){return W=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/getAll",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),W.apply(this,arguments)}function R(s,u){return v.apply(this,arguments)}function v(){return v=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/getDetail",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),v.apply(this,arguments)}function L(s,u){return D.apply(this,arguments)}function D(){return D=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/getStatistic",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),D.apply(this,arguments)}function Z(s,u){return j.apply(this,arguments)}function j(){return j=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/search",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),j.apply(this,arguments)}function o(s,u){return m.apply(this,arguments)}function m(){return m=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/disable",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),m.apply(this,arguments)}function P(s,u){return r.apply(this,arguments)}function r(){return r=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/edit",{method:"GET",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),r.apply(this,arguments)}function G(s,u){return y.apply(this,arguments)}function y(){return y=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/edit",{method:"POST",data:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),y.apply(this,arguments)}function U(s,u){return I.apply(this,arguments)}function I(){return I=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/add",{method:"POST",data:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),I.apply(this,arguments)}function K(s,u){return x.apply(this,arguments)}function x(){return x=(0,p.Z)(a().mark(function s(u,t){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)(d.s3+"app/delete",{method:"POST",data:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return n.stop()}},s)})),x.apply(this,arguments)}},56837:function(b,T,e){"use strict";e.d(T,{E4:function(){return l},lR:function(){return C},Tf:function(){return O},FW:function(){return R},Ov:function(){return L},VF:function(){return Z}});var i=e(57361),p=e(9754),c=e.n(p),a=e(18811),d=e(21010);function l(o){return h.apply(this,arguments)}function h(){return h=(0,i.Z)(c().mark(function o(m){return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.WY)(a.s3+"update/getVersionList",{method:"GET",params:m,credentials:"include"}));case 1:case"end":return r.stop()}},o)})),h.apply(this,arguments)}function C(o){return E.apply(this,arguments)}function E(){return E=(0,i.Z)(c().mark(function o(m){return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.WY)(a.s3+"update/getStatus",{method:"GET",params:m,credentials:"include"}));case 1:case"end":return r.stop()}},o)})),E.apply(this,arguments)}function O(o){return W.apply(this,arguments)}function W(){return W=(0,i.Z)(c().mark(function o(m){return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.WY)(a.s3+"update/set",{method:"POST",data:m,credentials:"include"}));case 1:case"end":return r.stop()}},o)})),W.apply(this,arguments)}function R(o){return v.apply(this,arguments)}function v(){return v=(0,i.Z)(c().mark(function o(m){return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.WY)(a.s3+"update/getOptions",{method:"GET",params:m,credentials:"include"}));case 1:case"end":return r.stop()}},o)})),v.apply(this,arguments)}function L(o){return D.apply(this,arguments)}function D(){return D=(0,i.Z)(c().mark(function o(m){return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.WY)(a.s3+"update/setOptions",{method:"POST",data:m,credentials:"include"}));case 1:case"end":return r.stop()}},o)})),D.apply(this,arguments)}function Z(o){return j.apply(this,arguments)}function j(){return j=(0,i.Z)(c().mark(function o(m){return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.WY)(a.s3+"update/push",{method:"POST",data:m,credentials:"include"}));case 1:case"end":return r.stop()}},o)})),j.apply(this,arguments)}},28030:function(b,T,e){"use strict";e.d(T,{g:function(){return h}});var i=e(96132),p=e(57361),c=e(9754),a=e.n(c),d=e(18811),l=e(21010);function h(E,O){return C.apply(this,arguments)}function C(){return C=(0,p.Z)(a().mark(function E(O,W){return a().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,l.WY)(d.s3+"version/getList",{method:"GET",params:(0,i.Z)({},O),credentials:"include"}));case 1:case"end":return v.stop()}},E)})),C.apply(this,arguments)}}}]);
