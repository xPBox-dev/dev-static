(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[706],{62298:function(E,I,a){"use strict";a.d(I,{Z:function(){return ee}});var L=a(28991),T=a(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},z=q,_=a(27029),C=function(ae,V){return T.createElement(_.Z,(0,L.Z)((0,L.Z)({},ae),{},{ref:V,icon:z}))};C.displayName="CloudUploadOutlined";var ee=T.forwardRef(C)},46360:function(E){E.exports={header:"header___1YsBZ"}},53266:function(E){E.exports={tabs:"tabs___YEat-"}},6692:function(E,I,a){"use strict";a.r(I),a.d(I,{default:function(){return qe}});var L=a(3515),T=a(86288),q=a(13062),z=a(71230),_=a(89032),C=a(15746),ee=a(58024),te=a(39144),ae=a(64896),V=a(37744),ut=a(57663),W=a(71577),O=a(96132),fe=a(57361),st=a(20228),me=a(11382),N=a(33565),ge=a(9754),ne=a.n(ge),xe=a(65476),f=a(67294),je=a(84744),ye=a(21349),b=a(21010),Z=a(84787),Ce=a(53266),be=a.n(Ce),Ze=a(46360),Se=a.n(Ze),Fe=a(57845),G=a(73586),ot=a(63185),D=a(9676),it=a(43358),x=a(90290),dt=a(22385),Q=a(69713),H=a(1870),P=a(56837),e=a(85893),Pe=function(r){var t=r.data,l=r.loading,s=r.appId,o=r.disabled,d=f.useRef({}),m=f.useState(!1),i=(0,N.Z)(m,2),p=i[0],c=i[1],u=(0,b.QT)(function(){return(0,P.Ov)({appId:s,options:d.current})}),y=function(v){var B=Object.keys(v)[0],A=v[Object.keys(v)[0]];t[B]===A?delete d.current[B]:d.current[B]=A,c(Object.keys(d.current).length>0)},M=function(){u.run(),c(!1),Object.keys(d.current).forEach(function(v){t[v]=d.current[v]}),d.current={}};return(0,e.jsxs)(Z.ZP,{title:"\u66F4\u65B0\u9009\u9879",loading:l,extra:(0,e.jsx)(W.Z,{type:"primary",size:"small",loading:u.loading,disabled:!p||o,onClick:M,children:"\u4FDD\u5B58"}),children:[(0,e.jsxs)("div",{style:{marginBottom:8},children:[(0,e.jsxs)("span",{style:{marginRight:8},children:["\u901A\u8FC7\u5E94\u7528ID\u3001\u5E94\u7528\u5546\u5E97\u3001\u542F\u52A8\u5668\u7B49\u65B9\u5F0F\u5B89\u88C5\u7684\u9ED8\u8BA4\u901A\u9053",(0,e.jsx)(Q.Z,{title:"Prompt Text",children:(0,e.jsx)(H.Z,{style:{marginLeft:3}})})]}),(0,e.jsxs)(x.Z,{size:"small",defaultValue:t==null?void 0:t.defaultChannel,dropdownMatchSelectWidth:!1,onChange:function(v){return y({defaultChannel:v})},disabled:u.loading||o,children:[(0,e.jsx)(x.Z.Option,{value:-2,children:"\u6700\u65B0\u7684\u8F83\u7A33\u5B9A\u7248\u672C"}),(0,e.jsx)(x.Z.Option,{value:-1,children:"\u6700\u65B0Build"}),(0,e.jsx)(x.Z.Option,{value:0,children:"Stable"}),(0,e.jsx)(x.Z.Option,{value:1,children:"Beta"}),(0,e.jsx)(x.Z.Option,{value:2,children:"Alpha"})]})]}),(0,e.jsx)("div",{style:{marginBottom:8},children:(0,e.jsxs)(D.Z,{defaultChecked:t==null?void 0:t.updateToStableVersion,disabled:u.loading||o,onChange:function(v){return y({updateToStableVersion:v.target.checked})},children:["\u81EA\u52A8\u66F4\u65B0\u5230\u8F83\u7A33\u5B9A\u7684\u7248\u672C",(0,e.jsx)(Q.Z,{title:"Prompt Text",children:(0,e.jsx)(H.Z,{style:{marginLeft:3}})})]})}),(0,e.jsx)("div",{style:{marginBottom:8},children:(0,e.jsx)(D.Z,{defaultChecked:t==null?void 0:t.rollback,disabled:u.loading||o,onChange:function(v){return y({rollback:v.target.checked})},children:"\u5F53\u63A8\u9001\u7248\u672C\u4F4E\u4E8E\u5DF2\u5B89\u88C5\u7248\u672C\u65F6\u9000\u56DE"})}),(0,e.jsxs)("div",{style:{marginBottom:8},children:["\u9700\u5F00\u53D1\u8BB8\u53EF\u624D\u53EF\u8BBF\u95EE\u7684\u901A\u9053\uFF1A",(0,e.jsx)(D.Z,{defaultChecked:t==null?void 0:t.betaAccess,disabled:u.loading||o,onChange:function(v){return y({betaAccess:v.target.checked})},children:"Beta"}),(0,e.jsx)(D.Z,{defaultChecked:t==null?void 0:t.alphaAccess,disabled:u.loading||o,onChange:function(v){return y({alphaAccess:v.target.checked})},children:"Alpha"})]})]})},Ee=Pe,ct=a(47673),Oe=a(4107),vt=a(77576),le=a(12028),Be=function(){return(0,e.jsxs)(Z.ZP,{title:"\u7070\u5EA6\u66F4\u65B0",extra:(0,e.jsx)(le.Z,{disabled:!0}),collapsed:!0,children:[(0,e.jsxs)("div",{style:{marginBottom:8},children:[(0,e.jsxs)("span",{style:{marginRight:8},children:["\u7070\u5EA6\u66F4\u65B0\u6A21\u5F0F:"," ",(0,e.jsx)(Q.Z,{title:"Prompt Text",children:(0,e.jsx)(H.Z,{style:{marginLeft:3}})})]}),(0,e.jsxs)(x.Z,{size:"small",defaultValue:0,children:[(0,e.jsx)(x.Z.Option,{value:0,children:"\u7EBF\u6027\u6A21\u5F0F"}),(0,e.jsx)(x.Z.Option,{value:1,children:"\u4E8C\u6B21\u51FD\u6570"}),(0,e.jsx)(x.Z.Option,{value:2,children:"\u4E09\u6B21\u51FD\u6570"}),(0,e.jsx)(x.Z.Option,{value:3,children:"\u6807\u51C6\u8D1D\u585E\u5C14\u66F2\u7EBF"})]})]}),(0,e.jsxs)("div",{style:{marginBottom:8},children:[(0,e.jsx)(Oe.Z,{type:"number",style:{width:80,marginRight:8}}),"\u5929\u540E\u5B8C\u6210\u63A8\u9001"]})]})},Ae=Be,Ie=a(93660),Te=a(28030),De=function(r){var t=r.children,l=r.disabled;return(0,e.jsx)("div",{style:(0,O.Z)((0,O.Z)({},l?{opacity:"0.6",pointerEvents:"none",userSelect:"none"}:{}),{},{transition:"opacity 0.3s"}),children:t})},Re=De,ht=a(34792),Ue=a(48086),Me=function(r){var t=r.appId,l=r.enabled,s=r.loading,o=r.onChanged,d=(0,b.QT)(P.wp,{manual:!0,onError:function(){Ue.default.error("\u64CD\u4F5C\u5931\u8D25\uFF01")}});return(0,e.jsx)(Z.ZP,{title:"\u542F\u7528\u66F4\u65B0\u7BA1\u7406\u5668",style:{marginBottom:24},extra:(0,e.jsx)(le.Z,{loading:s||d.loading,checked:l,onChange:function(i){return d.run({appId:t,enable:i}).then(function(){return o&&o(i)})}}),collapsed:!0})},$e=Me,Le=a(13718),pt=a(88983),K=a(47933),ft=a(74379),re=a(38648),ue=a(49085),se=a(22270),oe=a(66758),ze=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],Ve=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"];function R(){return R=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(n[l]=t[l])}return n},R.apply(this,arguments)}function ie(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);r&&(l=l.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,l)}return t}function Y(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ie(Object(t),!0).forEach(function(l){We(n,l,t[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(t,l))})}return n}function We(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function de(n,r){if(n==null)return{};var t=Ne(n,r),l,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)l=o[s],!(r.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,l)||(t[l]=n[l]))}return t}function Ne(n,r){if(n==null)return{};var t={},l=Object.keys(n),s,o;for(o=0;o<l.length;o++)s=l[o],!(r.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Ge=f.forwardRef(function(n,r){var t=n.fieldProps,l=n.children,s=n.params,o=n.proFieldProps,d=n.mode,m=n.valueEnum,i=n.request,p=n.showSearch,c=n.options,u=de(n,ze),y=(0,f.useContext)(oe.Z);return f.createElement(ue.Z,R({mode:"edit",valueEnum:(0,se.h)(m),request:i,params:s,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Y({options:c,mode:d,showSearch:p,getPopupContainer:y.getPopupContainer},t),ref:r,proFieldProps:o},u),l)}),Qe=f.forwardRef(function(n,r){var t=n.fieldProps,l=n.children,s=n.params,o=n.proFieldProps,d=n.mode,m=n.valueEnum,i=n.request,p=n.options,c=de(n,Ve),u=Y({options:p,mode:d||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label",filterOption:!1},t),y=(0,f.useContext)(oe.Z);return f.createElement(ue.Z,R({mode:"edit",valueEnum:(0,se.h)(m),request:i,params:s,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Y({getPopupContainer:y.getPopupContainer},u),ref:r,proFieldProps:o},c),l)}),He=Ge,Ke=Qe,J=He;J.SearchSelect=Ke,J.displayName="ProFormComponent";var ce=J,U=a(15196),Ye=function(r){var t,l,s=r.appId,o=(0,b.QT)(P.m7),d=(0,b.QT)(function(i){return(0,P.E4)({search:i,appId:s,all:!0})},{debounceInterval:500,manual:!0});f.useEffect(function(){m.current.resetFields(),d.run()},[s]);var m=f.useRef();return(0,e.jsx)(Z.ZP,{title:"\u66F4\u65B0\u6A21\u62DF\u5668",style:{marginBottom:24},defaultCollapsed:!0,collapsible:!0,children:(0,e.jsx)(U.ZP,{formRef:m,onFinish:function(p){return o.run((0,O.Z)({appId:s},p)).then(function(c){c.build===0?re.default.info({message:"\u6A21\u62DF\u7ED3\u679C",description:"\u5DF2\u7ECF\u662F\u6700\u65B0\u7248\u672C"}):re.default.success({message:"\u6A21\u62DF\u7ED3\u679C",description:(0,e.jsxs)(e.Fragment,{children:["\u5C06\u4F1A\u66F4\u65B0\u7684\u7248\u672C\u662F\uFF1A",c.name," (",c.build,")",(0,e.jsx)("br",{}),"\u7248\u672C\u901A\u9053\uFF1A",["Stable","Beta","Alpha"][c.channel]]})})})},submitter:{searchConfig:{submitText:"\u6A21\u62DF"}},children:(0,e.jsxs)(U.ZP.Group,{children:[(0,e.jsx)(U.ZP.Item,{name:"build",width:"sm",label:"\u5F53\u524D\u7248\u672C",rules:[{required:!0}],children:(0,e.jsx)(x.Z,{showSearch:!0,placeholder:"\u9009\u62E9\u4E00\u4E2A\u7248\u672C",filterOption:function(p,c){var u;return((u=c.title)===null||u===void 0?void 0:u.toLowerCase().indexOf(p.toLowerCase()))>=0},style:{width:200},dropdownMatchSelectWidth:!1,onSearch:function(p){if(p){d.run(p);var c=Number(p);Number.isInteger(c)?m.current.setFieldsValue({build:c}):m.current.setFieldsValue({build:void 0})}},children:(t=d.data)===null||t===void 0||(l=t.list)===null||l===void 0?void 0:l.map(function(i){return(0,e.jsx)(x.Z.Option,{value:i.build,title:i.versionName+" ("+i.build+")",children:i.versionName+" ("+i.build+")"},i.build)})})}),(0,e.jsx)(ce,{name:"channel",width:"sm",label:"\u5F53\u524D\u7248\u672C\u901A\u9053",options:[{label:"Stable",value:0},{label:"Beta",value:1},{label:"Alpha",value:2}],rules:[{required:!0}]}),(0,e.jsx)(ce,{name:"selectedChannel",width:"sm",label:"\u9009\u62E9\u7684\u7248\u672C\u901A\u9053",options:[{label:"Stable",value:0},{label:"Beta",value:1},{label:"Alpha",value:2}],rules:[{required:!0}]}),(0,e.jsx)(U.ZP.Item,{name:"dev",label:"\u662F\u5426\u6709\u5F00\u53D1\u8BB8\u53EF",initialValue:0,rules:[{required:!0}],children:(0,e.jsxs)(K.ZP.Group,{children:[(0,e.jsx)(K.ZP.Button,{value:0,children:"\u65E0"}),(0,e.jsx)(K.ZP.Button,{value:1,children:"\u6709"})]})})]})})})},Je=Ye;function Xe(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=n.indexOf("/"),l=0;l<r&&t!==-1;l++)t=n.indexOf("/",t+1);return t!==-1?n.substr(0,t):n}function we(n){if(n==null||n=="")return"0 Bytes";var r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],t=0,l=parseFloat(n);t=Math.floor(Math.log(l)/Math.log(1024));var s=l/Math.pow(1024,t);return s=s.toFixed(2),s+r[t]}var ke=function(r){var t,l,s,o,d,m,i,p,c,u=r.match.params.appId||"",y=f.useState("stable"),M=(0,N.Z)(y,2),S=M[0],v=M[1],B=f.useState(u===""?[]:[{value:u,label:(0,e.jsx)(me.Z,{size:"small"}),disabled:!0}]),A=(0,N.Z)(B,2),_e=A[0],et=A[1];function tt(j){return X.apply(this,arguments)}function X(){return X=(0,fe.Z)(ne().mark(function j(g){return ne().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,je.yC)({search:g,all:!0}));case 1:case"end":return F.stop()}},j)})),X.apply(this,arguments)}var h=(0,b.QT)(function(){return(0,P.lR)({appId:u})},{manual:u===""}),w=(0,b.QT)(function(){return(0,P.FW)({appId:u})},{manual:u===""}),at=function(g){g&&h.run(),w.run()};(0,Fe.e)(function(){at(!0)},[u]),(0,f.useEffect)(function(){var j,g;et([{value:(j=h.data)===null||j===void 0?void 0:j.id,label:(g=h.data)===null||g===void 0?void 0:g.title}])},[h.data]);var ve=f.useRef(),he=f.useRef(),pe=f.useRef(),nt=(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(xe.Z,(0,O.Z)((0,O.Z)({showSearch:!0},u===""?{}:{value:u}),{},{placeholder:"\u9009\u62E9\u5E94\u7528",fetchOptions:tt,setMyOption:_e,style:{minWidth:"200px",maxWidth:"350px"},onChange:function(g){b.m8.push(Xe(b.m8.location.pathname)+"/"+g)}}))}),lt=[{title:"Build",dataIndex:"build",key:"build",ellipsis:!0},{title:"\u7248\u672C\u53F7",dataIndex:"versionName",key:"versionName",copyable:!0},{title:"\u7248\u672C\u7C7B\u578B",dataIndex:"channel",key:"channel",hideInSearch:!0,valueType:"select",filters:!0,onFilter:!0,valueEnum:{0:{text:"Stable"},1:{text:"Beta"},2:{text:"Alpha"}}},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"createTime",key:"createTime",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:{0:{text:"\u672A\u77E5",status:"Warning"},1:{text:"\u6B63\u5E38",status:"Success"},2:{text:"\u5BA1\u6838\u4E2D",status:"Processing"},3:{text:"\u5BA1\u6838\u672A\u901A\u8FC7",status:"Error"},4:{text:"\u7981\u6B62",status:"Error"},5:{text:"\u7B49\u5F85\u5220\u9664",status:"Warning"},6:{text:"\u8FDD\u89C4\u5C01\u7981",status:"Error"},7:{text:"\u6B63\u5E38-\u5F85\u5BA1\u6838",status:"Processing"},8:{text:"\u672A\u53D1\u5E03",status:"Warning"}}},{title:"\u6587\u4EF6\u5927\u5C0F",dataIndex:"size",key:"size",hideInSearch:!0,render:function(g){return(0,e.jsx)("span",{children:we(g)})}},{title:"\u64CD\u4F5C",key:"action",hideInSearch:!0}],rt=(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Ie.ZP,{params:{channel:{stable:0,beta:1,alpha:2}[S],appId:u},request:Te.gp,sticky:{offsetHeader:Le.M},rowKey:"deviceId",search:{labelWidth:120,filterType:"light"},scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:lt})});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{className:Se().header,title:nt,subTitle:"\u66F4\u65B0\u7BA1\u7406",extra:u&&(0,e.jsx)(W.Z.Group,{children:(0,e.jsx)(W.Z,{onClick:function(){b.m8.push("/app/detail/"+u)},children:"\u5E94\u7528\u8BE6\u60C5"})}),style:{padding:0,marginBottom:20}}),u?(0,e.jsxs)(ye.Z,{children:[(0,e.jsx)($e,{appId:u,enabled:(t=h.data)===null||t===void 0?void 0:t.enabled,loading:h.loading,onChanged:function(g){h.run().then(function(){if(g){var $,F,k;($=he.current)===null||$===void 0||$.doPush(),(F=ve.current)===null||F===void 0||F.doPush(),(k=pe.current)===null||k===void 0||k.doPush()}})}}),(0,e.jsxs)(Re,{disabled:!((l=h.data)!==null&&l!==void 0&&l.enabled),children:[(0,e.jsxs)(z.Z,{gutter:[24,24],children:[(0,e.jsx)(C.Z,{lg:8,md:8,sm:24,xs:24,children:(0,e.jsx)(G.Z,{appId:u,channel:0,title:"Stable",defaultData:(s=h.data)===null||s===void 0?void 0:s.stable,loading:h.loading,disabled:!((o=h.data)!==null&&o!==void 0&&o.enabled),actionRef:he})}),(0,e.jsx)(C.Z,{lg:8,md:8,sm:24,xs:24,children:(0,e.jsx)(G.Z,{appId:u,channel:1,title:"Beta",defaultData:(d=h.data)===null||d===void 0?void 0:d.beta,loading:h.loading,disabled:!((m=h.data)!==null&&m!==void 0&&m.enabled),actionRef:ve})}),(0,e.jsx)(C.Z,{lg:8,md:8,sm:24,xs:24,children:(0,e.jsx)(G.Z,{appId:u,channel:2,title:"Alpha",defaultData:(i=h.data)===null||i===void 0?void 0:i.alpha,loading:h.loading,disabled:!((p=h.data)!==null&&p!==void 0&&p.enabled),actionRef:pe})}),(0,e.jsx)(C.Z,{span:24,children:(0,e.jsx)(Ee,{appId:u,data:w.data,loading:w.loading,disabled:!((c=h.data)!==null&&c!==void 0&&c.enabled)})}),(0,e.jsx)(C.Z,{span:24,children:(0,e.jsx)(Ae,{})}),(0,e.jsx)(C.Z,{span:24,children:(0,e.jsx)(Je,{appId:u})})]}),(0,e.jsx)(T.Z,{offsetTop:47,style:{overflow:"hidden"},children:(0,e.jsxs)(Z.ZP,{className:be().tabs,title:"\u7248\u672C\u7BA1\u7406",tabs:{tabPosition:"top",size:"middle",activeKey:S,onChange:function(g){v(g)}},style:{boxShadow:"0 0 5px #00000044"},children:[(0,e.jsx)(Z.ZP.TabPane,{tab:"Stable",cardProps:{bodyStyle:{padding:0}}},"stable"),(0,e.jsx)(Z.ZP.TabPane,{tab:"Beta",cardProps:{bodyStyle:{padding:0}}},"beta"),(0,e.jsx)(Z.ZP.TabPane,{tab:"Alpha",cardProps:{bodyStyle:{padding:0}}},"alpha")]})}),(0,e.jsx)(Z.ZP,{bodyStyle:{padding:0},children:rt})]})]}):(0,e.jsx)(te.Z,{bodyStyle:{textAlign:"center"},children:"\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5E94\u7528"})]})},qe=ke}}]);
