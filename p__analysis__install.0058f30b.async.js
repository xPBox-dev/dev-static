(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[110],{46360:function($){$.exports={header:"header___1YsBZ"}},33053:function($){$.exports={tabs:"tabs___2_QYX"}},55457:function($,j,e){"use strict";e.r(j),e.d(j,{default:function(){return Oe}});var i=e(33565),p=e(57361),D=e(9754),s=e.n(D),h=e(38315),o=e(96132),M=e(22385),P=e(69713),g=e(37730),I=e(21349),R=e(23723),d=e(67294),c=e(84787),K=e(33053),S=e.n(K),E=e(21010),m=e(17744),_=e(7110),l=e(56905),u=e(52778),a=e(4084),t=e(85893),r=u.Z.Statistic,te=u.Z.Divider,k=function(v){var x=v.loading,n=v.active,Z=(0,d.useState)(!1),W=(0,i.Z)(Z,2),A=W[0],f=W[1];return(0,t.jsx)(a.Z,{onResize:function(B){f(B.width<696)},children:(0,t.jsxs)(u.Z.Group,{loading:x,direction:A?"column":"row",style:{marginBottom:24},children:[(0,t.jsx)(u.Z,{statistic:{title:"\u4ECA\u65E5\u5B89\u88C5\u91CF",value:(n==null?void 0:n.current)||0,description:(0,t.jsx)(r,{title:"\u672C\u6708\u5CF0\u503C",value:(n==null?void 0:n.max)||0})}}),(0,t.jsx)(te,{type:A?"horizontal":"vertical"}),(0,t.jsx)(u.Z,{statistic:{title:"\u6628\u65E5\u5B89\u88C5\u91CF",value:n==null?void 0:n.yesterday,description:(0,t.jsx)(r,{title:"\u524D\u65E5\u540C\u6BD4",value:(n==null?void 0:n.yc)==="-"?"-":(n==null?void 0:n.yc)+"%",trend:(n==null?void 0:n.yc)<0?"down":"up"})},chartPlacement:"left"}),(0,t.jsx)(u.Z,{statistic:{title:"\u672C\u6708\u5B89\u88C5\u91CF",value:n==null?void 0:n.month,description:(0,t.jsx)(r,{title:"\u4E0A\u6708\u540C\u6BD4",value:(n==null?void 0:n.mc)==="-"?"-":(n==null?void 0:n.mc)+"%",trend:(n==null?void 0:n.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},ne=k,_e=function(v){var x,n,Z,W,A,f,F,B=v.showAll,w=v.userId,z=d.useState("current"),N=(0,i.Z)(z,2),T=N[0],Q=N[1];d.useEffect(function(){C.run(),T==="current"?y.reset():y.run()},[w]);var C=(0,E.QT)(function(){return B?(0,l.K1)({current:!0,base:!0,userId:w}):(0,l.P)({current:!0,base:!0})},{manual:!0}),y=(0,E.QT)(function(){return B?(0,l.K1)({month:!0,userId:w}):(0,l.P)({month:!0})},{manual:!0}),J=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(X,V){return(0,t.jsx)(P.Z,{placement:"top",title:V.appId,children:(0,t.jsx)("a",{onClick:function(){return E.m8.push("/app/detail/"+V.id)},children:X})})}}].concat((0,g.Z)(B?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(X,V){return(0,t.jsxs)(t.Fragment,{children:[V.nick," (",V.email,")"]})}}]:[]),[{title:"\u5E94\u7528\u5546\u5E97\u5B89\u88C5",dataIndex:"install_store",key:"install_store",hideInSearch:!0},{title:"\u5E94\u7528ID\u5B89\u88C5",dataIndex:"install_app_id",key:"install_app_id",hideInSearch:!0},{title:"\u6587\u4EF6\u5B89\u88C5",dataIndex:"install_file",key:"install_file",hideInSearch:!0},{title:"\u5E94\u7528\u5B89\u88C5",dataIndex:"install_app",key:"install_app",hideInSearch:!0},{title:"\u542F\u52A8\u5668\u5B89\u88C5",dataIndex:"install_loader",key:"install_loader",hideInSearch:!0}]),G={appendPadding:10,height:400,data:T==="current"?((x=C.data)===null||x===void 0?void 0:x.current.rank)||[]:((n=y.data)===null||n===void 0?void 0:n.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:T==="current"?C.loading:y.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},b={appendPadding:10,height:400,data:T==="current"?((Z=C.data)===null||Z===void 0?void 0:Z.current.from)||[]:((W=y.data)===null||W===void 0?void 0:W.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:T==="current"?C.loading:y.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},oe=(0,t.jsxs)(c.ZP,{split:"horizontal",children:[(0,t.jsx)(c.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,t.jsx)(m.ZP,{headerTitle:"\u5B89\u88C5\u91CF\u8BE6\u60C5",dataSource:T==="current"?((A=C.data)===null||A===void 0?void 0:A.current.list)||[]:((f=y.data)===null||f===void 0?void 0:f.month.list)||[],loading:T==="current"?C.loading:y.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:J})}),(0,t.jsx)(c.ZP,{collapsible:!0,title:"TOP10\u5B89\u88C5\u91CF\u5E94\u7528",style:{position:"relative"},bodyStyle:{height:400},children:(0,t.jsx)(_.Z,(0,o.Z)({},G))}),(0,t.jsx)(c.ZP,{collapsible:!0,title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{position:"relative"},bodyStyle:{height:400},children:(0,t.jsx)(_.Z,(0,o.Z)({},b))})]});return(0,t.jsx)(I.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)(R.Z,{}),children:(0,t.jsx)(ne,{loading:C.loading,active:(F=C.data)===null||F===void 0?void 0:F.base})}),(0,t.jsxs)(d.Suspense,{fallback:(0,t.jsx)(R.Z,{}),children:[(0,t.jsxs)(c.ZP,{className:S().tabs,tabs:{tabPosition:"top",size:"large",activeKey:T,onChange:function(X){Q(X),X==="month"&&!y.data&&!y.loading&&y.run()}},children:[(0,t.jsx)(c.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0,display:"none"}}},"current"),(0,t.jsx)(c.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0,display:"none"}}},"month")]}),(0,t.jsx)(c.ZP,{bodyStyle:{padding:0},children:oe})]})]})})},ae=_e,he=e(14965),q=e(14072),fe=e(58024),re=e(39144),Ee=e(64896),H=e(37744),se=e(57663),le=e(71577),pe=e(20228),ue=e(11382),ie=e(65476),ve=e(84744),ee=e(57845),Y=e(46360),ge=e.n(Y);function ye(O){for(var v=O.indexOf("/"),x=0;x<2&&v!==-1;x++)v=O.indexOf("/",v+1);return v!==-1?O.substr(0,v):O}var Pe=function(v){var x,n,Z,W=v.showAll,A=v.userId,f=v.appId,F=v.setAppId,B=d.useState("current"),w=(0,i.Z)(B,2),z=w[0],N=w[1],T=d.useState(f===""?[]:[{value:f,label:(0,t.jsx)(ue.Z,{size:"small"})}]),Q=(0,i.Z)(T,2),C=Q[0],y=Q[1];function J(L){return G.apply(this,arguments)}function G(){return G=(0,p.Z)(s().mark(function L(U){return s().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.abrupt("return",(0,ve.yC)((0,o.Z)((0,o.Z)({search:U},W?{all:W}:{}),A!==0?{userId:A}:{})));case 1:case"end":return ce.stop()}},L)})),G.apply(this,arguments)}var b=(0,E.QT)(function(){return(0,l.sg)({current:!0,base:!0,appId:f})},{manual:f===""}),oe=(0,E.QT)(function(){return(0,l.sg)({month:!0,appId:f})},{manual:!0});(0,ee.e)(function(){b.run()},[f]),(0,d.useEffect)(function(){var L,U;y([{value:(L=b.data)===null||L===void 0?void 0:L.id,label:(U=b.data)===null||U===void 0?void 0:U.title}])},[b.data]);var de=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ie.Z,(0,o.Z)((0,o.Z)({showSearch:!0},f===""?{}:{value:f}),{},{placeholder:"\u9009\u62E9\u5E94\u7528",fetchOptions:J,setMyOption:C,style:{minWidth:"200px",maxWidth:"350px"},onChange:function(U){F(U),window.history.pushState({},0,"#"+ye(E.m8.location.pathname)+"/"+U)}}))}),X={appendPadding:10,height:400,data:z==="current"?((x=b.data)===null||x===void 0?void 0:x.current.from)||[]:((n=oe.data)===null||n===void 0?void 0:n.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:z==="current"?b.loading:oe.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},V=d.useRef((0,t.jsx)(c.ZP,{split:"horizontal",children:(0,t.jsx)(c.ZP,{title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{height:500,position:"relative"},children:(0,t.jsx)(_.Z,(0,o.Z)({},X))})}));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H.Z,{className:ge().header,title:de,subTitle:"\u7684\u7EDF\u8BA1\u4FE1\u606F",extra:f&&(0,t.jsx)(le.Z,{onClick:function(){E.m8.push("/app/detail/"+f)},children:"\u5E94\u7528\u8BE6\u60C5"}),style:{padding:0,marginBottom:20}}),f?(0,t.jsx)(I.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)(R.Z,{}),children:(0,t.jsx)(ne,{loading:b.loading,active:(Z=b.data)===null||Z===void 0?void 0:Z.base})}),(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)(R.Z,{}),children:(0,t.jsxs)(c.ZP,{className:S().tabs,tabs:{tabPosition:"top",size:"middle",activeKey:z,onChange:function(U){N(U)}},children:[(0,t.jsx)(c.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0}},children:V},"current"),(0,t.jsx)(c.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0}},children:V},"month"),(0,t.jsx)(c.ZP.TabPane,{tab:(0,t.jsxs)(t.Fragment,{children:["\u81EA\u5B9A\u4E49:",(0,t.jsx)(q.Z.RangePicker,{bordered:!1})]}),cardProps:{bodyStyle:{padding:0}},children:V},"month1")]})})]})}):(0,t.jsx)(re.Z,{bodyStyle:{textAlign:"center"},children:"\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5E94\u7528"})]})},Ie=Pe,xe=e(6637);function je(O){return me.apply(this,arguments)}function me(){return me=(0,p.Z)(s().mark(function O(v){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,xe.y)({search:v}));case 1:case"end":return n.stop()}},O)})),me.apply(this,arguments)}var Oe=function(O){var v=O.route.name==="all-install",x=d.useState(O.match.params.appId?O.match.params.appId:""),n=(0,i.Z)(x,2),Z=n[0],W=n[1],A=d.useRef(Z?"detail":"overview"),f=(0,d.useState)(0),F=(0,i.Z)(f,2),B=F[0],w=F[1],z=(0,t.jsx)(ae,{showAll:v,userId:B}),N=(0,t.jsx)(Ie,{showAll:v,userId:B,appId:Z,setAppId:W}),T=d.useState(Z?N:z),Q=(0,i.Z)(T,2),C=Q[0],y=Q[1];(0,d.useEffect)(function(){J()},[B,Z]);var J=function(){A.current==="overview"?y(z):y(N)};return(0,t.jsx)(h.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],tabActiveKey:A.current,content:v&&(0,t.jsxs)(t.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,t.jsx)(ie.Z,{showAll:!0,showSearch:!0,placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:je,defaultValue:0,style:{width:"250px"},onChange:function(b){w(b)}})]}),onTabChange:function(b){A.current=b,J()},children:C})}},57845:function($,j,e){"use strict";e.d(j,{e:function(){return p}});var i=e(67294),p=function(s,h){var o=i.useRef(!1);i.useEffect(function(){if(o.current){var M=s();return function(){return M&&M()}}else o.current=!0},h),i.useEffect(function(){return function(){return o.current=!1}},[])}},65476:function($,j,e){"use strict";var i=e(96132),p=e(43358),D=e(90290),s=e(20228),h=e(11382),o=e(37730),M=e(33565),P=e(81211),g=e(67294),I=e(23279),R=e.n(I),d=e(85893),c=function(S){var E=S.fetchOptions,m=S.debounceTimeout,_=m===void 0?500:m,l=S.showAll,u=S.setMyFetching,a=S.setMyOption,t=(0,P.Z)(S,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),r=g.useState(!1),te=(0,M.Z)(r,2),k=te[0],ne=te[1],_e=g.useState(!1),ae=(0,M.Z)(_e,2),he=ae[0],q=ae[1],fe=g.useState(l?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),re=(0,M.Z)(fe,2),Ee=re[0],H=re[1];g.useEffect(function(){k||H(a)},[a]),g.useEffect(function(){k||H(a)},[u]);var se=g.useRef(0),le=g.useMemo(function(){var pe=function(ie){se.current+=1;var ve=se.current;H([]),q(!0),E(ie).then(function(ee){ve===se.current&&(ee.data.forEach(function(Y){Y.label=Y.text,delete Y.text,Y.value=Y.id,delete Y.id}),H(l?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,o.Z)(ee.data)):ee.data),q(!1))})};return R()(pe,_)},[E,_]);return(0,d.jsx)(D.Z,(0,i.Z)((0,i.Z)({filterOption:!1,onSearch:le},t),{},{options:he?[{value:0,label:(0,d.jsx)(h.Z,{size:"small"})}]:Ee,onDropdownVisibleChange:function(ue){ue&&!k&&(ne(!0),q(!0),le())}}))};j.Z=c},23723:function($,j,e){"use strict";var i=e(20228),p=e(11382),D=e(85893);j.Z=function(){return(0,D.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,D.jsx)(p.Z,{size:"large"})})}},84744:function($,j,e){"use strict";e.d(j,{pb:function(){return M},aF:function(){return g},Nm:function(){return R},rZ:function(){return c},yC:function(){return S}});var i=e(96132),p=e(57361),D=e(9754),s=e.n(D),h=e(18811),o=e(21010);function M(m,_){return P.apply(this,arguments)}function P(){return P=(0,p.Z)(s().mark(function m(_,l){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(h.s3+"app/getList",{method:"POST",params:(0,i.Z)({},_),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),P.apply(this,arguments)}function g(m,_){return I.apply(this,arguments)}function I(){return I=(0,p.Z)(s().mark(function m(_,l){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(h.s3+"app/getAll",{method:"POST",params:(0,i.Z)({},_),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),I.apply(this,arguments)}function R(m,_){return d.apply(this,arguments)}function d(){return d=(0,p.Z)(s().mark(function m(_,l){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(h.s3+"app/getDetail",{method:"POST",params:(0,i.Z)({},_),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),d.apply(this,arguments)}function c(m,_){return K.apply(this,arguments)}function K(){return K=(0,p.Z)(s().mark(function m(_,l){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(h.s3+"app/getStatistic",{method:"POST",params:(0,i.Z)({},_),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),K.apply(this,arguments)}function S(m,_){return E.apply(this,arguments)}function E(){return E=(0,p.Z)(s().mark(function m(_,l){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)(h.s3+"app/search",{method:"POST",params:(0,i.Z)({},_),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),E.apply(this,arguments)}},56905:function($,j,e){"use strict";e.d(j,{s8:function(){return M},Pf:function(){return g},hK:function(){return R},P:function(){return c},K1:function(){return S},sg:function(){return m}});var i=e(96132),p=e(57361),D=e(9754),s=e.n(D),h=e(18811),o=e(21010);function M(l,u){return P.apply(this,arguments)}function P(){return P=(0,p.Z)(s().mark(function l(u,a){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.WY)(h.s3+"analysis/getInstance",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),P.apply(this,arguments)}function g(l,u){return I.apply(this,arguments)}function I(){return I=(0,p.Z)(s().mark(function l(u,a){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.WY)(h.s3+"analysis/getAllInstance",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),I.apply(this,arguments)}function R(l,u){return d.apply(this,arguments)}function d(){return d=(0,p.Z)(s().mark(function l(u,a){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.WY)(h.s3+"analysis/getAppInstance",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),d.apply(this,arguments)}function c(l,u){return K.apply(this,arguments)}function K(){return K=(0,p.Z)(s().mark(function l(u,a){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.WY)(h.s3+"analysis/getInstall",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),K.apply(this,arguments)}function S(l,u){return E.apply(this,arguments)}function E(){return E=(0,p.Z)(s().mark(function l(u,a){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.WY)(h.s3+"analysis/getAllInstall",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),E.apply(this,arguments)}function m(l,u){return _.apply(this,arguments)}function _(){return _=(0,p.Z)(s().mark(function l(u,a){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.WY)(h.s3+"analysis/getAppInstall",{method:"POST",params:(0,i.Z)({},u),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),_.apply(this,arguments)}},6637:function($,j,e){"use strict";e.d(j,{y:function(){return M}});var i=e(96132),p=e(57361),D=e(9754),s=e.n(D),h=e(18811),o=e(21010);function M(g,I){return P.apply(this,arguments)}function P(){return P=(0,p.Z)(s().mark(function g(I,R){return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,o.WY)(h.s3+"user/search",{method:"POST",params:(0,i.Z)({},I),credentials:"include"}));case 1:case"end":return c.stop()}},g)})),P.apply(this,arguments)}}}]);
