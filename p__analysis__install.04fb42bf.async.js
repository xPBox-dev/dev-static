(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1110],{29452:function(Q,h,e){"use strict";e.r(h);var x=e(3515),T=e(85461),A=e(13254),o=e(14277),P=e(96132),B=e(22385),M=e(69713),I=e(37730),g=e(33565),y=e(21349),u=e(23723),d=e(67294),a=e(84787),C=e(33053),j=e.n(C),n=e(21010),v=e(73727),r=e(16894),l=e(7110),c=e(56905),W=e(64358),U=e(13718),t=e(85893);function R(O){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,_=O.indexOf("/"),i=0;i<p&&_!==-1;i++)_=O.indexOf("/",_+1);return _!==-1?O.substr(0,_):O}var L=function(p){var _,i,b,Z,S,$,F,V,N,K=p.showAll,G=p.userId,H=d.useState("current"),Y=(0,g.Z)(H,2),E=Y[0],J=Y[1];d.useEffect(function(){m.run(),E==="current"?s.reset():s.run()},[G]);var m=(0,n.QT)(function(){return K?(0,c.K1)({current:!0,base:!0,userId:G}):(0,c.P)({current:!0,base:!0})},{manual:!0}),s=(0,n.QT)(function(){return K?(0,c.K1)({month:!0,userId:G}):(0,c.P)({month:!0})},{manual:!0}),X=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(D,f){return(0,t.jsx)(M.Z,{placement:"top",title:f.appId,children:(0,t.jsx)(v.rU,{to:R(n.m8.location.pathname)+"/"+f.id,children:D})})}}].concat((0,I.Z)(K?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(D,f){return(0,t.jsxs)(t.Fragment,{children:[f.nick," (",f.email,")"]})}}]:[]),[{title:"\u5E94\u7528\u5546\u5E97\u5B89\u88C5",dataIndex:"install_store",key:"install_store",hideInSearch:!0},{title:"\u5E94\u7528ID\u5B89\u88C5",dataIndex:"install_app_id",key:"install_app_id",hideInSearch:!0},{title:"\u6587\u4EF6\u5B89\u88C5",dataIndex:"install_file",key:"install_file",hideInSearch:!0},{title:"\u5E94\u7528\u5B89\u88C5",dataIndex:"install_app",key:"install_app",hideInSearch:!0},{title:"\u542F\u52A8\u5668\u5B89\u88C5",dataIndex:"install_loader",key:"install_loader",hideInSearch:!0}]),w={appendPadding:10,height:400,data:E==="current"?((_=m.data)===null||_===void 0?void 0:_.current.rank)||[]:((i=s.data)===null||i===void 0?void 0:i.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:E==="current"?m.loading:s.loading,label:{type:"outer",content:"{name} {percentage}"},onReady:function(D){D.on("element:click",function(f){n.m8.push(R(n.m8.location.pathname)+"/"+f.data.data.id)})},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},k={appendPadding:10,height:400,data:E==="current"?((b=m.data)===null||b===void 0?void 0:b.current.from)||[]:((Z=s.data)===null||Z===void 0?void 0:Z.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:E==="current"?m.loading:s.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},q=(0,t.jsxs)(a.ZP,{split:"horizontal",children:[(0,t.jsx)(a.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,t.jsx)(r.ZP,{headerTitle:"\u5B89\u88C5\u91CF\u8BE6\u60C5",params:(0,P.Z)({},E==="current"?{type:1}:{type:2}),rowKey:"id",search:!1,request:K?c.Yd:c.Dz,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:X})}),(0,t.jsx)(a.ZP,{collapsible:!0,title:"TOP10\u5B89\u88C5\u91CF\u5E94\u7528",style:{position:"relative"},bodyStyle:{height:"auto"},children:(E==="current"?(((S=m.data)===null||S===void 0?void 0:S.current.rank)||[]).length===0:((($=s.data)===null||$===void 0?void 0:$.month.rank)||[]).length===0)?(0,t.jsx)(o.Z,{image:o.Z.PRESENTED_IMAGE_SIMPLE}):(0,t.jsx)(l.Z,(0,P.Z)({},w))}),(0,t.jsx)(a.ZP,{collapsible:!0,title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{position:"relative"},bodyStyle:{height:"auto"},children:(E==="current"?(((F=m.data)===null||F===void 0?void 0:F.current.from)||[]).length===0:(((V=s.data)===null||V===void 0?void 0:V.month.from)||[]).length===0)?(0,t.jsx)(o.Z,{image:o.Z.PRESENTED_IMAGE_SIMPLE}):(0,t.jsx)(l.Z,(0,P.Z)({},k))})]});return(0,t.jsx)(y.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)(u.Z,{}),children:(0,t.jsx)(W.Z,{loading:m.loading,active:(N=m.data)===null||N===void 0?void 0:N.base})}),(0,t.jsxs)(d.Suspense,{fallback:(0,t.jsx)(u.Z,{}),children:[(0,t.jsx)(T.Z,{offsetTop:U.M,style:{overflow:"hidden"},children:(0,t.jsxs)(a.ZP,{className:j().tabs,tabs:{tabPosition:"top",size:"large",activeKey:E,onChange:function(D){J(D),D==="month"&&!s.data&&!s.loading&&s.run()}},style:{boxShadow:"0 0 5px #00000044"},children:[(0,t.jsx)(a.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0,display:"none"}}},"current"),(0,t.jsx)(a.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0,display:"none"}}},"month")]})}),(0,t.jsx)(a.ZP,{bodyStyle:{padding:0},children:q})]})]})})};h.default=L},86178:function(Q,h,e){"use strict";e.r(h);var x=e(33565),T=e(57361),A=e(9754),o=e.n(A),P=e(19797),B=e(29452),M=e(67294),I=e(36845),g=e(65476),y=e(6637),u=e(21010),d=e(85893);function a(n){return C.apply(this,arguments)}function C(){return C=(0,T.Z)(o().mark(function n(v){return o().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,y.y)({search:v}));case 1:case"end":return l.stop()}},n)})),C.apply(this,arguments)}function j(n){for(var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=n.indexOf("/"),l=0;l<v&&r!==-1;l++)r=n.indexOf("/",r+1);return r!==-1?n.substr(0,r):n}h.default=function(n){var v=n.route.name==="all-install",r=(0,u.tT)("admin"),l=r.selectedUser,c=r.setData,W=(0,M.useState)(l.value),U=(0,x.Z)(W,2),t=U[0],R=U[1],L=M.useRef(""),O=function(_){L.current=_};return(0,d.jsx)(P.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],tabActiveKey:n.location.pathname.substr(-7)==="install"?"overview":"detail",content:v&&(0,d.jsxs)(d.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,d.jsx)(g.Z,{showAll:!0,showSearch:!0,setMyOption:[l],placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:a,defaultValue:t,style:{width:"250px"},onChange:function(_,i){R(_),c({label:i.label,value:i.value})}})]}),onTabChange:function(_){_==="overview"?u.m8.push(j(u.m8.location.pathname)):u.m8.push(j(u.m8.location.pathname)+"/"+L.current)},children:M.cloneElement(n.children,{showAll:v,userId:t,setAppId:O})})}},6637:function(Q,h,e){"use strict";e.d(h,{y:function(){return M}});var x=e(96132),T=e(57361),A=e(9754),o=e.n(A),P=e(18811),B=e(21010);function M(g,y){return I.apply(this,arguments)}function I(){return I=(0,T.Z)(o().mark(function g(y,u){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,B.WY)(P.s3+"user/search",{method:"POST",params:(0,x.Z)({},y),credentials:"include"}));case 1:case"end":return a.stop()}},g)})),I.apply(this,arguments)}}}]);
