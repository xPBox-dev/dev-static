(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[750],{95750:function(Ee,z,v){"use strict";v.d(z,{W:function(){return $}});var j=v(22122),I=v(96156),V=v(28481),p=v(67294),X=v(94184),K=v.n(X),Y=v(81253),N=v(28991),T=v(6610),w=v(5991),D=v(10379),L=v(44144),G=v(50344),S=v(15105),H=v(34084),Q=v(18481),b=v(10985),U=p.createContext(null),J=U.Provider,q=U.Consumer,_=function(i){(0,D.Z)(a,i);var o=(0,L.Z)(a);function a(){var r;return(0,T.Z)(this,a),r=o.apply(this,arguments),r.renderDropdown=function(e){var t=e.notFoundContent,n=e.activeIndex,s=e.setActiveIndex,l=e.selectOption,f=e.onFocus,u=e.onBlur,c=r.props,m=c.prefixCls,d=c.options,h=d[n]||{};return p.createElement(b.ZP,{prefixCls:"".concat(m,"-menu"),activeKey:h.key,onSelect:function(F){var x=F.key,C=d.find(function(O){var y=O.key;return y===x});l(C)},onFocus:f,onBlur:u},d.map(function(g,F){var x=g.key,C=g.disabled,O=g.children,y=g.className,P=g.style;return p.createElement(b.sN,{key:x,disabled:C,className:y,style:P,onMouseEnter:function(){s(F)}},O)}),!d.length&&p.createElement(b.sN,{disabled:!0},t))},r}return(0,w.Z)(a,[{key:"render",value:function(){return p.createElement(q,null,this.renderDropdown)}}]),a}(p.Component),ee=_,te={bottomRight:{points:["tl","br"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},bottomLeft:{points:["tr","bl"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["bl","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topLeft:{points:["br","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}},ne=function(i){(0,D.Z)(a,i);var o=(0,L.Z)(a);function a(){var r;return(0,T.Z)(this,a),r=o.apply(this,arguments),r.getDropdownPrefix=function(){return"".concat(r.props.prefixCls,"-dropdown")},r.getDropdownElement=function(){var e=r.props.options;return p.createElement(ee,{prefixCls:r.getDropdownPrefix(),options:e})},r.getDropDownPlacement=function(){var e=r.props,t=e.placement,n=e.direction,s="topRight";return n==="rtl"?s=t==="top"?"topLeft":"bottomLeft":s=t==="top"?"topRight":"bottomRight",s},r}return(0,w.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.visible,s=e.transitionName,l=e.getPopupContainer,f=this.getDropdownElement();return p.createElement(Q.Z,{prefixCls:this.getDropdownPrefix(),popupVisible:n,popup:f,popupPlacement:this.getDropDownPlacement(),popupTransitionName:s,builtinPlacements:te,getPopupContainer:l},t)}}]),a}(p.Component),re=ne,oe=function(){return null},ae=oe,se=function(o){for(var a=(0,N.Z)({},o),r=arguments.length,e=new Array(r>1?r-1:0),t=1;t<r;t++)e[t-1]=arguments[t];return e.forEach(function(n){delete a[n]}),a};function ie(i){var o=i.selectionStart;return i.value.slice(0,o)}function ue(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=Array.isArray(o)?o:[o];return a.reduce(function(r,e){var t=i.lastIndexOf(e);return t>r.location?{location:t,prefix:e}:r},{location:-1,prefix:""})}function W(i){return(i||"").toLowerCase()}function le(i,o,a){var r=i[0];if(!r||r===a)return i;for(var e=i,t=o.length,n=0;n<t;n+=1)if(W(e[n])!==W(o[n])){e=e.slice(n);break}else n===t-1&&(e=e.slice(t));return e}function ce(i,o){var a=o.measureLocation,r=o.prefix,e=o.targetText,t=o.selectionStart,n=o.split,s=i.slice(0,a);s[s.length-n.length]===n&&(s=s.slice(0,s.length-n.length)),s&&(s="".concat(s).concat(n));var l=le(i.slice(t),e.slice(t-a-r.length),n);l.slice(0,n.length)===n&&(l=l.slice(n.length));var f="".concat(s).concat(r).concat(e).concat(n);return{text:"".concat(f).concat(l),selectionLocation:f.length}}function fe(i,o){i.setSelectionRange(o,o),i.blur(),i.focus()}function pe(i,o){var a=o.split;return!a||i.indexOf(a)===-1}function ve(i,o){var a=o.value,r=a===void 0?"":a,e=i.toLowerCase();return r.toLowerCase().indexOf(e)!==-1}var B=function(i){(0,D.Z)(a,i);var o=(0,L.Z)(a);function a(r){var e;return(0,T.Z)(this,a),e=o.call(this,r),e.focusId=void 0,e.triggerChange=function(t){var n=e.props.onChange;"value"in e.props||e.setState({value:t}),n&&n(t)},e.onChange=function(t){var n=t.target.value;e.triggerChange(n)},e.onKeyDown=function(t){var n=t.which,s=e.state,l=s.activeIndex,f=s.measuring;if(!!f){if(n===S.Z.UP||n===S.Z.DOWN){var u=e.getOptions().length,c=n===S.Z.UP?-1:1,m=(l+c+u)%u;e.setState({activeIndex:m}),t.preventDefault()}else if(n===S.Z.ESC)e.stopMeasure();else if(n===S.Z.ENTER){t.preventDefault();var d=e.getOptions();if(!d.length){e.stopMeasure();return}var h=d[l];e.selectOption(h)}}},e.onKeyUp=function(t){var n=t.key,s=t.which,l=e.state,f=l.measureText,u=l.measuring,c=e.props,m=c.prefix,d=m===void 0?"":m,h=c.onSearch,g=c.validateSearch,F=t.target,x=ie(F),C=ue(x,d),O=C.location,y=C.prefix;if([S.Z.ESC,S.Z.UP,S.Z.DOWN,S.Z.ENTER].indexOf(s)===-1)if(O!==-1){var P=x.slice(O+y.length),E=g(P,e.props),A=!!e.getOptions(P).length;E?(n===y||n==="Shift"||u||P!==f&&A)&&e.startMeasure(P,y,O):u&&e.stopMeasure(),h&&E&&h(P,y)}else u&&e.stopMeasure()},e.onPressEnter=function(t){var n=e.state.measuring,s=e.props.onPressEnter;!n&&s&&s(t)},e.onInputFocus=function(t){e.onFocus(t)},e.onInputBlur=function(t){e.onBlur(t)},e.onDropdownFocus=function(){e.onFocus()},e.onDropdownBlur=function(){e.onBlur()},e.onFocus=function(t){window.clearTimeout(e.focusId);var n=e.state.isFocus,s=e.props.onFocus;!n&&t&&s&&s(t),e.setState({isFocus:!0})},e.onBlur=function(t){e.focusId=window.setTimeout(function(){var n=e.props.onBlur;e.setState({isFocus:!1}),e.stopMeasure(),n&&n(t)},0)},e.selectOption=function(t){var n=e.state,s=n.value,l=n.measureLocation,f=n.measurePrefix,u=e.props,c=u.split,m=u.onSelect,d=t.value,h=d===void 0?"":d,g=ce(s,{measureLocation:l,targetText:h,prefix:f,selectionStart:e.textarea.selectionStart,split:c}),F=g.text,x=g.selectionLocation;e.triggerChange(F),e.stopMeasure(function(){fe(e.textarea,x)}),m&&m(t,f)},e.setActiveIndex=function(t){e.setState({activeIndex:t})},e.setTextAreaRef=function(t){var n;e.textarea=t==null||(n=t.resizableTextArea)===null||n===void 0?void 0:n.textArea},e.setMeasureRef=function(t){e.measure=t},e.getOptions=function(t){var n=t||e.state.measureText||"",s=e.props,l=s.children,f=s.filterOption,u=(0,G.Z)(l).map(function(c){var m=c.props,d=c.key;return(0,N.Z)((0,N.Z)({},m),{},{key:d||m.value})}).filter(function(c){return f===!1?!0:f(n,c)});return u},e.state={value:r.defaultValue||r.value||"",measuring:!1,measureLocation:0,measureText:null,measurePrefix:"",activeIndex:0,isFocus:!1},e}return(0,w.Z)(a,[{key:"componentDidUpdate",value:function(){var e=this.state.measuring;e&&(this.measure.scrollTop=this.textarea.scrollTop)}},{key:"startMeasure",value:function(e,t,n){this.setState({measuring:!0,measureText:e,measurePrefix:t,measureLocation:n,activeIndex:0})}},{key:"stopMeasure",value:function(e){this.setState({measuring:!1,measureLocation:0,measureText:null},e)}},{key:"focus",value:function(){this.textarea.focus()}},{key:"blur",value:function(){this.textarea.blur()}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.measureLocation,s=e.measurePrefix,l=e.measuring,f=e.activeIndex,u=this.props,c=u.prefixCls,m=u.placement,d=u.direction,h=u.transitionName,g=u.className,F=u.style,x=u.autoFocus,C=u.notFoundContent,O=u.getPopupContainer,y=(0,Y.Z)(u,["prefixCls","placement","direction","transitionName","className","style","autoFocus","notFoundContent","getPopupContainer"]),P=se(y,"value","defaultValue","prefix","split","children","validateSearch","filterOption","onSelect","onSearch"),E=l?this.getOptions():[];return p.createElement("div",{className:K()(c,g),style:F},p.createElement(H.Z,(0,j.Z)({autoFocus:x,ref:this.setTextAreaRef,value:t},P,{onChange:this.onChange,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPressEnter:this.onPressEnter,onFocus:this.onInputFocus,onBlur:this.onInputBlur})),l&&p.createElement("div",{ref:this.setMeasureRef,className:"".concat(c,"-measure")},t.slice(0,n),p.createElement(J,{value:{notFoundContent:C,activeIndex:f,setActiveIndex:this.setActiveIndex,selectOption:this.selectOption,onFocus:this.onDropdownFocus,onBlur:this.onDropdownBlur}},p.createElement(re,{prefixCls:c,transitionName:h,placement:m,direction:d,options:E,visible:!0,getPopupContainer:O},p.createElement("span",null,s))),t.slice(n+s.length)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return"value"in e&&e.value!==t.value&&(n.value=e.value||""),n}}]),a}(p.Component);B.Option=ae,B.defaultProps={prefixCls:"rc-mentions",prefix:"@",split:" ",validateSearch:pe,filterOption:ve,notFoundContent:"Not Found",rows:1};var de=B,k=de,me=v(42550),ge=v(11382),he=v(65632),xe=function(i,o){var a={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&o.indexOf(r)<0&&(a[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,r=Object.getOwnPropertySymbols(i);e<r.length;e++)o.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(i,r[e])&&(a[r[e]]=i[r[e]]);return a},$=k.Option;function Ce(){return!0}var ye=function(o,a){var r,e=o.prefixCls,t=o.className,n=o.disabled,s=o.loading,l=o.filterOption,f=o.children,u=o.notFoundContent,c=xe(o,["prefixCls","className","disabled","loading","filterOption","children","notFoundContent"]),m=p.useState(!1),d=(0,V.Z)(m,2),h=d[0],g=d[1],F=p.useRef(),x=(0,me.sQ)(a,F),C=p.useContext(he.E_),O=C.getPrefixCls,y=C.renderEmpty,P=C.direction,E=function(){c.onFocus&&c.onFocus.apply(c,arguments),g(!0)},A=function(){c.onBlur&&c.onBlur.apply(c,arguments),g(!1)},Pe=function(){return u!==void 0?u:y("Select")},Fe=function(){return s?p.createElement($,{value:"ANTD_SEARCHING",disabled:!0},p.createElement(ge.Z,{size:"small"})):f},Oe=function(){return s?Ce:l},M=O("mentions",e),Se=K()((r={},(0,I.Z)(r,"".concat(M,"-disabled"),n),(0,I.Z)(r,"".concat(M,"-focused"),h),(0,I.Z)(r,"".concat(M,"-rtl"),P==="rtl"),r),t);return p.createElement(k,(0,j.Z)({prefixCls:M,notFoundContent:Pe(),className:Se,disabled:n,direction:P},c,{filterOption:Oe(),onFocus:E,onBlur:A,ref:x}),Fe())},R=p.forwardRef(ye);R.displayName="Mentions",R.Option=$,R.getMentions=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0,a=o||{},r=a.prefix,e=r===void 0?"@":r,t=a.split,n=t===void 0?" ":t,s=Array.isArray(e)?e:[e];return i.split(n).map(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",f=null;return s.some(function(u){var c=l.slice(0,u.length);return c===u?(f=u,!0):!1}),f!==null?{prefix:f,value:l.slice(f.length)}:null}).filter(function(l){return!!l&&!!l.value})};var Me=null}}]);
