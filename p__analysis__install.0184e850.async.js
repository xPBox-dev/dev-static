(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[110],{46360:function(K){K.exports={header:"header___1YsBZ"}},33053:function(K){K.exports={tabs:"tabs___2_QYX"}},55457:function(K,O,e){"use strict";e.r(O),e.d(O,{default:function(){return De}});var u=e(33565),v=e(57361),A=e(9754),r=e.n(A),h=e(38315),i=e(96132),C=e(13254),E=e(14277),I=e(22385),Z=e(69713),z=e(37730),M=e(21349),x=e(23723),p=e(67294),c=e(84787),B=e(33053),m=e.n(B),l=e(21010),d=e(17744),o=e(7110),a=e(56905),D=e(52778),s=e(4084),t=e(85893),X=D.Z.Statistic,ie=D.Z.Divider,oe=function(g){var y=g.loading,n=g.active,S=(0,p.useState)(!1),$=(0,u.Z)(S,2),T=$[0],f=$[1];return(0,t.jsx)(s.Z,{onResize:function(L){f(L.width<696)},children:(0,t.jsxs)(D.Z.Group,{loading:y,direction:T?"column":"row",style:{marginBottom:24},children:[(0,t.jsx)(D.Z,{statistic:{title:"\u4ECA\u65E5\u5B89\u88C5\u91CF",value:(n==null?void 0:n.current)||0,description:(0,t.jsx)(X,{title:"\u672C\u6708\u5CF0\u503C",value:(n==null?void 0:n.max)||0})}}),(0,t.jsx)(ie,{type:T?"horizontal":"vertical"}),(0,t.jsx)(D.Z,{statistic:{title:"\u6628\u65E5\u5B89\u88C5\u91CF",value:n==null?void 0:n.yesterday,description:(0,t.jsx)(X,{title:"\u524D\u65E5\u540C\u6BD4",value:(n==null?void 0:n.yc)==="-"?"-":(n==null?void 0:n.yc)+"%",trend:(n==null?void 0:n.yc)<0?"down":"up"})},chartPlacement:"left"}),(0,t.jsx)(D.Z,{statistic:{title:"\u672C\u6708\u5B89\u88C5\u91CF",value:n==null?void 0:n.month,description:(0,t.jsx)(X,{title:"\u4E0A\u6708\u540C\u6BD4",value:(n==null?void 0:n.mc)==="-"?"-":(n==null?void 0:n.mc)+"%",trend:(n==null?void 0:n.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},ne=oe,de=function(g){var y,n,S,$,T,f,V,L,G,U,N,H=g.showAll,Y=g.userId,re=p.useState("current"),J=(0,u.Z)(re,2),j=J[0],Q=J[1];p.useEffect(function(){_.run(),j==="current"?P.reset():P.run()},[Y]);var _=(0,l.QT)(function(){return H?(0,a.K1)({current:!0,base:!0,userId:Y}):(0,a.P)({current:!0,base:!0})},{manual:!0}),P=(0,l.QT)(function(){return H?(0,a.K1)({month:!0,userId:Y}):(0,a.P)({month:!0})},{manual:!0}),ve=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(te,F){return(0,t.jsx)(Z.Z,{placement:"top",title:F.appId,children:(0,t.jsx)("a",{onClick:function(){return l.m8.push("/app/detail/"+F.id)},children:te})})}}].concat((0,z.Z)(H?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(te,F){return(0,t.jsxs)(t.Fragment,{children:[F.nick," (",F.email,")"]})}}]:[]),[{title:"\u5E94\u7528\u5546\u5E97\u5B89\u88C5",dataIndex:"install_store",key:"install_store",hideInSearch:!0},{title:"\u5E94\u7528ID\u5B89\u88C5",dataIndex:"install_app_id",key:"install_app_id",hideInSearch:!0},{title:"\u6587\u4EF6\u5B89\u88C5",dataIndex:"install_file",key:"install_file",hideInSearch:!0},{title:"\u5E94\u7528\u5B89\u88C5",dataIndex:"install_app",key:"install_app",hideInSearch:!0},{title:"\u542F\u52A8\u5668\u5B89\u88C5",dataIndex:"install_loader",key:"install_loader",hideInSearch:!0}]),me={appendPadding:10,height:400,data:j==="current"?((y=_.data)===null||y===void 0?void 0:y.current.rank)||[]:((n=P.data)===null||n===void 0?void 0:n.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:j==="current"?_.loading:P.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},he={appendPadding:10,height:400,data:j==="current"?((S=_.data)===null||S===void 0?void 0:S.current.from)||[]:(($=P.data)===null||$===void 0?void 0:$.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:j==="current"?_.loading:P.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},W=(0,t.jsxs)(c.ZP,{split:"horizontal",children:[(0,t.jsx)(c.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,t.jsx)(d.ZP,{headerTitle:"\u5B89\u88C5\u91CF\u8BE6\u60C5",dataSource:j==="current"?((T=_.data)===null||T===void 0?void 0:T.current.list)||[]:((f=P.data)===null||f===void 0?void 0:f.month.list)||[],loading:j==="current"?_.loading:P.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:ve})}),(0,t.jsx)(c.ZP,{collapsible:!0,title:"TOP10\u5B89\u88C5\u91CF\u5E94\u7528",style:{position:"relative"},bodyStyle:{height:"auto"},children:(j==="current"?(((V=_.data)===null||V===void 0?void 0:V.current.rank)||[]).length===0:(((L=P.data)===null||L===void 0?void 0:L.month.rank)||[]).length===0)?(0,t.jsx)(E.Z,{image:E.Z.PRESENTED_IMAGE_SIMPLE}):(0,t.jsx)(o.Z,(0,i.Z)({},me))}),(0,t.jsx)(c.ZP,{collapsible:!0,title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{position:"relative"},bodyStyle:{height:"auto"},children:(j==="current"?(((G=_.data)===null||G===void 0?void 0:G.current.from)||[]).length===0:(((U=P.data)===null||U===void 0?void 0:U.month.from)||[]).length===0)?(0,t.jsx)(E.Z,{image:E.Z.PRESENTED_IMAGE_SIMPLE}):(0,t.jsx)(o.Z,(0,i.Z)({},he))})]});return(0,t.jsx)(M.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Suspense,{fallback:(0,t.jsx)(x.Z,{}),children:(0,t.jsx)(ne,{loading:_.loading,active:(N=_.data)===null||N===void 0?void 0:N.base})}),(0,t.jsxs)(p.Suspense,{fallback:(0,t.jsx)(x.Z,{}),children:[(0,t.jsxs)(c.ZP,{className:m().tabs,tabs:{tabPosition:"top",size:"large",activeKey:j,onChange:function(te){Q(te),te==="month"&&!P.data&&!P.loading&&P.run()}},children:[(0,t.jsx)(c.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0,display:"none"}}},"current"),(0,t.jsx)(c.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0,display:"none"}}},"month")]}),(0,t.jsx)(c.ZP,{bodyStyle:{padding:0},children:W})]})]})})},ae=de,fe=e(14965),se=e(14072),Ee=e(58024),k=e(39144),le=e(64896),ue=e(37744),ce=e(57663),q=e(71577),ge=e(20228),pe=e(11382),ee=e(65476),w=e(84744),Pe=e(57845),Ie=e(46360),xe=e.n(Ie);function ye(b){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,y=b.indexOf("/"),n=0;n<g&&y!==-1;n++)y=b.indexOf("/",y+1);return y!==-1?b.substr(0,y):b}var je=function(g){var y,n,S,$=g.showAll,T=g.userId,f=g.appId,V=g.setAppId,L=p.useState("current"),G=(0,u.Z)(L,2),U=G[0],N=G[1],H=p.useState(f===""?[]:[{value:f,label:(0,t.jsx)(pe.Z,{size:"small"})}]),Y=(0,u.Z)(H,2),re=Y[0],J=Y[1];function j(W){return Q.apply(this,arguments)}function Q(){return Q=(0,v.Z)(r().mark(function W(R){return r().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,w.yC)((0,i.Z)((0,i.Z)({search:R},$?{all:$}:{}),T!==0?{userId:T}:{})));case 1:case"end":return F.stop()}},W)})),Q.apply(this,arguments)}var _=(0,l.QT)(function(){return(0,a.sg)({current:!0,base:!0,appId:f})},{manual:f===""}),P=(0,l.QT)(function(){return(0,a.sg)({month:!0,appId:f})},{manual:!0});(0,Pe.e)(function(){_.run()},[f]),(0,p.useEffect)(function(){var W,R;J([{value:(W=_.data)===null||W===void 0?void 0:W.id,label:(R=_.data)===null||R===void 0?void 0:R.title}])},[_.data]);var ve=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ee.Z,(0,i.Z)((0,i.Z)({showSearch:!0},f===""?{}:{value:f}),{},{placeholder:"\u9009\u62E9\u5E94\u7528",fetchOptions:j,setMyOption:re,style:{minWidth:"200px",maxWidth:"350px"},onChange:function(R){V(R),window.history.pushState({},0,"#"+ye(l.m8.location.pathname)+"/"+R)}}))}),me={appendPadding:10,height:400,data:U==="current"?((y=_.data)===null||y===void 0?void 0:y.current.from)||[]:((n=P.data)===null||n===void 0?void 0:n.month.from)||[],angleField:"value",colorField:"type",radius:.8,loading:U==="current"?_.loading:P.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},he=(0,t.jsx)(c.ZP,{split:"horizontal",children:(0,t.jsx)(c.ZP,{collapsible:!0,title:"\u5E94\u7528\u5B89\u88C5\u6765\u6E90",style:{position:"relative"},bodyStyle:{height:400},children:(0,t.jsx)(o.Z,(0,i.Z)({},me))})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ue.Z,{className:xe().header,title:ve,subTitle:"\u7684\u7EDF\u8BA1\u4FE1\u606F",extra:f&&(0,t.jsxs)(q.Z.Group,{children:[(0,t.jsx)(q.Z,{onClick:function(){l.m8.push(ye(l.m8.location.pathname,1)+"/instance/"+f)},children:"\u6D3B\u8DC3\u7EDF\u8BA1"}),(0,t.jsx)(q.Z,{onClick:function(){l.m8.push("/app/detail/"+f)},children:"\u5E94\u7528\u8BE6\u60C5"})]}),style:{padding:0,marginBottom:20}}),f?(0,t.jsx)(M.Z,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Suspense,{fallback:(0,t.jsx)(x.Z,{}),children:(0,t.jsx)(ne,{loading:_.loading,active:(S=_.data)===null||S===void 0?void 0:S.base})}),(0,t.jsxs)(p.Suspense,{fallback:(0,t.jsx)(x.Z,{}),children:[(0,t.jsxs)(c.ZP,{className:m().tabs,tabs:{tabPosition:"top",size:"middle",activeKey:U,onChange:function(R){N(R)}},children:[(0,t.jsx)(c.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0}}},"current"),(0,t.jsx)(c.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0}}},"month"),(0,t.jsx)(c.ZP.TabPane,{tab:(0,t.jsxs)(t.Fragment,{children:["\u81EA\u5B9A\u4E49:",(0,t.jsx)(se.Z.RangePicker,{bordered:!1})]}),cardProps:{bodyStyle:{padding:0}}},"month1")]}),(0,t.jsx)(c.ZP,{bodyStyle:{padding:0},children:he})]})]})}):(0,t.jsx)(k.Z,{bodyStyle:{textAlign:"center"},children:"\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5E94\u7528"})]})},Oe=je,Ze=e(6637);function Me(b){return _e.apply(this,arguments)}function _e(){return _e=(0,v.Z)(r().mark(function b(g){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,Ze.y)({search:g}));case 1:case"end":return n.stop()}},b)})),_e.apply(this,arguments)}var De=function(b){var g=b.route.name==="all-install",y=p.useState(b.match.params.appId?b.match.params.appId:""),n=(0,u.Z)(y,2),S=n[0],$=n[1],T=p.useRef(S?"detail":"overview"),f=(0,p.useState)(0),V=(0,u.Z)(f,2),L=V[0],G=V[1],U=(0,t.jsx)(ae,{showAll:g,userId:L}),N=(0,t.jsx)(Oe,{showAll:g,userId:L,appId:S,setAppId:$}),H=p.useState(S?N:U),Y=(0,u.Z)(H,2),re=Y[0],J=Y[1];(0,p.useEffect)(function(){j()},[L,S]);var j=function(){T.current==="overview"?J(U):J(N)};return(0,t.jsx)(h.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],tabActiveKey:T.current,content:g&&(0,t.jsxs)(t.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,t.jsx)(ee.Z,{showAll:!0,showSearch:!0,placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:Me,defaultValue:0,style:{width:"250px"},onChange:function(_){G(_)}})]}),onTabChange:function(_){T.current=_,j()},children:re})}},57845:function(K,O,e){"use strict";e.d(O,{e:function(){return v}});var u=e(67294),v=function(r,h){var i=u.useRef(!1);u.useEffect(function(){if(i.current){var C=r();return function(){return C&&C()}}else i.current=!0},h),u.useEffect(function(){return function(){return i.current=!1}},[])}},65476:function(K,O,e){"use strict";var u=e(96132),v=e(43358),A=e(90290),r=e(20228),h=e(11382),i=e(37730),C=e(33565),E=e(81211),I=e(67294),Z=e(23279),z=e.n(Z),M=e(85893),x=function(c){var B=c.fetchOptions,m=c.debounceTimeout,l=m===void 0?500:m,d=c.showAll,o=c.setMyFetching,a=c.setMyOption,D=(0,E.Z)(c,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),s=I.useState(!1),t=(0,C.Z)(s,2),X=t[0],ie=t[1],oe=I.useState(!1),ne=(0,C.Z)(oe,2),de=ne[0],ae=ne[1],fe=I.useState(d?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),se=(0,C.Z)(fe,2),Ee=se[0],k=se[1];I.useEffect(function(){X||k(a)},[a]),I.useEffect(function(){X||k(a)},[o]);var le=I.useRef(0),ue=I.useMemo(function(){var ce=function(ge){le.current+=1;var pe=le.current;k([]),ae(!0),B(ge).then(function(ee){pe===le.current&&(ee.data.forEach(function(w){w.label=w.text,delete w.text,w.value=w.id,delete w.id}),k(d?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,i.Z)(ee.data)):ee.data),ae(!1))})};return z()(ce,l)},[B,l]);return(0,M.jsx)(A.Z,(0,u.Z)((0,u.Z)({filterOption:!1,onSearch:ue},D),{},{options:de?[{value:0,label:(0,M.jsx)(h.Z,{size:"small"})}]:Ee,onDropdownVisibleChange:function(q){q&&!X&&(ie(!0),ae(!0),ue())}}))};O.Z=x},23723:function(K,O,e){"use strict";var u=e(20228),v=e(11382),A=e(85893);O.Z=function(){return(0,A.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,A.jsx)(v.Z,{size:"large"})})}},84744:function(K,O,e){"use strict";e.d(O,{pb:function(){return C},aF:function(){return I},Nm:function(){return z},rZ:function(){return x},yC:function(){return c}});var u=e(96132),v=e(57361),A=e(9754),r=e.n(A),h=e(18811),i=e(21010);function C(m,l){return E.apply(this,arguments)}function E(){return E=(0,v.Z)(r().mark(function m(l,d){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.WY)(h.s3+"app/getList",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),E.apply(this,arguments)}function I(m,l){return Z.apply(this,arguments)}function Z(){return Z=(0,v.Z)(r().mark(function m(l,d){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.WY)(h.s3+"app/getAll",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),Z.apply(this,arguments)}function z(m,l){return M.apply(this,arguments)}function M(){return M=(0,v.Z)(r().mark(function m(l,d){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.WY)(h.s3+"app/getDetail",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),M.apply(this,arguments)}function x(m,l){return p.apply(this,arguments)}function p(){return p=(0,v.Z)(r().mark(function m(l,d){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.WY)(h.s3+"app/getStatistic",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),p.apply(this,arguments)}function c(m,l){return B.apply(this,arguments)}function B(){return B=(0,v.Z)(r().mark(function m(l,d){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.WY)(h.s3+"app/search",{method:"POST",params:(0,u.Z)({},l),credentials:"include"}));case 1:case"end":return a.stop()}},m)})),B.apply(this,arguments)}},56905:function(K,O,e){"use strict";e.d(O,{s8:function(){return C},Pf:function(){return I},hK:function(){return z},P:function(){return x},K1:function(){return c},sg:function(){return m}});var u=e(96132),v=e(57361),A=e(9754),r=e.n(A),h=e(18811),i=e(21010);function C(d,o){return E.apply(this,arguments)}function E(){return E=(0,v.Z)(r().mark(function d(o,a){return r().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.WY)(h.s3+"analysis/getInstance",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return s.stop()}},d)})),E.apply(this,arguments)}function I(d,o){return Z.apply(this,arguments)}function Z(){return Z=(0,v.Z)(r().mark(function d(o,a){return r().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.WY)(h.s3+"analysis/getAllInstance",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return s.stop()}},d)})),Z.apply(this,arguments)}function z(d,o){return M.apply(this,arguments)}function M(){return M=(0,v.Z)(r().mark(function d(o,a){return r().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.WY)(h.s3+"analysis/getAppInstance",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return s.stop()}},d)})),M.apply(this,arguments)}function x(d,o){return p.apply(this,arguments)}function p(){return p=(0,v.Z)(r().mark(function d(o,a){return r().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.WY)(h.s3+"analysis/getInstall",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return s.stop()}},d)})),p.apply(this,arguments)}function c(d,o){return B.apply(this,arguments)}function B(){return B=(0,v.Z)(r().mark(function d(o,a){return r().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.WY)(h.s3+"analysis/getAllInstall",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return s.stop()}},d)})),B.apply(this,arguments)}function m(d,o){return l.apply(this,arguments)}function l(){return l=(0,v.Z)(r().mark(function d(o,a){return r().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.WY)(h.s3+"analysis/getAppInstall",{method:"POST",params:(0,u.Z)({},o),credentials:"include"}));case 1:case"end":return s.stop()}},d)})),l.apply(this,arguments)}},6637:function(K,O,e){"use strict";e.d(O,{y:function(){return C}});var u=e(96132),v=e(57361),A=e(9754),r=e.n(A),h=e(18811),i=e(21010);function C(I,Z){return E.apply(this,arguments)}function E(){return E=(0,v.Z)(r().mark(function I(Z,z){return r().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,i.WY)(h.s3+"user/search",{method:"POST",params:(0,u.Z)({},Z),credentials:"include"}));case 1:case"end":return x.stop()}},I)})),E.apply(this,arguments)}}}]);
