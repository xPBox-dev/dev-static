(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[967],{9056:function(C){C.exports={header:"header___3Y5Sz",wrap:"wrap___N0r8S"}},45572:function(C,M,e){"use strict";var T=e(68023),J=e(99935),j=e(48579),X=e(46586),O=e(17813),k=e(19076),E=e(62842),w=e(68290),v=e(62604),q=e(70012);T.D([O.N,k.N,E.N,j.N,q.N,w.N,v.N,X.N]),M.Z=J},62855:function(C,M,e){"use strict";e.r(M);var T=e(96132),J=e(84305),j=e(69224),X=e(13254),O=e(14277),k=e(18106),E=e(51752),w=e(89032),v=e(15746),q=e(13062),L=e(71230),Qt=e(95300),y=e(7277),Gt=e(64896),vt=e(37744),xt=e(57361),Vt=e(59250),tt=e(13013),Yt=e(6999),mt=e(75302),Ht=e(62350),pt=e(75443),Jt=e(30887),Z=e(99210),Xt=e(34792),R=e(48086),kt=e(20228),f=e(11382),et=e(33565),ht=e(9754),at=e.n(ht),o=e(84787),Pt=e(48786),Dt=e(86093),Mt=e(57254),Ot=e(7085),i=e(21010),l=e(84744),A=e(96459),D=e(67294),nt=e(97221),st=e(87155),lt=e(45572),yt=e(65476),ft=e(9056),it=e.n(ft),W=e(73586),At=e(56837),gt=e(28030),It=e(18811),t=e(85893),p=o.ZP.Divider;function Bt(g){if(g==null||g=="")return"0 Bytes";var K=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],x=0,h=parseFloat(g);x=Math.floor(Math.log(h)/Math.log(1024));var m=h/Math.pow(1024,x);return m=m.toFixed(2),m+K[x]}var Ct=function(K){var x,h,m,U,S,F,b,$,N,z,Q,G,V,s=K.match.params.id,Tt=(0,D.useState)("info"),rt=(0,et.Z)(Tt,2),ot=rt[0],jt=rt[1],Y=(0,i.QT)(function(){return(0,l.Nm)({id:s})}),a=Y.data,Lt=Y.loading,Zt=Y.run,dt=D.useRef("install"),Rt=D.useState([{value:s,label:(0,t.jsx)(f.Z,{size:"small"})}]),_t=(0,et.Z)(Rt,2),Wt=_t[0],Kt=_t[1],I=(0,i.QT)(function(){return(0,l.rZ)({id:s,type:"install"})}),_=(0,i.QT)(function(){return(0,l.rZ)({id:s,type:"instance"})},{manual:!0}),u=(0,i.QT)(function(){return(0,l.rZ)({id:s,type:"device"})},{manual:!0}),P=(0,i.QT)(function(){return(0,l.rZ)({id:s,type:"count"})},{manual:!0}),d=(0,i.QT)(function(){return(0,At.lR)({appId:s})},{manual:!0}),ut=function(){Zt(),P.reset(),u.reset(),_.reset(),I.run(),ot==="update"?d.run():d.reset()};(0,D.useEffect)(function(){ut()},[s]),(0,D.useEffect)(function(){Kt([{value:a==null?void 0:a.id,label:(a==null?void 0:a.appName)+" - "+(a==null?void 0:a.appId)}])},[a]);var Ut=(0,i.QT)(function(n){return(0,l.h$)({appId:s,disable:n})},{manual:!0,onSuccess:function(){R.default.success({content:"\u4FEE\u6539\u6210\u529F",duration:3,key:"status"}),ut()},onError:function(){R.default.error({content:"\u4FEE\u6539\u5931\u8D25",duration:3,key:"status"})}}),wt=!1,ct=(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(pt.Z,{placement:"top",title:"\u786E\u5B9A\u8981"+((a==null?void 0:a.status)===l.w$.NORMAL?"\u4E0B\u67B6\u8BE5\u5E94\u7528\uFF1F\u4E0B\u67B6\u540E\u5C06\u5BFC\u81F4\u5DF2\u5B89\u88C5\u7528\u6237\u65E0\u6CD5\u7EE7\u7EED\u4F7F\u7528\uFF01":"\u4E0A\u67B6\u5E94\u7528"),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){R.default.loading({content:"\u6B63\u5728\u5904\u7406...",duration:0,key:"status"}),Ut.run((a==null?void 0:a.status)===l.w$.NORMAL)},children:(0,t.jsx)(Z.Z.Item,{disabled:!((a==null?void 0:a.status)===l.w$.NORMAL||(a==null?void 0:a.status)===l.w$.DISABLED),children:(a==null?void 0:a.status)===l.w$.NORMAL?"\u4E0B\u67B6\u5E94\u7528":"\u4E0A\u67B6\u5E94\u7528"},"status")}),(0,t.jsx)(Z.Z.Item,{onClick:function(){return window.open(It.s3+"app/getInstaller?id="+s)},children:"\u751F\u6210\u5728\u7EBF\u5B89\u88C5\u5305"},"installer")]}),c=mt.ZP.useBreakpoint(),St={tooltip:{trigger:"axis"},legend:{data:["\u6D3B\u8DC3\u8BBE\u5907\u6570","\u5E73\u5747\u6D3B\u8DC3\u65F6\u95F4","\u7D2F\u8BA1\u6D3B\u8DC3\u8BBE\u5907"]},grid:{top:"30px",left:"10px",right:"10px",bottom:"50px",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:(x=u.data)===null||x===void 0?void 0:x.x}],yAxis:[{name:"\u8BBE\u5907\u6570",type:"value",minInterval:1},{name:"\u6D3B\u8DC3\u65F6\u95F4(\u79D2)",type:"value",max:3600}],dataZoom:[{show:!0,xAxisIndex:0,start:66.666}],series:[{name:"\u7D2F\u8BA1\u6D3B\u8DC3\u8BBE\u5907",type:"custom",stack:"\u7D2F\u8BA1\u6D3B\u8DC3\u8BBE\u5907",renderItem:function(){},data:[(h=u.data)===null||h===void 0?void 0:h.total],encode:{x:0,y:0,tooltip:0},markLine:{data:[{type:"max",name:"\u672C\u65E5\u7D2F\u8BA1\u6D3B\u8DC3\u5B9E\u4F8B",label:{position:"insideStartTop",formatter:"\u672C\u65E5\u7D2F\u8BA1\u6D3B\u8DC3\u5B9E\u4F8B"},tooltip:{trigger:"item"},yAxis:(m=u.data)===null||m===void 0?void 0:m.total}]}},{name:"\u6D3B\u8DC3\u8BBE\u5907\u6570",type:"line",smooth:!0,stack:"\u8BBE\u5907\u6570",color:"#D23325",data:(U=u.data)===null||U===void 0?void 0:U.instance},{name:"\u5E73\u5747\u6D3B\u8DC3\u65F6\u95F4",type:"line",yAxisIndex:1,smooth:!0,color:"#5888F3",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#1890ff"},{offset:.5,color:"#7ec2f3"},{offset:1,color:"#ffffff"}],global:!1}},stack:"\u65F6\u95F4",data:(S=u.data)===null||S===void 0?void 0:S.time}]},Ft={tooltip:{trigger:"axis"},legend:{data:["\u6D3B\u8DC3\u5B9E\u4F8B\u6570","\u5E73\u5747\u6D3B\u8DC3\u65F6\u95F4","\u7D2F\u8BA1\u6D3B\u8DC3\u5B9E\u4F8B"]},grid:{top:"30px",left:"10px",right:"10px",bottom:"50px",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:(F=_.data)===null||F===void 0?void 0:F.x}],yAxis:[{name:"\u5B9E\u4F8B\u6570",type:"value",minInterval:1},{name:"\u6D3B\u8DC3\u65F6\u95F4(\u79D2)",type:"value",max:3600}],dataZoom:[{show:!0,xAxisIndex:0,start:66.666}],series:[{name:"\u7D2F\u8BA1\u6D3B\u8DC3\u5B9E\u4F8B",type:"custom",stack:"\u7D2F\u8BA1\u6D3B\u8DC3\u5B9E\u4F8B",renderItem:function(){},data:[(b=_.data)===null||b===void 0?void 0:b.total],encode:{x:0,y:0,tooltip:0},markLine:{data:[{type:"max",name:"\u672C\u65E5\u7D2F\u8BA1\u6D3B\u8DC3\u5B9E\u4F8B",label:{position:"insideStartTop",formatter:"\u672C\u65E5\u7D2F\u8BA1\u6D3B\u8DC3\u5B9E\u4F8B"},tooltip:{trigger:"item"},yAxis:($=_.data)===null||$===void 0?void 0:$.total}]}},{name:"\u6D3B\u8DC3\u5B9E\u4F8B\u6570",type:"line",smooth:!0,stack:"\u5B9E\u4F8B\u6570",color:"#D23325",data:(N=_.data)===null||N===void 0?void 0:N.instance},{name:"\u5E73\u5747\u6D3B\u8DC3\u65F6\u95F4",type:"line",yAxisIndex:1,smooth:!0,color:"#5888F3",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#1890ff"},{offset:.5,color:"#7ec2f3"},{offset:1,color:"#ffffff"}],global:!1}},stack:"\u65F6\u95F4",data:(z=_.data)===null||z===void 0?void 0:z.time}]},bt=[{title:"Build",dataIndex:"build",key:"build",ellipsis:!0},{title:"\u7248\u672C\u53F7",dataIndex:"versionName",key:"versionName",copyable:!0},{title:"\u7248\u672C\u7C7B\u578B",dataIndex:"channel",key:"channel",hideInSearch:!0,valueType:"select",filters:!0,onFilter:!0,valueEnum:{0:{text:"Stable"},1:{text:"Beta"},2:{text:"Alpha"}}},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"createTime",key:"createTime",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:{0:{text:"\u672A\u77E5",status:"Warning"},1:{text:"\u6B63\u5E38",status:"Success"},2:{text:"\u5BA1\u6838\u4E2D",status:"Processing"},3:{text:"\u5BA1\u6838\u672A\u901A\u8FC7",status:"Error"},4:{text:"\u7981\u6B62",status:"Error"},5:{text:"\u7B49\u5F85\u5220\u9664",status:"Warning"},6:{text:"\u8FDD\u89C4\u5C01\u7981",status:"Error"},7:{text:"\u6B63\u5E38-\u5F85\u5BA1\u6838",status:"Processing"},8:{text:"\u672A\u53D1\u5E03",status:"Warning"}}},{title:"\u6587\u4EF6\u5927\u5C0F",dataIndex:"size",key:"size",hideInSearch:!0,render:function(r){return(0,t.jsx)("span",{children:Bt(r)})}},{title:"\u64CD\u4F5C",key:"action",hideInSearch:!0,render:function(){return(0,t.jsx)(tt.Z,{overlay:ct,children:(0,t.jsxs)("a",{className:"ant-dropdown-link",onClick:function(Et){return Et.preventDefault()},children:["\u64CD\u4F5C",(0,t.jsx)(Mt.Z,{})]})})}}],$t=(0,i.md)();function Nt(n){return H.apply(this,arguments)}function H(){return H=(0,xt.Z)(at().mark(function n(r){return at().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,l.yC)((0,T.Z)({search:r},$t.canAdmin?{all:!0}:{})));case 1:case"end":return B.stop()}},n)})),H.apply(this,arguments)}var zt=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(yt.Z,{className:it().headerSelect,showSearch:!0,value:s,placeholder:"\u9009\u62E9\u5E94\u7528",bordered:!1,fetchOptions:Nt,size:"large",setMyOption:Wt,style:{minWidth:"200px",maxWidth:"350px",marginLeft:-11},onChange:function(r){i.m8.push("/app/detail/"+r)}})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(f.Z,{spinning:Lt,indicator:(0,t.jsx)(Ot.Z,{spin:!0}),size:"large",tip:"\u52A0\u8F7D\u4E2D...",bodyStyle:{padding:0},bordered:!1,children:[(0,t.jsx)(vt.Z,{className:it().header,onBack:function(){return i.m8.goBack()},title:zt,ghost:!1,extra:(0,t.jsx)(Pt.Z,{children:(0,t.jsx)(tt.Z.Button,{overlay:ct,onClick:function(){return i.m8.push("/app/edit/"+s)},children:"\u4FEE\u6539\u5E94\u7528"})}),style:{borderBottom:"1px solid #EEEEEE"}}),(0,t.jsxs)(o.ZP,{headerBordered:!0,tabs:{tabPosition:"left",activeKey:ot,onChange:function(r){jt(r),console.log(r==="update"),r==="update"&&!d.data&&d.run()}},children:[(0,t.jsxs)(o.ZP.TabPane,{tab:"\u5E94\u7528\u7B80\u4ECB",cardProps:{bodyStyle:{padding:0}},children:[(0,t.jsx)(L.Z,{children:(0,t.jsxs)(o.ZP.Group,{direction:c.lg?"row":"column",children:[(0,t.jsx)(o.ZP,{children:(0,t.jsx)(y.Z,{title:"\u63A8\u9001\u7684\u7248\u672C",value:a==null?void 0:a.lastPush,precision:2})}),(0,t.jsx)(p,{type:c.lg?"vertical":"horizontal"}),(0,t.jsx)(o.ZP,{children:(0,t.jsx)(y.Z,{title:"\u6700\u540E\u66F4\u65B0\u65F6\u95F4",value:a==null?void 0:a.lastUpdate,precision:2})}),(0,t.jsx)(p,{type:c.lg?"vertical":"horizontal"}),(0,t.jsx)(o.ZP,{children:(0,t.jsx)(y.Z,{title:"\u72B6\u6001",value:l.w$.getText(a==null?void 0:a.status),valueStyle:{color:l.w$.getColor(a==null?void 0:a.status)}})}),(0,t.jsx)(p,{type:c.lg?"vertical":"horizontal"}),(0,t.jsx)(o.ZP,{children:(0,t.jsx)(y.Z,{title:"\u62E5\u6709\u7248\u672C\u6570",value:a==null?void 0:a.versionCount})})]})}),(0,t.jsx)(p,{type:"horizontal"}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(o.ZP,{title:"\u5E94\u7528\u7B80\u4ECB",children:a==null?void 0:a.detail})})]},"info"),(0,t.jsx)(o.ZP.TabPane,{tab:"\u66F4\u65B0\u7BA1\u7406",cardProps:{bodyStyle:{padding:0}},children:(0,t.jsxs)(L.Z,{justify:"space-between",children:[(0,t.jsx)(v.Z,{style:{width:0}}),(0,t.jsx)(v.Z,{span:7,lg:7,md:7,sm:24,xs:24,children:(0,t.jsx)(W.Z,{channel:0,appId:s,title:"Stable",defaultData:(Q=d.data)===null||Q===void 0?void 0:Q.stable,loading:d.loading})}),(0,t.jsx)(p,{style:c.md?{margin:"15px 0"}:{margin:0,width:"100%"},type:c.md?"vertical":"horizontal"}),(0,t.jsx)(v.Z,{span:7,lg:7,md:7,sm:24,xs:24,children:(0,t.jsx)(W.Z,{channel:1,appId:s,title:"Beta",defaultData:(G=d.data)===null||G===void 0?void 0:G.beta,loading:d.loading})}),(0,t.jsx)(p,{style:c.md?{margin:"15px 0"}:{margin:0,width:"100%"},type:c.md?"vertical":"horizontal"}),(0,t.jsx)(v.Z,{span:7,lg:7,md:7,sm:24,xs:24,children:(0,t.jsx)(W.Z,{channel:2,appId:s,title:"Alpha",defaultData:(V=d.data)===null||V===void 0?void 0:V.alpha,loading:d.loading})}),(0,t.jsx)(v.Z,{style:{width:0}})]})},"update"),(0,t.jsxs)(o.ZP.TabPane,{tab:"\u5176\u4ED6\u4FE1\u606F",children:[(0,t.jsx)(A.Z,{title:"\u57FA\u7840\u4FE1\u606F",column:1,columns:[{label:"\u5E94\u7528\u67B6\u6784",dataIndex:"architecture",key:"architecture",valueType:"select",valueEnum:{0:{text:"\u672A\u77E5"},1:{text:"\u6B63\u5E38"},2:{text:"\u5BA1\u6838\u4E2D"}}},{label:"\u5E94\u7528\u5206\u7C7B",dataIndex:"architecture",key:"architecture",valueType:"select",valueEnum:{0:{text:"\u672A\u77E5"},1:{text:"\u6B63\u5E38"},2:{text:"\u5BA1\u6838\u4E2D"}}},{label:"\u4EA7\u54C1\u7F51\u7AD9",dataIndex:"web",key:"web"}],dataSource:a==null?void 0:a.base}),(0,t.jsxs)(A.Z,{title:"API\u4FE1\u606F",column:1,dataSource:a==null?void 0:a.api,children:[(0,t.jsx)(A.Z.Item,{dataIndex:"license",label:"\u6388\u6743\u4FE1\u606F\u56DE\u8C03"}),(0,t.jsx)(A.Z.Item,{dataIndex:"api",label:"\u5E94\u7528\u4FE1\u606F\u56DE\u8C03"})]})]},"other"),(0,t.jsx)(o.ZP.TabPane,{tab:"\u7EDF\u8BA1\u4FE1\u606F",cardProps:{bodyStyle:{padding:"0 10px 10px 10px"}},children:(0,t.jsxs)(E.Z,{size:"small",tabBarExtraContent:(0,t.jsx)("a",{onClick:function(){dt.current==="install"?i.m8.push("/analysis/install/"+s):i.m8.push("/analysis/instance/"+s)},style:{paddingRight:"10px"},children:"\u66F4\u591A\u6570\u636E"}),tabBarStyle:{marginBottom:24},onChange:function(r){switch(dt.current=r,r){case"instance":!_.data&&_.run();break;case"count":!P.data&&P.run();break;case"device":!u.data&&u.run();break}},children:[(0,t.jsx)(E.Z.TabPane,{tab:"\u65E5\u5B89\u88C5\u91CF",style:{position:"relative"},children:(0,t.jsx)(nt.Z,{loading:I.loading||!I.data,height:300,data:I.data||[],xField:"x",yField:"y",seriesField:"type",isStack:!0,xAxis:{visible:!0},yAxis:{visible:!0,title:{visible:!1}},slider:{start:0,end:1},title:{visible:!0,text:"\u6700\u8FD1\u4E00\u4E2A\u6708\u5B89\u88C5\u91CF\u8D8B\u52BF",style:{fontSize:14}},meta:{y:{alias:"\u5B89\u88C5\u91CF"}}})},"install"),(0,t.jsx)(E.Z.TabPane,{tab:"\u6D3B\u8DC3\u5B9E\u4F8B",style:{position:"relative"},children:(0,t.jsx)(f.Z,{spinning:_.loading,children:(0,t.jsx)(st.Z,{echarts:lt.Z,option:Ft,style:{height:300}})})},"instance"),(0,t.jsx)(E.Z.TabPane,{tab:"\u542F\u52A8\u6B21\u6570",style:{position:"relative"},children:(0,t.jsx)(nt.Z,{loading:P.loading||!P.data,height:300,data:P.data||[],xField:"x",yField:"y",xAxis:{visible:!0},yAxis:{visible:!0,title:{visible:!1}},slider:{start:.6666,end:1},title:{visible:!0,text:"\u542F\u52A8\u6B21\u6570\u8D8B\u52BF",style:{fontSize:14}},meta:{y:{alias:"\u542F\u52A8\u6B21\u6570"}}})},"count"),(0,t.jsx)(E.Z.TabPane,{tab:"\u6D3B\u8DC3\u8BBE\u5907",style:{position:"relative"},children:(0,t.jsx)(f.Z,{spinning:u.loading,children:(0,t.jsx)(st.Z,{echarts:lt.Z,option:St,style:{height:300}})})},"device")]})},"stat")]})]}),(0,t.jsx)(j.ZP,{renderEmpty:function(){return(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(O.Z,{image:O.Z.PRESENTED_IMAGE_SIMPLE,description:(0,t.jsxs)("span",{children:["\u6682\u65F6\u6CA1\u6709\u54E6\uFF0C\u53EF\u4EE5\u53BB",(0,t.jsx)("a",{href:"#API",children:"\u521B\u5EFA\u4E00\u4E2A"})]})})})},children:(0,t.jsx)(Dt.ZP,{params:{appId:s},request:gt.g,sticky:{offsetHeader:47},headerTitle:"\u7248\u672C\u5217\u8868",rowKey:"deviceId",search:{labelWidth:120,filterType:"light"},style:{marginTop:30},scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:bt})})]})};M.default=Ct}}]);
