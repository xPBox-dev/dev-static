(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[785],{72285:function(S){S.exports={channelCard:"channelCard___1COW8",cardSelect:"cardSelect___1Xbdu"}},73586:function(S,I,e){"use strict";var o=e(58024),O=e(39144),p=e(43358),a=e(90290),d=e(59250),m=e(13013),A=e(22385),x=e(69713),D=e(30887),Z=e(99210),W=e(63185),B=e(9676),j=e(71153),L=e(60331),g=e(34792),v=e(48086),h=e(20228),T=e(11382),c=e(74379),P=e(38648),b=e(33565),$=e(72285),R=e.n($),i=e(67294),_=e(21010),M=e(56837),u=e(57845),l=e(62298),s=e(68628),C=e(44545),n=e(85893),r=function(y){var w,V,Y,G,Q,F=y.appId,U=y.channel,K=y.title,z=y.defaultData,te=y.loading,ie=y.disabled,re=y.actionRef,oe=i.useState(void 0),ue=(0,b.Z)(oe,2),t=ue[0],J=ue[1],_e=i.useState(void 0),ae=(0,b.Z)(_e,2),de=ae[0],se=ae[1];(0,u.e)(function(){J(z),se(z==null?void 0:z.config)},[z]),(0,u.e)(function(){N.run()},[F]);var k=(0,_.QT)(function(){return(0,M.VF)({appId:F,channel:U})},{manual:!0,throwOnError:!0,onSuccess:function(f){J(f)}}),q=(0,_.QT)(function(E){return(0,M.qE)({appId:F,channel:U,options:E})},{manual:!0,onSuccess:function(f){J(f)},onError:function(f){var X,H=f&&((X=f.data)===null||X===void 0?void 0:X.errorMessage);H?P.default.error({message:"\u4FEE\u6539\u63A8\u9001\u6A21\u5F0F\u5931\u8D25",description:H}):P.default.error({message:"\u4FEE\u6539\u63A8\u9001\u6A21\u5F0F\u5931\u8D25",description:"\u4FEE\u6539\u63A8\u9001\u6A21\u5F0F\u5931\u8D25\u3002"})}});re&&(re.current={doPush:function(){return k.run()}});var le=function(){P.default.open({message:"\u6B63\u5728\u5C1D\u8BD5\u63A8\u9001",description:"\u63A8\u9001\u9700\u8981\u4E00\u5B9A\u65F6\u95F4\uFF0C\u8BF7\u7A0D\u7B49\u3002",icon:(0,n.jsx)(T.Z,{}),key:"push"}),k.run().then(function(f){P.default.close("push"),f.status===3?P.default.error({message:"\u63A8\u9001\u7248\u672C\u5931\u8D25",description:f.error,duration:5}):P.default.success({message:"\u63A8\u9001\u7248\u672C\u6210\u529F",description:"\u63A8\u9001\u7248\u672C\u6210\u529F\u3002"})}).catch(function(f){P.default.close("push"),P.default.error({message:"\u63A8\u9001\u7248\u672C\u5931\u8D25",description:"\u63A8\u9001\u7248\u672C\u5931\u8D25\u4E86\u3002"})})},ee=(0,_.QT)(function(E){return(0,M.Tf)({appId:F,channel:U,options:E})},{manual:!0,onSuccess:function(f){J(f),v.default.info("\u4FEE\u6539\u63A8\u9001\u8BBE\u7F6E\u6210\u529F"),f.config!==-1&&le()}}),N=(0,_.QT)(function(E){return(0,M.E4)({search:E,appId:F,channel:U})},{debounceInterval:500}),ce=function(f){se(f),ee.run({config:f})},pe=(0,n.jsx)(n.Fragment,{children:(t==null?void 0:t.status)>=0&&(t==null?void 0:t.status)<=3?[(0,n.jsx)(L.Z,{color:"orange",children:"\u672A\u63A8\u9001"},0),(0,n.jsx)(L.Z,{color:"green",children:"\u63A8\u9001\u6B63\u5E38"},1),(0,n.jsx)(L.Z,{color:"blue",children:"\u7B49\u5F85\u63A8\u9001"},2),(0,n.jsx)(L.Z,{color:"red",children:"\u63A8\u9001\u5931\u8D25"},3)][t.status]:(0,n.jsx)(L.Z,{color:"red",children:"\u672A\u77E5\u9519\u8BEF"},0)}),fe=(0,n.jsx)(Z.Z,{multiple:!0,children:(0,n.jsxs)(T.Z,{spinning:te||ee.loading||k.loading||q.loading,children:[(0,n.jsxs)(Z.Z.ItemGroup,{title:"\u9009\u9879",children:[(0,n.jsx)(Z.Z.Item,{disabled:!0,children:(0,n.jsx)(B.Z,{style:{width:"100%"},checked:t==null?void 0:t.rollback,onChange:function(f){return q.run({rollback:f.target.checked})},children:"\u542F\u7528\u64A4\u56DE\u6A21\u5F0F"})},"1"),(0,n.jsx)(Z.Z.Item,{disabled:!0,children:(0,n.jsx)(B.Z,{style:{width:"100%"},checked:t==null?void 0:t.force,onChange:function(f){return q.run({force:f.target.checked})},children:"\u542F\u7528\u5F3A\u5236\u901A\u9053\u6A21\u5F0F"})},"2")]}),(0,n.jsx)(Z.Z.Divider,{}),(0,n.jsx)(Z.Z.Item,{disabled:(t==null?void 0:t.status)<2,icon:(0,n.jsx)(l.Z,{}),onClick:le,children:"\u63A8\u9001"},"3")]})}),me=(0,n.jsx)(x.Z,{title:[(0,n.jsx)("span",{style:{color:"#333"},children:"\u5F53\u524D\u542F\u7528\u4E86\uFF1A"},"s"),(t==null?void 0:t.rollback)&&(0,n.jsx)(L.Z,{color:"orange",children:"\u64A4\u56DE\u6A21\u5F0F"}),(t==null?void 0:t.force)&&(0,n.jsx)(L.Z,{color:"orange",children:"\u5F3A\u5236\u6A21\u5F0F"})],color:"white",children:(0,n.jsx)(s.Z,{style:{color:"#faad14",marginRight:4}})}),he=(0,n.jsx)(x.Z,{title:(0,n.jsxs)("b",{children:["\u63A8\u9001\u5931\u8D25\uFF1A",t==null?void 0:t.error]}),color:"#cf1322",children:(0,n.jsx)(s.Z,{style:{color:"#cf1322"}})});return(0,n.jsx)(T.Z,{spinning:te||ee.loading||k.loading||q.loading,children:(0,n.jsxs)(O.Z,{title:(0,n.jsxs)(n.Fragment,{children:[K," ",((t==null?void 0:t.rollback)||(t==null?void 0:t.force))&&me,(t==null?void 0:t.status)===3&&he]}),extra:t&&pe,bordered:!1,className:R().channelCard,actions:[(0,n.jsx)(m.Z,{arrow:!0,placement:"topCenter",overlay:fe,children:(0,n.jsx)(C.Z,{})},"ellipsis")],children:[(0,n.jsx)("p",{children:"\u63A8\u9001\u9009\u9879"}),(0,n.jsx)(x.Z,{title:t!=null&&t.push?t.pushName+" ("+t.push+")":"\u6682\u65E0\u63A8\u9001\u7248\u672C",children:(0,n.jsx)(a.Z,{value:de,loading:ee.loading,bordered:!1,disabled:ie,size:"large",optionLabelProp:"title",className:R().cardSelect,dropdownMatchSelectWidth:!1,onChange:ce,showSearch:!0,filterOption:function(f,X){var H;return((H=X.title)===null||H===void 0?void 0:H.toLowerCase().indexOf(f.toLowerCase()))>=0},onSearch:function(f){f&&N.run(f)},children:N.loading?(0,n.jsx)(a.Z.Option,{value:-2,disabled:!0,children:(0,n.jsx)(T.Z,{size:"small"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z.OptGroup,{label:"\u81EA\u52A8\u63A8\u9001",children:(0,n.jsxs)(a.Z.Option,{value:0,title:"\u6700\u65B0\u7248\u672C",children:["\u6700\u65B0\u7248\u672C",(0,n.jsx)("br",{}),(0,n.jsx)("span",{style:{color:"#AAAAAA"},children:(w=N.data)!==null&&w!==void 0&&w.last?((V=N.data)===null||V===void 0?void 0:V.last.versionName)+" ("+((Y=N.data)===null||Y===void 0?void 0:Y.last.build)+")":"\u6682\u65E0\u7248\u672C"})]})}),(0,n.jsxs)(a.Z.OptGroup,{label:"\u624B\u52A8\u9009\u62E9",children:[(0,n.jsx)(a.Z.Option,{value:-1,title:"\u4E0D\u63A8\u9001",children:"\u4E0D\u63A8\u9001"}),(t==null?void 0:t.config)>0&&(0,n.jsx)(a.Z.Option,{value:t.config,title:t.configName+" ("+t.config+")",children:t.configName+" ("+t.config+")"},t.config),(G=N.data)===null||G===void 0||(Q=G.list)===null||Q===void 0?void 0:Q.map(function(E){if(E.build!==(t==null?void 0:t.config))return(0,n.jsx)(a.Z.Option,{value:E.build,title:E.versionName+" ("+E.build+")",children:E.versionName+" ("+E.build+")"},E.build)})]})]})})}),(0,n.jsx)("p",{style:{marginTop:20},children:"\u5F53\u524D\u63A8\u9001\u7684\u7248\u672C"}),(0,n.jsx)("p",{children:t!=null&&t.push?t.pushName+" ("+t.push+")":"\u65E0"})]})})};I.Z=r},57845:function(S,I,e){"use strict";e.d(I,{e:function(){return O}});var o=e(67294),O=function(a,d){var m=o.useRef(!1);o.useEffect(function(){if(m.current){var A=a();return function(){return A&&A()}}else m.current=!0},d),o.useEffect(function(){return function(){return m.current=!1}},[])}},65476:function(S,I,e){"use strict";var o=e(96132),O=e(43358),p=e(90290),a=e(20228),d=e(11382),m=e(37730),A=e(33565),x=e(81211),D=e(67294),Z=e(23279),W=e.n(Z),B=e(85893),j=function(g){var v=g.fetchOptions,h=g.debounceTimeout,T=h===void 0?500:h,c=g.showAll,P=g.setMyFetching,b=g.setMyOption,$=(0,x.Z)(g,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),R=D.useState(!1),i=(0,A.Z)(R,2),_=i[0],M=i[1],u=D.useState(!1),l=(0,A.Z)(u,2),s=l[0],C=l[1],n=D.useState(c?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),r=(0,A.Z)(n,2),ne=r[0],y=r[1];D.useEffect(function(){_||y(b)},[b]),D.useEffect(function(){_||y(b)},[P]);var w=D.useRef(0),V=D.useMemo(function(){var Y=function(Q){w.current+=1;var F=w.current;y([]),C(!0),v(Q).then(function(U){F===w.current&&(U.data.forEach(function(K){K.label=K.text,delete K.text,K.value=K.id,delete K.id}),y(c?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,m.Z)(U.data)):U.data),C(!1))})};return W()(Y,T)},[v,T]);return(0,B.jsx)(p.Z,(0,o.Z)((0,o.Z)({filterOption:!1,onSearch:V},$),{},{options:s?[{value:"",label:(0,B.jsx)(d.Z,{size:"small"}),disabled:!0}]:ne,onDropdownVisibleChange:function(G){G&&!_&&(M(!0),C(!0),V())}}))};I.Z=j},13718:function(S,I,e){"use strict";e.d(I,{M:function(){return o}});var o=60},84744:function(S,I,e){"use strict";e.d(I,{w$:function(){return A},pb:function(){return x},aF:function(){return Z},Nm:function(){return B},rZ:function(){return L},yC:function(){return v},h$:function(){return T},wW:function(){return P},eP:function(){return $},IH:function(){return i},IV:function(){return M}});var o=e(96132),O=e(57361),p=e(9754),a=e.n(p),d=e(18811),m=e(21010),A={UNKNOWN:0,NORMAL:1,PENDING:2,FAILED:3,DISABLED:4,DELETED:5,BANNED:6,CHANGED:7,getText:function(s){return["\u672A\u77E5","\u6B63\u5E38","\u5BA1\u6838\u4E2D","\u5BA1\u6838\u672A\u901A\u8FC7","\u5DF2\u4E0B\u67B6","\u7B49\u5F85\u5220\u9664","\u8FDD\u89C4\u5C01\u7981","\u6B63\u5E38-\u5F85\u5BA1\u6838"][s]},getColor:function(s){return["#a8071a","#237804","#0050b3","#a8071a","#faad14","#a8071a","#a8071a","#0050b3"][s]}};function x(l,s){return D.apply(this,arguments)}function D(){return D=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/getList",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),D.apply(this,arguments)}function Z(l,s){return W.apply(this,arguments)}function W(){return W=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/getAll",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),W.apply(this,arguments)}function B(l,s){return j.apply(this,arguments)}function j(){return j=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/getDetail",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),j.apply(this,arguments)}function L(l,s){return g.apply(this,arguments)}function g(){return g=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/getStatistic",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),g.apply(this,arguments)}function v(l,s){return h.apply(this,arguments)}function h(){return h=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/search",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),h.apply(this,arguments)}function T(l,s){return c.apply(this,arguments)}function c(){return c=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/disable",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),c.apply(this,arguments)}function P(l,s){return b.apply(this,arguments)}function b(){return b=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/edit",{method:"GET",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),b.apply(this,arguments)}function $(l,s){return R.apply(this,arguments)}function R(){return R=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/edit",{method:"POST",data:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),R.apply(this,arguments)}function i(l,s){return _.apply(this,arguments)}function _(){return _=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/add",{method:"POST",data:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),_.apply(this,arguments)}function M(l,s){return u.apply(this,arguments)}function u(){return u=(0,O.Z)(a().mark(function l(s,C){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)(d.s3+"app/delete",{method:"POST",data:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return r.stop()}},l)})),u.apply(this,arguments)}},56837:function(S,I,e){"use strict";e.d(I,{E4:function(){return m},lR:function(){return x},Tf:function(){return Z},FW:function(){return B},Ov:function(){return L},VF:function(){return v},wp:function(){return T},m7:function(){return P},qE:function(){return $}});var o=e(57361),O=e(9754),p=e.n(O),a=e(18811),d=e(21010);function m(i){return A.apply(this,arguments)}function A(){return A=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/getVersionList",{method:"GET",params:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),A.apply(this,arguments)}function x(i){return D.apply(this,arguments)}function D(){return D=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/getStatus",{method:"GET",params:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),D.apply(this,arguments)}function Z(i){return W.apply(this,arguments)}function W(){return W=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/set",{method:"POST",data:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),W.apply(this,arguments)}function B(i){return j.apply(this,arguments)}function j(){return j=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/getOptions",{method:"GET",params:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),j.apply(this,arguments)}function L(i){return g.apply(this,arguments)}function g(){return g=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/setOptions",{method:"POST",data:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),g.apply(this,arguments)}function v(i){return h.apply(this,arguments)}function h(){return h=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/push",{method:"POST",data:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),h.apply(this,arguments)}function T(i){return c.apply(this,arguments)}function c(){return c=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/enable",{method:"GET",params:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),c.apply(this,arguments)}function P(i){return b.apply(this,arguments)}function b(){return b=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/simulate",{method:"POST",data:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),b.apply(this,arguments)}function $(i){return R.apply(this,arguments)}function R(){return R=(0,o.Z)(p().mark(function i(_){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)(a.s3+"update/setChannelOptions",{method:"POST",data:_,credentials:"include"}));case 1:case"end":return u.stop()}},i)})),R.apply(this,arguments)}},28030:function(S,I,e){"use strict";e.d(I,{Ax:function(){return A},gp:function(){return x},IV:function(){return B},h$:function(){return L}});var o=e(96132),O=e(57361),p=e(9754),a=e.n(p),d=e(18811),m=e(21010),A={UNKNOWN:0,NORMAL:1,PENDING:2,FAILED:3,DISABLED:4,DELETED:5,BANNED:6,CHANGED:7,UNPUBLISHED:8,getText:function(h){return["\u672A\u77E5","\u6B63\u5E38","\u5BA1\u6838\u4E2D","\u5BA1\u6838\u672A\u901A\u8FC7","\u5DF2\u4E0B\u67B6","\u7B49\u5F85\u5220\u9664","\u8FDD\u89C4\u5C01\u7981","\u6B63\u5E38-\u5F85\u5BA1\u6838","\u672A\u53D1\u5E03"][h]},getColor:function(h){return["#a8071a","#237804","#0050b3","#a8071a","#faad14","#a8071a","#a8071a","#0050b3","#faad14"][h]}};function x(v,h){return D.apply(this,arguments)}function D(){return D=(0,O.Z)(a().mark(function v(h,T){return a().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,m.WY)(d.s3+"version/getList",{method:"GET",params:(0,o.Z)({},h),credentials:"include"}));case 1:case"end":return P.stop()}},v)})),D.apply(this,arguments)}function Z(v){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime.mark(function v(h){return _regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",request(dev_url+"version/push",{method:"POST",data:h,credentials:"include"}));case 1:case"end":return c.stop()}},v)})),W.apply(this,arguments)}function B(v){return j.apply(this,arguments)}function j(){return j=(0,O.Z)(a().mark(function v(h){return a().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,m.WY)(d.s3+"version/delete",{method:"POST",data:h,credentials:"include"}));case 1:case"end":return c.stop()}},v)})),j.apply(this,arguments)}function L(v){return g.apply(this,arguments)}function g(){return g=(0,O.Z)(a().mark(function v(h){return a().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,m.WY)(d.s3+"version/disable",{method:"POST",params:(0,o.Z)({},h),credentials:"include"}));case 1:case"end":return c.stop()}},v)})),g.apply(this,arguments)}}}]);
