(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[500],{53266:function(W){W.exports={tabs:"tabs___YEat-"}},19151:function(W,O,e){"use strict";e.r(O),e.d(O,{default:function(){return Q}});var l=e(33565),i=e(57361),D=e(9754),u=e.n(D),d=e(38315),_=e(96132),I=e(22385),h=e(69713),v=e(37730),f=e(21349),A=e(23723),o=e(67294),c=e(84787),T=e(53266),j=e.n(T),E=e(21010),s=e(84744),a=e(17744),g=e(7110),m=e(56905),t=e(52778),J=e(4084),r=e(85893),L=t.Z.Statistic,V=t.Z.Divider,X=function(P){var x=P.loading,n=P.active,M=(0,o.useState)(!1),p=(0,l.Z)(M,2),S=p[0],R=p[1];return(0,r.jsx)(J.Z,{onResize:function($){R($.width<696)},children:(0,r.jsxs)(t.Z.Group,{loading:x,direction:S?"column":"row",style:{marginBottom:24},children:[(0,r.jsx)(t.Z,{statistic:{title:"\u5F53\u524D\u5B9E\u4F8B\u6570",value:(n==null?void 0:n.current)||0,description:(0,r.jsx)(L,{title:"\u6628\u65E5\u5CF0\u503C",value:(n==null?void 0:n.max)||0})}}),(0,r.jsx)(V,{type:S?"horizontal":"vertical"}),(0,r.jsx)(t.Z,{statistic:{title:"24\u5C0F\u65F6\u6D3B\u8DC3\u5EA6",value:n==null?void 0:n.h24,description:(0,r.jsx)(L,{title:"\u6628\u65E5\u540C\u6BD4",value:(n==null?void 0:n.hc)==0?"-":(n==null?void 0:n.hc)+"%",trend:(n==null?void 0:n.hc)<0?"down":"up"})},chartPlacement:"left"}),(0,r.jsx)(t.Z,{statistic:{title:"\u672C\u6708\u6D3B\u8DC3\u5EA6",value:n==null?void 0:n.month,description:(0,r.jsx)(L,{title:"\u4E0A\u6708\u540C\u6BD4",value:(n==null?void 0:n.mc)==0?"-":(n==null?void 0:n.mc)+"%",trend:(n==null?void 0:n.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},k=X,G=function(P){var x,n,M,p,S,R=P.showAll,K=P.userId,$=o.useState("hour"),H=(0,l.Z)($,2),C=H[0],ne=H[1];o.useEffect(function(){Z.run(),C==="hour"?y.reset():y.run()},[K]);var Z=(0,E.QT)(function(){return R?(0,m.Pf)({hour:!0,base:!0,userId:K}):(0,m.s8)({hour:!0,base:!0})},{manual:!0}),y=(0,E.QT)(function(){return R?(0,m.Pf)({month:!0,userId:K}):(0,m.s8)({month:!0})},{manual:!0}),w=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(Y,z){return(0,r.jsx)(h.Z,{placement:"top",title:z.appId,children:(0,r.jsx)("a",{onClick:function(){return E.m8.push("/app/detail/"+z.id)},children:Y})})}}].concat((0,v.Z)(R?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(Y,z){return(0,r.jsxs)(r.Fragment,{children:[z.nick," (",z.email,")"]})}}]:[]),[{title:"\u6D3B\u8DC3\u5EA6",dataIndex:"active",key:"active",hideInSearch:!0},{title:"\u5E73\u5747\u6D3B\u8DC3\u8BBE\u5907",dataIndex:"device",key:"device",hideInSearch:!0},{title:"\u542F\u52A8\u6B21\u6570",dataIndex:"count",key:"count",hideInSearch:!0}]),se={appendPadding:10,height:400,data:C==="hour"?((x=Z.data)===null||x===void 0?void 0:x.hour.rank)||[]:((n=y.data)===null||n===void 0?void 0:n.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:C==="hour"?Z.loading:y.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},re=(0,r.jsxs)(c.ZP,{split:"horizontal",children:[(0,r.jsx)(c.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,r.jsx)(a.ZP,{headerTitle:"\u6D3B\u8DC3\u5E94\u7528\u5217\u8868",dataSource:C==="hour"?((M=Z.data)===null||M===void 0?void 0:M.hour.list)||[]:((p=y.data)===null||p===void 0?void 0:p.month.list)||[],loading:C==="hour"?Z.loading:y.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:w})}),(0,r.jsx)(c.ZP,{title:"TOP10\u6D3B\u8DC3\u5E94\u7528",style:{height:500,position:"relative"},children:(0,r.jsx)(g.Z,(0,_.Z)({},se))})]});return(0,r.jsx)(f.Z,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)(A.Z,{}),children:(0,r.jsx)(k,{loading:Z.loading,active:(S=Z.data)===null||S===void 0?void 0:S.base})}),(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)(A.Z,{}),children:(0,r.jsxs)(c.ZP,{className:j().tabs,tabs:{tabPosition:"top",size:"large",activeKey:C,onChange:function(Y){ne(Y),Y==="month"&&!y.data&&!y.loading&&y.run()}},children:[(0,r.jsx)(c.ZP.TabPane,{tab:"24\u5C0F\u65F6\u62A5",cardProps:{bodyStyle:{padding:0}},children:re},"hour"),(0,r.jsx)(c.ZP.TabPane,{tab:"\u6708\u62A5",cardProps:{bodyStyle:{padding:0}},children:re},"month")]})})]})})},q=G,F=function(){return(0,r.jsx)(r.Fragment,{})},ee=F,N=e(65476),te=e(6637);function U(b){return B.apply(this,arguments)}function B(){return B=(0,i.Z)(u().mark(function b(P){return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,te.y)({search:P}));case 1:case"end":return n.stop()}},b)})),B.apply(this,arguments)}var Q=function(b){var P=b.route.name==="all-instance",x="overview",n=(0,o.useState)(0),M=(0,l.Z)(n,2),p=M[0],S=M[1],R=(0,r.jsx)(q,{showAll:P,userId:p}),K=o.useState(R),$=(0,l.Z)(K,2),H=$[0],C=$[1],ne=(0,r.jsx)(ee,{});(0,o.useEffect)(function(){Z()},[p]);var Z=function(){C(x==="overview"?R:ne)};return(0,r.jsx)(d.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],content:P&&(0,r.jsxs)(r.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,r.jsx)(N.Z,{showAll:!0,showSearch:!0,placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:U,defaultValue:0,style:{width:"250px"},onChange:function(w){S(w)}})]}),onTabChange:function(w){x=w,Z()},children:H})}},65476:function(W,O,e){"use strict";var l=e(96132),i=e(43358),D=e(90290),u=e(20228),d=e(11382),_=e(37730),I=e(33565),h=e(81211),v=e(67294),f=e(23279),A=e.n(f),o=e(85893),c=function(j){var E=j.fetchOptions,s=j.debounceTimeout,a=s===void 0?500:s,g=j.showAll,m=j.setMyFetching,t=j.setMyOption,J=(0,h.Z)(j,["fetchOptions","debounceTimeout","showAll","setMyFetching","setMyOption"]),r=v.useState(!1),L=(0,I.Z)(r,2),V=L[0],X=L[1],k=v.useState(!1),G=(0,I.Z)(k,2),q=G[0],F=G[1],ee=v.useState(g?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}]:[]),N=(0,I.Z)(ee,2),te=N[0],U=N[1];v.useEffect(function(){V||U(t)},[t]),v.useEffect(function(){V||U(t)},[m]);var B=v.useRef(0),Q=v.useMemo(function(){var b=function(x){B.current+=1;var n=B.current;U([]),F(!0),E(x).then(function(M){n===B.current&&(M.data.forEach(function(p){p.label=p.text,delete p.text,p.value=p.id,delete p.id}),U(g?[{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,_.Z)(M.data)):M.data),F(!1))})};return A()(b,a)},[E,a]);return(0,o.jsx)(D.Z,(0,l.Z)((0,l.Z)({filterOption:!1,onSearch:Q},J),{},{options:q?[{value:0,label:(0,o.jsx)(d.Z,{size:"small"})}]:te,onDropdownVisibleChange:function(P){P&&!V&&(X(!0),F(!0),Q())}}))};O.Z=c},23723:function(W,O,e){"use strict";var l=e(20228),i=e(11382),D=e(85893);O.Z=function(){return(0,D.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,D.jsx)(i.Z,{size:"large"})})}},84744:function(W,O,e){"use strict";e.d(O,{pb:function(){return I},aF:function(){return v},Nm:function(){return A},rZ:function(){return c},yC:function(){return j}});var l=e(96132),i=e(57361),D=e(9754),u=e.n(D),d=e(18811),_=e(21010);function I(s,a){return h.apply(this,arguments)}function h(){return h=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"app/getList",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),h.apply(this,arguments)}function v(s,a){return f.apply(this,arguments)}function f(){return f=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"app/getAll",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),f.apply(this,arguments)}function A(s,a){return o.apply(this,arguments)}function o(){return o=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"app/getDetail",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),o.apply(this,arguments)}function c(s,a){return T.apply(this,arguments)}function T(){return T=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"app/getStatistic",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),T.apply(this,arguments)}function j(s,a){return E.apply(this,arguments)}function E(){return E=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"app/search",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),E.apply(this,arguments)}},56905:function(W,O,e){"use strict";e.d(O,{s8:function(){return I},Pf:function(){return v},P:function(){return A},K1:function(){return c},sg:function(){return j}});var l=e(96132),i=e(57361),D=e(9754),u=e.n(D),d=e(18811),_=e(21010);function I(s,a){return h.apply(this,arguments)}function h(){return h=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"analysis/getInstance",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),h.apply(this,arguments)}function v(s,a){return f.apply(this,arguments)}function f(){return f=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"analysis/getAllInstance",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),f.apply(this,arguments)}function A(s,a){return o.apply(this,arguments)}function o(){return o=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"analysis/getInstall",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),o.apply(this,arguments)}function c(s,a){return T.apply(this,arguments)}function T(){return T=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"analysis/getAllInstall",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),T.apply(this,arguments)}function j(s,a){return E.apply(this,arguments)}function E(){return E=(0,i.Z)(u().mark(function s(a,g){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)(d.s3+"analysis/getAppInstall",{method:"POST",params:(0,l.Z)({},a),credentials:"include"}));case 1:case"end":return t.stop()}},s)})),E.apply(this,arguments)}},6637:function(W,O,e){"use strict";e.d(O,{y:function(){return I}});var l=e(96132),i=e(57361),D=e(9754),u=e.n(D),d=e(18811),_=e(21010);function I(v,f){return h.apply(this,arguments)}function h(){return h=(0,i.Z)(u().mark(function v(f,A){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,_.WY)(d.s3+"user/search",{method:"POST",params:(0,l.Z)({},f),credentials:"include"}));case 1:case"end":return c.stop()}},v)})),h.apply(this,arguments)}}}]);
