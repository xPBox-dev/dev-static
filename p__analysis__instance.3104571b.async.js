(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[500],{85760:function(R){R.exports={tabs:"tabs___3_fnT"}},79666:function(R,O,e){"use strict";e.r(O),e.d(O,{default:function(){return de}});var p=e(43358),f=e(90290),d=e(33565),u=e(57361),D=e(9754),i=e.n(D),y=e(49675),c=e(96132),E=e(22385),j=e(69713),W=e(37730),M=e(21349),g=e(23723),_=e(67294),a=e(84787),l=e(85760),I=e.n(l),m=e(21010),r=e(84744),te=e(17744),Q=e(7110),U=e(18811);function w(v,o){return K.apply(this,arguments)}function K(){return K=(0,u.Z)(i().mark(function v(o,P){return i().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.WY)(U.s3+"analysis/getInstance",{method:"POST",params:(0,c.Z)({},o),credentials:"include"}));case 1:case"end":return s.stop()}},v)})),K.apply(this,arguments)}function $(v,o){return F.apply(this,arguments)}function F(){return F=(0,u.Z)(i().mark(function v(o,P){return i().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.WY)(U.s3+"analysis/getAllInstance",{method:"POST",params:(0,c.Z)({},o),credentials:"include"}));case 1:case"end":return s.stop()}},v)})),F.apply(this,arguments)}var T=e(52778),ne=e(4084),n=e(85893),V=T.Z.Statistic,H=T.Z.Divider,z=function(o){var P=o.loading,t=o.active,s=(0,_.useState)(!1),Z=(0,d.Z)(s,2),b=Z[0],A=Z[1];return(0,n.jsx)(ne.Z,{onResize:function(L){A(L.width<696)},children:(0,n.jsxs)(T.Z.Group,{loading:P,direction:b?"column":"row",style:{marginBottom:24},children:[(0,n.jsx)(T.Z,{statistic:{title:"\u5F53\u524D\u5B9E\u4F8B\u6570",value:(t==null?void 0:t.current)||0,description:(0,n.jsx)(V,{title:"\u6628\u65E5\u5CF0\u503C",value:(t==null?void 0:t.max)||0})}}),(0,n.jsx)(H,{type:b?"horizontal":"vertical"}),(0,n.jsx)(T.Z,{statistic:{title:"24\u5C0F\u65F6\u6D3B\u8DC3\u5EA6",value:t==null?void 0:t.h24,description:(0,n.jsx)(V,{title:"\u6628\u65E5\u540C\u6BD4",value:(t==null?void 0:t.hc)==0?"-":(t==null?void 0:t.hc)+"%",trend:(t==null?void 0:t.hc)<0?"down":"up"})},chartPlacement:"left"}),(0,n.jsx)(T.Z,{statistic:{title:"\u672C\u6708\u6D3B\u8DC3\u5EA6",value:t==null?void 0:t.month,description:(0,n.jsx)(V,{title:"\u4E0A\u6708\u540C\u6BD4",value:(t==null?void 0:t.mc)==0?"-":(t==null?void 0:t.mc)+"%",trend:(t==null?void 0:t.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},J=z,X=function(o){var P,t,s,Z,b,A=o.showAll,B=o.userId,L=_.useState("hour"),ee=(0,d.Z)(L,2),C=ee[0],ue=ee[1];_.useEffect(function(){x.run(),C==="hour"?h.reset():h.run()},[B]);var x=(0,m.QT)(function(){return A?$({hour:!0,base:!0,userId:B}):w({hour:!0,base:!0})},{manual:!0}),h=(0,m.QT)(function(){return A?$({month:!0,userId:B}):w({month:!0})},{manual:!0}),Y=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(G,N){return(0,n.jsx)(j.Z,{placement:"top",title:N.appId,children:(0,n.jsx)("a",{onClick:function(){return m.m8.push("/app/detail/"+N.id)},children:G})})}}].concat((0,W.Z)(A?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(G,N){return(0,n.jsxs)(n.Fragment,{children:[N.nick," (",N.email,")"]})}}]:[]),[{title:"\u6D3B\u8DC3\u5EA6",dataIndex:"active",key:"active",hideInSearch:!0},{title:"\u5E73\u5747\u6D3B\u8DC3\u8BBE\u5907",dataIndex:"device",key:"device",hideInSearch:!0},{title:"\u542F\u52A8\u6B21\u6570",dataIndex:"count",key:"count",hideInSearch:!0}]),ce={appendPadding:10,height:400,data:C==="hour"?((P=x.data)===null||P===void 0?void 0:P.hour.rank)||[]:((t=h.data)===null||t===void 0?void 0:t.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:C==="hour"?x.loading:h.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},le=(0,n.jsxs)(a.ZP,{split:"horizontal",children:[(0,n.jsx)(a.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,n.jsx)(te.ZP,{sticky:{offsetHeader:47},headerTitle:"\u6D3B\u8DC3\u5E94\u7528\u5217\u8868",dataSource:C==="hour"?((s=x.data)===null||s===void 0?void 0:s.hour.list)||[]:((Z=h.data)===null||Z===void 0?void 0:Z.month.list)||[],loading:C==="hour"?x.loading:h.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:Y})}),(0,n.jsx)(a.ZP,{title:"TOP10\u6D3B\u8DC3\u5E94\u7528",style:{height:500,position:"relative"},children:(0,n.jsx)(Q.Z,(0,c.Z)({},ce))})]});return(0,n.jsx)(M.Z,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.Suspense,{fallback:(0,n.jsx)(g.Z,{}),children:(0,n.jsx)(J,{loading:x.loading,active:(b=x.data)===null||b===void 0?void 0:b.base})}),(0,n.jsx)(_.Suspense,{fallback:(0,n.jsx)(g.Z,{}),children:(0,n.jsxs)(a.ZP,{className:I().tabs,tabs:{tabPosition:"top",size:"large",activeKey:C,onChange:function(G){ue(G),G==="month"&&!h.data&&!h.loading&&h.run()}},children:[(0,n.jsx)(a.ZP.TabPane,{tab:"24\u5C0F\u65F6\u62A5",cardProps:{bodyStyle:{padding:0}},children:le},"hour"),(0,n.jsx)(a.ZP.TabPane,{tab:"\u6708\u62A5",cardProps:{bodyStyle:{padding:0}},children:le},"month")]})})]})})},k=X,ae=function(){return(0,n.jsx)(n.Fragment,{})},re=ae,q=e(65476),S=e(6637);function ie(v){return se.apply(this,arguments)}function se(){return se=(0,u.Z)(i().mark(function v(o){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.y)({search:o}));case 1:case"end":return t.stop()}},v)})),se.apply(this,arguments)}var de=function(v){var o=v.route.name==="all-instance",P="overview",t=(0,_.useState)(0),s=(0,d.Z)(t,2),Z=s[0],b=s[1],A=(0,n.jsx)(k,{showAll:o,userId:Z}),B=_.useState(A),L=(0,d.Z)(B,2),ee=L[0],C=L[1],ue=(0,n.jsx)(re,{});(0,_.useEffect)(function(){x()},[Z]);var x=function(){C(P==="overview"?A:ue)};return(0,n.jsx)(y.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],content:o&&(0,n.jsxs)(n.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,n.jsx)(q.Z,{showSearch:!0,placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:ie,defaultValue:0,style:{width:"250px"},onChange:function(Y){b(Y)}})]}),tabBarExtraContent:(0,n.jsx)(f.Z,{}),onTabChange:function(Y){P=Y,x()},children:ee})}},65476:function(R,O,e){"use strict";var p=e(96132),f=e(43358),d=e(90290),u=e(20228),D=e(11382),i=e(37730),y=e(33565),c=e(81211),E=e(67294),j=e(23279),W=e.n(j),M=e(85893),g=function(a){var l=a.fetchOptions,I=a.debounceTimeout,m=I===void 0?500:I,r=(0,c.Z)(a,["fetchOptions","debounceTimeout"]),te=E.useState(!1),Q=(0,y.Z)(te,2),U=Q[0],w=Q[1],K=E.useState(!1),$=(0,y.Z)(K,2),F=$[0],T=$[1],ne=E.useState([{value:0,label:"\u663E\u793A\u603B\u8BA1"}]),n=(0,y.Z)(ne,2),V=n[0],H=n[1],z=E.useRef(0),J=E.useMemo(function(){var X=function(ae){z.current+=1;var re=z.current;H([]),T(!0),l(ae).then(function(q){re===z.current&&(q.data.forEach(function(S){S.label=S.text,delete S.text,S.value=S.id,delete S.id}),H([{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,i.Z)(q.data))),T(!1))})};return W()(X,m)},[l,m]);return(0,M.jsx)(d.Z,(0,p.Z)((0,p.Z)({filterOption:!1,onSearch:J},r),{},{options:F?[{value:0,label:(0,M.jsx)(D.Z,{size:"small"})}]:V,onDropdownVisibleChange:function(k){k&&!U&&(console.log(U),w(!0),J())}}))};O.Z=g},23723:function(R,O,e){"use strict";var p=e(20228),f=e(11382),d=e(85893);O.Z=function(){return(0,d.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,d.jsx)(f.Z,{size:"large"})})}},84744:function(R,O,e){"use strict";e.d(O,{pb:function(){return y},aF:function(){return E},Nm:function(){return W},rZ:function(){return g}});var p=e(96132),f=e(57361),d=e(9754),u=e.n(d),D=e(18811),i=e(21010);function y(a,l){return c.apply(this,arguments)}function c(){return c=(0,f.Z)(u().mark(function a(l,I){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(D.s3+"app/getList",{method:"POST",params:(0,p.Z)({},l),credentials:"include"}));case 1:case"end":return r.stop()}},a)})),c.apply(this,arguments)}function E(a,l){return j.apply(this,arguments)}function j(){return j=(0,f.Z)(u().mark(function a(l,I){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(D.s3+"app/getAll",{method:"POST",params:(0,p.Z)({},l),credentials:"include"}));case 1:case"end":return r.stop()}},a)})),j.apply(this,arguments)}function W(a,l){return M.apply(this,arguments)}function M(){return M=(0,f.Z)(u().mark(function a(l,I){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(D.s3+"app/getDetail",{method:"POST",params:(0,p.Z)({},l),credentials:"include"}));case 1:case"end":return r.stop()}},a)})),M.apply(this,arguments)}function g(a,l){return _.apply(this,arguments)}function _(){return _=(0,f.Z)(u().mark(function a(l,I){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)(D.s3+"app/getStatistic",{method:"POST",params:(0,p.Z)({},l),credentials:"include"}));case 1:case"end":return r.stop()}},a)})),_.apply(this,arguments)}},6637:function(R,O,e){"use strict";e.d(O,{y:function(){return y}});var p=e(96132),f=e(57361),d=e(9754),u=e.n(d),D=e(18811),i=e(21010);function y(E,j){return c.apply(this,arguments)}function c(){return c=(0,f.Z)(u().mark(function E(j,W){return u().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,i.WY)(D.s3+"user/search",{method:"POST",params:(0,p.Z)({},j),credentials:"include"}));case 1:case"end":return g.stop()}},E)})),c.apply(this,arguments)}}}]);
