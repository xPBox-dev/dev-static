(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[110],{33053:function(R){R.exports={tabs:"tabs___2_QYX"}},55457:function(R,g,e){"use strict";e.r(g),e.d(g,{default:function(){return J}});var o=e(43358),i=e(90290),_=e(33565),l=e(57361),c=e(9754),d=e.n(c),j=e(49675),v=e(96132),f=e(22385),m=e(69713),T=e(37730),E=e(21349),P=e(23723),u=e(67294),a=e(84787),s=e(33053),O=e.n(s),p=e(21010),t=e(84744),q=e(17744),z=e(7110),W=e(56905),b=e(52778),ee=e(4084),n=e(85893),L=b.Z.Statistic,G=b.Z.Divider,te=function(x){var I=x.loading,r=x.active,Z=(0,u.useState)(!1),M=(0,_.Z)(Z,2),S=M[0],A=M[1];return(0,n.jsx)(ee.Z,{onResize:function(K){A(K.width<696)},children:(0,n.jsxs)(b.Z.Group,{loading:I,direction:S?"column":"row",style:{marginBottom:24},children:[(0,n.jsx)(b.Z,{statistic:{title:"\u4ECA\u65E5\u5B89\u88C5\u91CF",value:(r==null?void 0:r.current)||0,description:(0,n.jsx)(L,{title:"\u672C\u6708\u5CF0\u503C",value:(r==null?void 0:r.max)||0})}}),(0,n.jsx)(G,{type:S?"horizontal":"vertical"}),(0,n.jsx)(b.Z,{statistic:{title:"\u6628\u65E5\u5B89\u88C5\u91CF",value:r==null?void 0:r.yesterday,description:(0,n.jsx)(L,{title:"\u524D\u65E5\u540C\u6BD4",value:(r==null?void 0:r.yc)==0?"-":(r==null?void 0:r.yc)+"%",trend:(r==null?void 0:r.yc)<0?"down":"up"})},chartPlacement:"left"}),(0,n.jsx)(b.Z,{statistic:{title:"\u672C\u6708\u5B89\u88C5\u91CF",value:r==null?void 0:r.month,description:(0,n.jsx)(L,{title:"\u4E0A\u6708\u540C\u6BD4",value:(r==null?void 0:r.mc)==0?"-":(r==null?void 0:r.mc)+"%",trend:(r==null?void 0:r.mc)<0?"down":"up"})},chartPlacement:"left"})]})},"resize-observer")},N=te,ne=function(x){var I,r,Z,M,S,A=x.showAll,B=x.userId,K=u.useState("current"),k=(0,_.Z)(K,2),C=k[0],ae=k[1];u.useEffect(function(){y.run(),C==="current"?D.reset():D.run()},[B]);var y=(0,p.QT)(function(){return A?(0,W.K1)({current:!0,base:!0,userId:B}):(0,W.P)({current:!0,base:!0})},{manual:!0}),D=(0,p.QT)(function(){return A?(0,W.K1)({month:!0,userId:B}):(0,W.P)({month:!0})},{manual:!0}),V=[{title:"\u5E94\u7528\u540D",dataIndex:"appName",key:"appName",render:function(F,Y){return(0,n.jsx)(m.Z,{placement:"top",title:Y.appId,children:(0,n.jsx)("a",{onClick:function(){return p.m8.push("/app/detail/"+Y.id)},children:F})})}}].concat((0,T.Z)(A?[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",copyable:!0,render:function(F,Y){return(0,n.jsxs)(n.Fragment,{children:[Y.nick," (",Y.email,")"]})}}]:[]),[{title:"\u5E94\u7528\u5546\u5E97\u5B89\u88C5",dataIndex:"install_store",key:"install_store",hideInSearch:!0},{title:"\u5E94\u7528ID\u5B89\u88C5",dataIndex:"install_app_id",key:"install_app_id",hideInSearch:!0},{title:"\u6587\u4EF6\u5B89\u88C5",dataIndex:"install_file",key:"install_file",hideInSearch:!0},{title:"\u5E94\u7528\u5B89\u88C5",dataIndex:"install_app",key:"install_app",hideInSearch:!0},{title:"\u542F\u52A8\u5668\u5B89\u88C5",dataIndex:"install_loader",key:"install_loader",hideInSearch:!0}]),ue={appendPadding:10,height:400,data:C==="current"?((I=y.data)===null||I===void 0?void 0:I.current.rank)||[]:((r=D.data)===null||r===void 0?void 0:r.month.rank)||[],angleField:"value",colorField:"type",radius:.8,loading:C==="current"?y.loading:D.loading,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},se=(0,n.jsxs)(a.ZP,{split:"horizontal",children:[(0,n.jsx)(a.ZP,{bodyStyle:{padding:0},style:{marginTop:10},children:(0,n.jsx)(q.ZP,{headerTitle:"\u5B89\u88C5\u91CF\u8BE6\u60C5",dataSource:C==="current"?((Z=y.data)===null||Z===void 0?void 0:Z.current.list)||[]:((M=D.data)===null||M===void 0?void 0:M.month.list)||[],loading:C==="current"?y.loading:D.loading,rowKey:"id",search:!1,scroll:{x:600},options:{fullScreen:!0,reload:!0,setting:!0},columns:V})}),(0,n.jsx)(a.ZP,{title:"TOP10\u5B89\u88C5\u91CF\u5E94\u7528",style:{height:500,position:"relative"},children:(0,n.jsx)(z.Z,(0,v.Z)({},ue))})]});return(0,n.jsx)(E.Z,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Suspense,{fallback:(0,n.jsx)(P.Z,{}),children:(0,n.jsx)(N,{loading:y.loading,active:(S=y.data)===null||S===void 0?void 0:S.base})}),(0,n.jsx)(u.Suspense,{fallback:(0,n.jsx)(P.Z,{}),children:(0,n.jsxs)(a.ZP,{className:O().tabs,tabs:{tabPosition:"top",size:"large",activeKey:C,onChange:function(F){ae(F),F==="month"&&!D.data&&!D.loading&&D.run()}},children:[(0,n.jsx)(a.ZP.TabPane,{tab:"\u4ECA\u65E5",cardProps:{bodyStyle:{padding:0}},children:se},"current"),(0,n.jsx)(a.ZP.TabPane,{tab:"\u672C\u6708",cardProps:{bodyStyle:{padding:0}},children:se},"month")]})})]})})},Q=ne,U=function(){return(0,n.jsx)(n.Fragment,{})},w=U,X=e(65476),H=e(6637);function re(h){return $.apply(this,arguments)}function $(){return $=(0,l.Z)(d().mark(function h(x){return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,H.y)({search:x}));case 1:case"end":return r.stop()}},h)})),$.apply(this,arguments)}var J=function(h){var x=h.route.name==="all-install",I="overview",r=(0,u.useState)(0),Z=(0,_.Z)(r,2),M=Z[0],S=Z[1],A=(0,n.jsx)(Q,{showAll:x,userId:M}),B=u.useState(A),K=(0,_.Z)(B,2),k=K[0],C=K[1],ae=(0,n.jsx)(w,{});(0,u.useEffect)(function(){y()},[M]);var y=function(){C(I==="overview"?A:ae)};return(0,n.jsx)(j.ZP,{tabList:[{tab:"\u6982\u89C8",key:"overview"},{tab:"\u8BE6\u7EC6\u8D8B\u52BF",key:"detail"}],content:x&&(0,n.jsxs)(n.Fragment,{children:["\u5F00\u53D1\u8005\uFF1A",(0,n.jsx)(X.Z,{showSearch:!0,placeholder:"\u9009\u62E9\u7528\u6237",fetchOptions:re,defaultValue:0,style:{width:"250px"},onChange:function(V){S(V)}})]}),tabBarExtraContent:(0,n.jsx)(i.Z,{}),onTabChange:function(V){I=V,y()},children:k})}},65476:function(R,g,e){"use strict";var o=e(96132),i=e(43358),_=e(90290),l=e(20228),c=e(11382),d=e(37730),j=e(33565),v=e(81211),f=e(67294),m=e(23279),T=e.n(m),E=e(85893),P=function(a){var s=a.fetchOptions,O=a.debounceTimeout,p=O===void 0?500:O,t=(0,v.Z)(a,["fetchOptions","debounceTimeout"]),q=f.useState(!1),z=(0,j.Z)(q,2),W=z[0],b=z[1],ee=f.useState(!1),n=(0,j.Z)(ee,2),L=n[0],G=n[1],te=f.useState([{value:0,label:"\u663E\u793A\u603B\u8BA1"}]),N=(0,j.Z)(te,2),ne=N[0],Q=N[1],U=f.useRef(0),w=f.useMemo(function(){var X=function(re){U.current+=1;var $=U.current;Q([]),G(!0),s(re).then(function(J){$===U.current&&(J.data.forEach(function(h){h.label=h.text,delete h.text,h.value=h.id,delete h.id}),Q([{value:0,label:"\u663E\u793A\u603B\u8BA1"}].concat((0,d.Z)(J.data))),G(!1))})};return T()(X,p)},[s,p]);return(0,E.jsx)(_.Z,(0,o.Z)((0,o.Z)({filterOption:!1,onSearch:w},t),{},{options:L?[{value:0,label:(0,E.jsx)(c.Z,{size:"small"})}]:ne,onDropdownVisibleChange:function(H){H&&!W&&(console.log(W),b(!0),w())}}))};g.Z=P},23723:function(R,g,e){"use strict";var o=e(20228),i=e(11382),_=e(85893);g.Z=function(){return(0,_.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,_.jsx)(i.Z,{size:"large"})})}},84744:function(R,g,e){"use strict";e.d(g,{pb:function(){return j},aF:function(){return f},Nm:function(){return T},rZ:function(){return P}});var o=e(96132),i=e(57361),_=e(9754),l=e.n(_),c=e(18811),d=e(21010);function j(a,s){return v.apply(this,arguments)}function v(){return v=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"app/getList",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),v.apply(this,arguments)}function f(a,s){return m.apply(this,arguments)}function m(){return m=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"app/getAll",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function T(a,s){return E.apply(this,arguments)}function E(){return E=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"app/getDetail",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function P(a,s){return u.apply(this,arguments)}function u(){return u=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"app/getStatistic",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),u.apply(this,arguments)}},56905:function(R,g,e){"use strict";e.d(g,{s8:function(){return j},Pf:function(){return f},P:function(){return T},K1:function(){return P}});var o=e(96132),i=e(57361),_=e(9754),l=e.n(_),c=e(18811),d=e(21010);function j(a,s){return v.apply(this,arguments)}function v(){return v=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"analysis/getInstance",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),v.apply(this,arguments)}function f(a,s){return m.apply(this,arguments)}function m(){return m=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"analysis/getAllInstance",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function T(a,s){return E.apply(this,arguments)}function E(){return E=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"analysis/getInstall",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function P(a,s){return u.apply(this,arguments)}function u(){return u=(0,i.Z)(l().mark(function a(s,O){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.WY)(c.s3+"analysis/getAllInstall",{method:"POST",params:(0,o.Z)({},s),credentials:"include"}));case 1:case"end":return t.stop()}},a)})),u.apply(this,arguments)}},6637:function(R,g,e){"use strict";e.d(g,{y:function(){return j}});var o=e(96132),i=e(57361),_=e(9754),l=e.n(_),c=e(18811),d=e(21010);function j(f,m){return v.apply(this,arguments)}function v(){return v=(0,i.Z)(l().mark(function f(m,T){return l().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,d.WY)(c.s3+"user/search",{method:"POST",params:(0,o.Z)({},m),credentials:"include"}));case 1:case"end":return P.stop()}},f)})),v.apply(this,arguments)}}}]);
